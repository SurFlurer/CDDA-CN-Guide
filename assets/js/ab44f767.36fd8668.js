"use strict";(globalThis.webpackChunkCDDA_CN_Guide=globalThis.webpackChunkCDDA_CN_Guide||[]).push([[7706],{28453(n,e,i){i.d(e,{R:()=>c,x:()=>d});var l=i(96540);const s={},r=l.createContext(s);function c(n){const e=l.useContext(r);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:c(n.components),l.createElement(r.Provider,{value:e},n.children)}},41736(n,e,i){i.r(e),i.d(e,{assets:()=>h,contentTitle:()=>d,default:()=>j,frontMatter:()=>c,metadata:()=>l,toc:()=>a});const l=JSON.parse('{"id":"content/\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1/\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1","title":"\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1","description":"\u672c\u6587\u6863\u5f15\u7528\u7684\u6587\u4ef6","source":"@site/docs/content/\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1/\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1.md","sourceDirName":"content/\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1","slug":"/content/\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1/","permalink":"/CDDA-CN-Guide/docs/content/\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1/","draft":false,"unlisted":false,"editUrl":"https://github.com/SurFlurer/CDDA-CN-Guide/edit/master/CataclysmDDA\u7efc\u5408\u653b\u7565\u624b\u518c/docs/content/\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1/\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1.md","tags":[],"version":"current","frontMatter":{"title":"\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1"},"sidebar":"tutorialSidebar","previous":{"title":"\u914d\u7f6e\u7ba1\u7406","permalink":"/CDDA-CN-Guide/docs/content/\u6570\u636e\u6301\u4e45\u5316/\u914d\u7f6e\u7ba1\u7406"},"next":{"title":"\u4e8b\u4ef6\u9a71\u52a8\u67b6\u6784\u4e0e\u901a\u4fe1\u673a\u5236","permalink":"/CDDA-CN-Guide/docs/content/\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1/\u4e8b\u4ef6\u9a71\u52a8\u67b6\u6784\u4e0e\u901a\u4fe1\u673a\u5236"}}');var s=i(74848),r=i(28453);const c={title:"\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1"},d=void 0,h={},a=[{value:"\u76ee\u5f55",id:"\u76ee\u5f55",level:2},{value:"\u5f15\u8a00",id:"\u5f15\u8a00",level:2},{value:"\u9879\u76ee\u7ed3\u6784",id:"\u9879\u76ee\u7ed3\u6784",level:2},{value:"\u6838\u5fc3\u7ec4\u4ef6",id:"\u6838\u5fc3\u7ec4\u4ef6",level:2},{value:"\u67b6\u6784\u603b\u89c8",id:"\u67b6\u6784\u603b\u89c8",level:2},{value:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790",id:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790",level:2},{value:"\u4e3b\u63a7\u5236\u5668\uff08game\uff09\u8bbe\u8ba1",id:"\u4e3b\u63a7\u5236\u5668game\u8bbe\u8ba1",level:3},{value:"\u4e8b\u4ef6\u9a71\u52a8\u67b6\u6784\uff08\u89c2\u5bdf\u8005\u6a21\u5f0f\uff09",id:"\u4e8b\u4ef6\u9a71\u52a8\u67b6\u6784\u89c2\u5bdf\u8005\u6a21\u5f0f",level:3},{value:"\u5de5\u5382\u6a21\u5f0f\u4e0eJSON\u6570\u636e\u88c5\u914d\uff08generic_factory\uff09",id:"\u5de5\u5382\u6a21\u5f0f\u4e0ejson\u6570\u636e\u88c5\u914dgeneric_factory",level:3},{value:"\u4e3b\u6e38\u620f\u5faa\u73af\uff08do_turn\uff09",id:"\u4e3b\u6e38\u620f\u5faa\u73afdo_turn",level:3},{value:"UI\u7ba1\u7406\u5668\uff08ui_manager\uff09",id:"ui\u7ba1\u7406\u5668ui_manager",level:3},{value:"\u5730\u56fe\u4e0e\u89d2\u8272\u7cfb\u7edf\uff08\u6982\u89c8\uff09",id:"\u5730\u56fe\u4e0e\u89d2\u8272\u7cfb\u7edf\u6982\u89c8",level:3},{value:"\u7279\u6b8a\u6a21\u5f0f\u4e0e\u884c\u4e3a\u63a5\u53e3",id:"\u7279\u6b8a\u6a21\u5f0f\u4e0e\u884c\u4e3a\u63a5\u53e3",level:3},{value:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790",id:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790",level:2},{value:"\u6027\u80fd\u8003\u8651",id:"\u6027\u80fd\u8003\u8651",level:2},{value:"\u6545\u969c\u6392\u9664\u6307\u5357",id:"\u6545\u969c\u6392\u9664\u6307\u5357",level:2},{value:"\u7ed3\u8bba",id:"\u7ed3\u8bba",level:2}];function x(n){const e={a:"a",cite:"cite",h2:"h2",h3:"h3",li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.cite,{children:"\n**\u672c\u6587\u6863\u5f15\u7528\u7684\u6587\u4ef6**\n- main.cpp\n- game.h\n- game.cpp\n- do_turn.h\n- do_turn.cpp\n- event_bus.h\n- event_bus.cpp\n- event_subscriber.h\n- generic_factory.h\n- generic_factory.cpp\n- ui_manager.h\n- ui_manager.cpp\n- sdltiles.cpp\n- monstergenerator.cpp\n- iuse_actor.h\n- gamemode.h\n"}),"\n",(0,s.jsx)(e.h2,{id:"\u76ee\u5f55",children:"\u76ee\u5f55"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#%E5%BC%95%E8%A8%80",children:"\u5f15\u8a00"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84",children:"\u9879\u76ee\u7ed3\u6784"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6",children:"\u6838\u5fc3\u7ec4\u4ef6"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#%E6%9E%B6%E6%9E%84%E6%80%BB%E8%A7%88",children:"\u67b6\u6784\u603b\u89c8"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#%E8%AF%A6%E7%BB%86%E7%BB%84%E4%BB%B6%E5%88%86%E6%9E%90",children:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB%E5%88%86%E6%9E%90",children:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#%E6%80%A7%E8%83%BD%E8%80%83%E8%99%91",children:"\u6027\u80fd\u8003\u8651"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4%E6%8C%87%E5%8D%97",children:"\u6545\u969c\u6392\u9664\u6307\u5357"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#%E7%BB%93%E8%AE%BA",children:"\u7ed3\u8bba"})}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u5f15\u8a00",children:"\u5f15\u8a00"}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u6587\u4ef6\u9762\u5411Cataclysm-DDA\uff08CDDA\uff09\u7684\u6838\u5fc3\u67b6\u6784\uff0c\u805a\u7126\u4e8e\u6e38\u620f\u4e3b\u63a7\u5236\u5668\u3001\u4e8b\u4ef6\u9a71\u52a8\u67b6\u6784\u4e0e\u6570\u636e\u52a0\u8f7d\u4f53\u7cfb\uff0c\u7cfb\u7edf\u5316\u9610\u8ff0\u5355\u4f8b\u6a21\u5f0f\u3001\u5de5\u5382\u6a21\u5f0f\u3001\u89c2\u5bdf\u8005\u6a21\u5f0f\u5728\u4ee3\u7801\u4e2d\u7684\u5177\u4f53\u5e94\u7528\uff0c\u5e76\u7ed3\u5408\u6e38\u620f\u5faa\u73af\u3001UI\u7ba1\u7406\u3001\u5730\u56fe\u4e0e\u89d2\u8272\u7cfb\u7edf\u7b49\u6a21\u5757\uff0c\u7ed9\u51fa\u67b6\u6784\u51b3\u7b56\u7684\u6280\u672f\u8003\u91cf\u3001\u6027\u80fd\u4f18\u5316\u7b56\u7565\u4e0e\u53ef\u6269\u5c55\u6027\u8bbe\u8ba1\u5efa\u8bae\u3002\u76ee\u6807\u8bfb\u8005\u65e2\u5305\u62ec\u5e0c\u671b\u5feb\u901f\u7406\u89e3\u7cfb\u7edf\u8bbe\u8ba1\u7684\u5f00\u53d1\u8005\uff0c\u4e5f\u5305\u62ec\u9700\u8981\u628a\u63e1\u6574\u4f53\u8109\u7edc\u7684\u975e\u6280\u672f\u8bfb\u8005\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"\u9879\u76ee\u7ed3\u6784",children:"\u9879\u76ee\u7ed3\u6784"}),"\n",(0,s.jsx)(e.p,{children:"CDDA\u91c7\u7528\u4ee5\u201c\u529f\u80fd\u57df\u201d\u4e3a\u4e3b\u7684\u5206\u5c42\u7ec4\u7ec7\u65b9\u5f0f\uff1a\u5165\u53e3\u7a0b\u5e8f\u8d1f\u8d23\u521d\u59cb\u5316\u4e0e\u542f\u52a8\u6d41\u7a0b\uff1b\u6838\u5fc3\u903b\u8f91\u96c6\u4e2d\u5728game\u7c7b\u53ca\u5176\u5b50\u7cfb\u7edf\u4e2d\uff1b\u4e8b\u4ef6\u603b\u7ebf\u63d0\u4f9b\u677e\u8026\u5408\u7684\u6d88\u606f\u4f20\u9012\uff1b\u901a\u7528\u5de5\u5382\u8d1f\u8d23JSON\u6570\u636e\u7684\u52a0\u8f7d\u4e0e\u7ba1\u7406\uff1bUI\u7ba1\u7406\u5668\u7edf\u4e00\u5904\u7406\u6e32\u67d3\u4e0e\u8f93\u5165\uff1bdo_turn\u5b9e\u73b0\u4e3b\u6e38\u620f\u5faa\u73af\u3002"}),"\n",(0,s.jsx)(e.mermaid,{value:'graph TB\nA["\u5165\u53e3\u7a0b\u5e8f<br/>src/main.cpp"] --\x3e B["\u4e3b\u63a7\u5236\u5668<br/>src/game.h/.cpp"]\nB --\x3e C["\u4e8b\u4ef6\u603b\u7ebf<br/>src/event_bus.h/.cpp"]\nB --\x3e D["\u901a\u7528\u5de5\u5382<br/>src/generic_factory.h/.cpp"]\nB --\x3e E["UI\u7ba1\u7406\u5668<br/>src/ui_manager.h/.cpp"]\nB --\x3e F["\u4e3b\u5faa\u73af<br/>src/do_turn.h/.cpp"]\nB --\x3e G["\u602a\u7269\u751f\u6210\u5668<br/>src/monstergenerator.cpp"]\nB --\x3e H["\u884c\u4e3a\u63a5\u53e3<br/>src/iuse_actor.h"]\nB --\x3e I["\u7279\u6b8a\u6a21\u5f0f<br/>src/gamemode.h"]'}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u56fe\u8868\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"main.cpp"}),"\n",(0,s.jsx)(e.li,{children:"game.h"}),"\n",(0,s.jsx)(e.li,{children:"event_bus.h"}),"\n",(0,s.jsx)(e.li,{children:"generic_factory.h"}),"\n",(0,s.jsx)(e.li,{children:"ui_manager.h"}),"\n",(0,s.jsx)(e.li,{children:"do_turn.h"}),"\n",(0,s.jsx)(e.li,{children:"monstergenerator.cpp"}),"\n",(0,s.jsx)(e.li,{children:"iuse_actor.h"}),"\n",(0,s.jsx)(e.li,{children:"gamemode.h"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"main.cpp"}),"\n",(0,s.jsx)(e.li,{children:"game.h"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u6838\u5fc3\u7ec4\u4ef6",children:"\u6838\u5fc3\u7ec4\u4ef6"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u5355\u4e00\u6e38\u620f\u5b9e\u4f8b\uff08\u5355\u4f8b\uff09\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5168\u5c40\u552f\u4e00\u7684\u6e38\u620f\u5bf9\u8c61\u901a\u8fc7\u5168\u5c40\u6307\u9488\u6301\u6709\uff0c\u8d2f\u7a7f\u6574\u4e2a\u751f\u547d\u5468\u671f\uff0c\u63d0\u4f9b\u9759\u6001\u6570\u636e\u52a0\u8f7d\u3001\u4e16\u754c\u6570\u636e\u52a0\u8f7d\u3001\u4fdd\u5b58/\u8bfb\u53d6\u3001\u4e3b\u5faa\u73af\u8c03\u5ea6\u7b49\u80fd\u529b\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u4e8b\u4ef6\u603b\u7ebf\uff08\u89c2\u5bdf\u8005\u6a21\u5f0f\uff09\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u63d0\u4f9b\u8ba2\u9605/\u53d1\u5e03\u673a\u5236\uff0c\u652f\u6301\u5e26\u8bf4\u8bdd\u8005\u4e0a\u4e0b\u6587\u7684\u4e8b\u4ef6\u53d1\u9001\uff0c\u7528\u4e8e\u89e3\u8026\u6a21\u5757\u95f4\u901a\u4fe1\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u901a\u7528\u5de5\u5382\uff08\u5de5\u5382\u6a21\u5f0f\uff09\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7edf\u4e00\u7ba1\u7406JSON\u6570\u636e\u7684\u52a0\u8f7d\u3001\u7ee7\u627f\u3001\u62bd\u8c61\u5b9a\u4e49\u4e0e\u5ef6\u8fdf\u89e3\u6790\uff0c\u63d0\u4f9b\u7c7b\u578b\u5b89\u5168\u7684\u67e5\u8be2\u63a5\u53e3\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u4e3b\u63a7\u5236\u5668\uff08game\uff09\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u805a\u5408\u5730\u56fe\u3001\u89d2\u8272\u3001NPC\u3001\u602a\u7269\u3001\u5929\u6c14\u3001\u8ba1\u65f6\u7b49\u5b50\u7cfb\u7edf\uff0c\u534f\u8c03UI\u7ed8\u5236\u4e0e\u8f93\u5165\u5904\u7406\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u4e3b\u5faa\u73af\uff08do_turn\uff09\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u9a71\u52a8\u6bcf\u56de\u5408\u903b\u8f91\uff0c\u5904\u7406\u8f93\u5165\u3001\u66f4\u65b0\u72b6\u6001\u3001\u89e6\u53d1\u4e8b\u4ef6\u4e0eUI\u5237\u65b0\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["UI\u7ba1\u7406\u5668\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7ba1\u7406UI\u6808\u3001\u91cd\u7ed8\u533a\u57df\u3001\u7a97\u53e3\u5c3a\u5bf8\u53d8\u5316\u56de\u8c03\uff0c\u786e\u4fdd\u4e0d\u540c\u6e32\u67d3\u540e\u7aef\u7684\u4e00\u81f4\u884c\u4e3a\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"game.h"}),"\n",(0,s.jsx)(e.li,{children:"event_bus.h"}),"\n",(0,s.jsx)(e.li,{children:"generic_factory.h"}),"\n",(0,s.jsx)(e.li,{children:"do_turn.h"}),"\n",(0,s.jsx)(e.li,{children:"ui_manager.h"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u67b6\u6784\u603b\u89c8",children:"\u67b6\u6784\u603b\u89c8"}),"\n",(0,s.jsx)(e.p,{children:"CDDA\u91c7\u7528\u201c\u4e3b\u63a7\u5236\u5668 + \u677e\u8026\u5408\u4e8b\u4ef6 + \u5de5\u5382\u52a0\u8f7d + \u5206\u5c42UI\u201d\u7684\u67b6\u6784\u98ce\u683c\u3002\u4e3b\u63a7\u5236\u5668\u96c6\u4e2d\u7ba1\u7406\u6e38\u620f\u72b6\u6001\u4e0e\u5b50\u7cfb\u7edf\uff0c\u4e8b\u4ef6\u603b\u7ebf\u627f\u8f7d\u8de8\u6a21\u5757\u901a\u77e5\uff0c\u901a\u7528\u5de5\u5382\u8d1f\u8d23\u8fd0\u884c\u671f\u6570\u636e\u88c5\u914d\uff0cUI\u7ba1\u7406\u5668\u5c4f\u853d\u5e95\u5c42\u6e32\u67d3\u5dee\u5f02\u3002"}),"\n",(0,s.jsx)(e.mermaid,{value:'classDiagram\nclass Game {\n+load_static_data()\n+load_core_data()\n+setup()\n+save()/unserialize()\n+draw()/draw_panels()\n+all_creatures()/all_monsters()/all_npcs()\n+load_map()/get_cur_om()\n+on_options_changed()\n}\nclass EventBus {\n+subscribe(subscriber)\n+unsubscribe(subscriber)\n+send(event)\n+send_with_talker(...)\n}\nclass EventSubscriber {\n+notify(event)\n+notify(event,a,b)\n}\nclass GenericFactory~T~ {\n+load(json,src)\n+insert(obj)\n+finalize()\n+reset()\n+obj(id)/is_valid(id)\n}\nclass UIManager {\n+redraw()\n+redraw_invalidated()\n+screen_resized()\n+invalidate(rect,reenable)\n}\nclass DoTurn {\n+do_turn() bool\n+handle_key_blocking_activity()\n}\nGame --\x3e EventBus : "\u8ba2\u9605/\u4f7f\u7528"\nEventBus --\x3e EventSubscriber : "\u5e7f\u64ad"\nGame --\x3e GenericFactory : "\u6570\u636e\u88c5\u914d"\nGame --\x3e UIManager : "\u7ed8\u5236/\u5237\u65b0"\nDoTurn --\x3e Game : "\u9a71\u52a8"'}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u56fe\u8868\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"game.h"}),"\n",(0,s.jsx)(e.li,{children:"event_bus.h"}),"\n",(0,s.jsx)(e.li,{children:"event_subscriber.h"}),"\n",(0,s.jsx)(e.li,{children:"generic_factory.h"}),"\n",(0,s.jsx)(e.li,{children:"ui_manager.h"}),"\n",(0,s.jsx)(e.li,{children:"do_turn.h"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790",children:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790"}),"\n",(0,s.jsx)(e.h3,{id:"\u4e3b\u63a7\u5236\u5668game\u8bbe\u8ba1",children:"\u4e3b\u63a7\u5236\u5668\uff08game\uff09\u8bbe\u8ba1"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u8bbe\u8ba1\u7406\u5ff5\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4f5c\u4e3a\u201c\u4e0a\u5e1d\u89c6\u89d2\u201d\u7684\u805a\u5408\u5668\uff0c\u96c6\u4e2d\u7ba1\u7406\u5730\u56fe\u7f13\u51b2\u3001\u89d2\u8272/NPC/\u602a\u7269\u8ddf\u8e2a\u3001\u5929\u6c14\u3001\u8ba1\u65f6\u4e8b\u4ef6\u3001\u6210\u5c31/\u7edf\u8ba1/\u5893\u5fd7\u94ed\u7b49\u5b50\u7cfb\u7edf\uff0c\u63d0\u4f9b\u7edf\u4e00\u7684\u67e5\u8be2\u4e0e\u64cd\u4f5c\u63a5\u53e3\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u901a\u8fc7\u53cb\u5143\u51fd\u6570\u4e0e\u9759\u6001\u8bbf\u95ee\u5668\u66b4\u9732\u5185\u90e8\u5b50\u7cfb\u7edf\uff0c\u907f\u514d\u8fc7\u5ea6\u8026\u5408\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u5173\u952e\u804c\u8d23\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6570\u636e\u751f\u547d\u5468\u671f\uff1a\u9759\u6001\u6570\u636e\u52a0\u8f7d\u3001\u6838\u5fc3\u6570\u636e\u52a0\u8f7d\u3001\u4e16\u754c\u4e0e\u6a21\u7ec4\u6570\u636e\u52a0\u8f7d\u3001\u4fdd\u5b58/\u8bfb\u53d6\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u5730\u56fe\u4e0e\u73b0\u5b9e\u6ce1\uff1a\u7ba1\u7406\u5f53\u524d\u5730\u56fe\u3001\u73b0\u5b9e\u6ce1\u8303\u56f4\u3001\u8fc7\u8f7d\u56fe\u4e0e\u5b50\u5730\u56fe\u7684\u5207\u6362\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u89c6\u89c9\u4e0eUI\uff1a\u7ed8\u5236\u5730\u5f62\u3001\u9762\u677f\u3001\u8986\u76d6\u52a8\u753b\u3001\u95ea\u70c1\u6548\u679c\uff1b\u63d0\u4f9b\u7ed8\u5236\u56de\u8c03\u4e0eUI\u9002\u914d\u5668\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u884c\u4e3a\u4e0e\u4ea4\u4e92\uff1a\u89d2\u8272\u79fb\u52a8\u3001\u62fe\u53d6\u3001\u4f7f\u7528\u7269\u54c1\u3001\u5bf9\u8bdd\u3001\u4efb\u52a1\u3001\u57fa\u5730\u7b49\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u4e0e\u4e8b\u4ef6\u603b\u7ebf\u534f\u4f5c\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5728\u6784\u9020\u9636\u6bb5\u8ba2\u9605\u7edf\u8ba1\u3001\u51fb\u6740\u3001\u6210\u5c31\u3001\u6cd5\u672f\u4e8b\u4ef6\u4e0eEoC\u4e8b\u4ef6\uff0c\u5b9e\u73b0\u8de8\u6a21\u5757\u8054\u52a8\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.mermaid,{value:'sequenceDiagram\nparticipant Main as "\u5165\u53e3(main)"\nparticipant Game as "Game"\nparticipant Bus as "EventBus"\nparticipant Stats as "StatsTracker"\nparticipant Kill as "KillTracker"\nparticipant Memo as "MemorialLogger"\nMain->>Game : \u521b\u5efa\u5168\u5c40\u552f\u4e00\u5b9e\u4f8b\nGame->>Bus : subscribe(Stats/Kill/Memo/Achieve/Spell/EoC)\nNote over Game,Bus : \u8ba2\u9605\u5b8c\u6210\u540e\uff0c\u4e8b\u4ef6\u603b\u7ebf\u5411\u5404\u8ba2\u9605\u8005\u5e7f\u64ad'}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u56fe\u8868\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"main.cpp"}),"\n",(0,s.jsx)(e.li,{children:"game.cpp"}),"\n",(0,s.jsx)(e.li,{children:"event_bus.h"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"game.h"}),"\n",(0,s.jsx)(e.li,{children:"game.cpp"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u4e8b\u4ef6\u9a71\u52a8\u67b6\u6784\u89c2\u5bdf\u8005\u6a21\u5f0f",children:"\u4e8b\u4ef6\u9a71\u52a8\u67b6\u6784\uff08\u89c2\u5bdf\u8005\u6a21\u5f0f\uff09"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u7ed3\u6784\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4e8b\u4ef6\u603b\u7ebf\u7ef4\u62a4\u8ba2\u9605\u8005\u5217\u8868\uff0c\u63d0\u4f9b\u53d1\u9001\u4e8b\u4ef6\u4e0e\u5e26\u8bf4\u8bdd\u8005\u4e0a\u4e0b\u6587\u7684\u53d1\u9001\u65b9\u6cd5\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u8ba2\u9605\u8005\u57fa\u7c7b\u63d0\u4f9b\u901a\u77e5\u63a5\u53e3\u4e0e\u751f\u547d\u5468\u671f\u94a9\u5b50\uff0c\u786e\u4fdd\u91cd\u590d\u8ba2\u9605\u4e0e\u9519\u8bef\u9000\u8ba2\u7684\u8bca\u65ad\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u4f7f\u7528\u573a\u666f\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6e38\u620f\u7ed3\u675f\u4e8b\u4ef6\u3001\u7edf\u8ba1\u66f4\u65b0\u3001\u51fb\u6740\u8bb0\u5f55\u3001\u6210\u5c31\u89e3\u9501\u3001\u6cd5\u672f\u4e8b\u4ef6\u3001EoC\u4e8b\u4ef6\u7b49\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u6027\u80fd\u4e0e\u5065\u58ee\u6027\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u53d1\u9001\u524d\u6821\u9a8c\u4e8b\u4ef6\u6709\u6548\u6027\uff0c\u62d2\u7edd\u7a7a\u4e8b\u4ef6\uff1b\u9000\u8ba2\u65f6\u67e5\u627e\u5e76\u79fb\u9664\uff0c\u907f\u514d\u60ac\u6302\u6307\u9488\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.mermaid,{value:'sequenceDiagram\nparticipant Game as "Game"\nparticipant Bus as "EventBus"\nparticipant Sub as "EventSubscriber"\nGame->>Bus : send(event)\nBus->>Sub : notify(event)\nNote over Bus,Sub : \u6bcf\u4e2a\u8ba2\u9605\u8005\u72ec\u7acb\u5904\u7406\u4e8b\u4ef6'}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u56fe\u8868\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"event_bus.cpp"}),"\n",(0,s.jsx)(e.li,{children:"event_subscriber.h"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"event_bus.h"}),"\n",(0,s.jsx)(e.li,{children:"event_bus.cpp"}),"\n",(0,s.jsx)(e.li,{children:"event_subscriber.h"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u5de5\u5382\u6a21\u5f0f\u4e0ejson\u6570\u636e\u88c5\u914dgeneric_factory",children:"\u5de5\u5382\u6a21\u5f0f\u4e0eJSON\u6570\u636e\u88c5\u914d\uff08generic_factory\uff09"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u8bbe\u8ba1\u8981\u70b9\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7edf\u4e00\u7684\u5de5\u5382\u6a21\u677f\uff0c\u652f\u6301\u7ee7\u627f\u590d\u5236\u3001\u62bd\u8c61\u5b9a\u4e49\u3001\u5ef6\u8fdf\u89e3\u6790\u4e0e\u7248\u672c\u5931\u6548\u7f13\u5b58\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u52a0\u8f7d\u6d41\u7a0b\uff1a\u7ee7\u627f\u5904\u7406 \u2192 \u62bd\u8c61/\u771f\u5b9e\u5bf9\u8c61\u5224\u5b9a \u2192 \u63d2\u5165\u6216\u5ef6\u8fdf \u2192 finalize\u7edf\u4e00\u5904\u7406\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u67e5\u8be2\u63a5\u53e3\uff1astring_id/int_id\u53cc\u5411\u8f6c\u6362\uff0c\u5e26\u7248\u672c\u6821\u9a8c\u7684\u7f13\u5b58\u5931\u6548\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u590d\u6742\u5ea6\u4e0e\u6027\u80fd\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u67e5\u627e\uff1a\u54c8\u5e0c\u8868O(1)\u5e73\u5747\uff1b\u63d2\u5165\uff1a\u6570\u7ec4\u5c3e\u90e8\u8ffd\u52a0\uff0c\u5fc5\u8981\u65f6\u7248\u672c\u9012\u589e\u5bfc\u81f4\u7f13\u5b58\u5931\u6548\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u5ef6\u8fdf\u89e3\u6790\uff1aDeferred JSON\u961f\u5217\u5728finalize\u9636\u6bb5\u7edf\u4e00\u5904\u7406\uff0c\u907f\u514d\u5faa\u73af\u4f9d\u8d56\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u53ef\u6269\u5c55\u6027\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u901a\u8fc7\u6ce8\u518cDynamicDataLoader\u4e0estring_id\u5305\u88c5\uff0c\u65b0\u589e\u7c7b\u578b\u53ea\u9700\u9075\u5faa\u7ea6\u5b9a\u63a5\u53e3\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.mermaid,{value:'flowchart TD\nStart(["\u5f00\u59cb\u52a0\u8f7d"]) --\x3e Inherit["\u5904\u7406\u7ee7\u627f(copy-from/abstract)"]\nInherit --\x3e Kind{"\u662f\u62bd\u8c61\u8fd8\u662f\u771f\u5b9e\u5bf9\u8c61?"}\nKind --\x3e |\u62bd\u8c61| SaveAbst["\u4fdd\u5b58\u5230\u62bd\u8c61\u8868"]\nKind --\x3e |\u771f\u5b9e| Insert["\u63d2\u5165\u5230\u5217\u8868/\u6620\u5c04"]\nInsert --\x3e Deferred{"\u662f\u5426\u5ef6\u8fdf?"}\nDeferred --\x3e |\u662f| Queue["\u52a0\u5165\u5ef6\u8fdf\u961f\u5217"]\nDeferred --\x3e |\u5426| Next["\u7ee7\u7eed"]\nSaveAbst --\x3e Next\nQueue --\x3e Next\nNext --\x3e Finalize["finalize\u9636\u6bb5\u7edf\u4e00\u5904\u7406\u5ef6\u8fdf\u9879"]\nFinalize --\x3e End(["\u5b8c\u6210"])'}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u56fe\u8868\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"generic_factory.h"}),"\n",(0,s.jsx)(e.li,{children:"generic_factory.h"}),"\n",(0,s.jsx)(e.li,{children:"generic_factory.h"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"generic_factory.h"}),"\n",(0,s.jsx)(e.li,{children:"generic_factory.cpp"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u4e3b\u6e38\u620f\u5faa\u73afdo_turn",children:"\u4e3b\u6e38\u620f\u5faa\u73af\uff08do_turn\uff09"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u5faa\u73af\u804c\u8d23\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u63a5\u6536\u8f93\u5165\u3001\u5904\u7406\u6d3b\u52a8\u3001\u66f4\u65b0\u89d2\u8272\u72b6\u6001\u3001\u63a8\u8fdb\u65f6\u95f4\u3001\u89e6\u53d1\u4e8b\u4ef6\u3001\u5237\u65b0UI\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u5728\u5173\u952e\u65f6\u95f4\u70b9\uff08\u5982\u6b7b\u4ea1\uff09\u6e05\u7406\u5e76\u4fdd\u5b58\u76f8\u5173\u6570\u636e\uff0c\u89e6\u53d1\u6e38\u620f\u7ed3\u675f\u4e8b\u4ef6\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u8f93\u5165\u4e0e\u963b\u585e\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u63d0\u4f9b\u6309\u952e\u963b\u585e\u6d3b\u52a8\u7684\u5904\u7406\u51fd\u6570\uff0c\u4fdd\u8bc1\u67d0\u4e9b\u52a8\u4f5c\u671f\u95f4\u7684\u8f93\u5165\u4e00\u81f4\u6027\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u4e0eUI\u7684\u534f\u540c\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5728\u8c03\u8bd5\u83dc\u5355\u4e2d\u6f14\u793a\u4e86\u201c\u65e0\u6548\u5316\u2192\u6cf5\u4e8b\u4ef6\u2192\u91cd\u7ed8\u65e0\u6548\u533a\u57df\u2192\u5237\u65b0\u663e\u793a\u201d\u7684\u5178\u578b\u5e27\u5faa\u73af\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.mermaid,{value:'sequenceDiagram\n    participant Loop as "do_turn\u5faa\u73af"\n    participant Input as "\u8f93\u5165\u7ba1\u7406"\n    participant Game as "Game"\n    participant UI as "UI\u7ba1\u7406\u5668"\n    participant Disp as "\u663e\u793a\u5c42"\n    Loop->>Input: "\u83b7\u53d6\u8f93\u5165"\n    Loop->>Game: "\u66f4\u65b0\u72b6\u6001/\u63a8\u8fdb\u56de\u5408"\n    Loop->>UI: "invalidate/redraw_invalidated"\n    UI->>Disp: "\u5237\u65b0\u663e\u793a"\n    alt "\u6b7b\u4ea1/\u9000\u51fa"\n        Loop->>Game: "\u4fdd\u5b58/\u6e05\u7406/\u4e8b\u4ef6\u5e7f\u64ad"\n    end'}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u56fe\u8868\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"do_turn.cpp"}),"\n",(0,s.jsx)(e.li,{children:"do_turn.cpp"}),"\n",(0,s.jsx)(e.li,{children:"debug_menu.cpp"}),"\n",(0,s.jsx)(e.li,{children:"sdltiles.cpp"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"do_turn.h"}),"\n",(0,s.jsx)(e.li,{children:"do_turn.cpp"}),"\n",(0,s.jsx)(e.li,{children:"do_turn.cpp"}),"\n",(0,s.jsx)(e.li,{children:"debug_menu.cpp"}),"\n",(0,s.jsx)(e.li,{children:"sdltiles.cpp"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"ui\u7ba1\u7406\u5668ui_manager",children:"UI\u7ba1\u7406\u5668\uff08ui_manager\uff09"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u8bbe\u8ba1\u76ee\u6807\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5c4f\u853dTUI\u4e0eTILES\u4e24\u79cd\u6e32\u67d3\u540e\u7aef\u5dee\u5f02\uff0c\u7edf\u4e00\u7ba1\u7406UI\u6808\u3001\u91cd\u7ed8\u533a\u57df\u3001\u7a97\u53e3\u5c3a\u5bf8\u53d8\u5316\u4e0e\u5149\u6807\u5b9a\u4f4d\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u5173\u952e\u673a\u5236\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"ui_adaptor\u5c01\u88c5\u4f4d\u7f6e\u3001\u56de\u8c03\u4e0e\u5931\u6548\u6807\u8bb0\uff1bui_manager\u7ef4\u62a4\u5168\u5c40\u6808\u4e0e\u6279\u91cf\u91cd\u7ed8\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u652f\u6301\u7981\u7528\u4e0b\u65b9UI\u3001\u8c03\u8bd5\u6d88\u606fUI\u7684\u7279\u6b8a\u5904\u7406\uff0c\u4fdd\u8bc1\u91cd\u7ed8\u4e00\u81f4\u6027\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u4e0e\u6e32\u67d3\u540e\u7aef\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"TILES\u8def\u5f84\u4e0b\u4e0eSDL\u6e32\u67d3\u5668\u914d\u5408\uff0c\u6309\u9700\u5237\u65b0\u663e\u793a\uff1bTUI\u8def\u5f84\u4e0b\u4e0ecurses\u96c6\u6210\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.mermaid,{value:'sequenceDiagram\nparticipant App as "\u5e94\u7528"\nparticipant UIA as "ui_adaptor"\nparticipant UIM as "ui_manager"\nparticipant Disp as "\u663e\u793a\u5c42"\nApp->>UIA : on_redraw()/on_screen_resize()\nApp->>UIA : mark_resize()/invalidate_ui()\nUIM->>UIM : redraw()/redraw_invalidated()\nUIM->>Disp : \u5237\u65b0\u6307\u5b9a\u533a\u57df'}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u56fe\u8868\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"ui_manager.h"}),"\n",(0,s.jsx)(e.li,{children:"ui_manager.cpp"}),"\n",(0,s.jsx)(e.li,{children:"ui_manager.cpp"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"ui_manager.h"}),"\n",(0,s.jsx)(e.li,{children:"ui_manager.cpp"}),"\n",(0,s.jsx)(e.li,{children:"ui_manager.cpp"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u5730\u56fe\u4e0e\u89d2\u8272\u7cfb\u7edf\u6982\u89c8",children:"\u5730\u56fe\u4e0e\u89d2\u8272\u7cfb\u7edf\uff08\u6982\u89c8\uff09"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u5730\u56fe\u7ba1\u7406\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"game\u805a\u5408\u5730\u56fe\u7f13\u51b2\u3001\u73b0\u5b9e\u6ce1\u3001\u8fc7\u8f7d\u56fe\u4e0e\u5b50\u5730\u56fe\uff0c\u63d0\u4f9b\u52a0\u8f7d\u3001\u7ed8\u5236\u4e0e\u5750\u6807\u8f6c\u6362\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u89d2\u8272\u4e0e\u602a\u7269\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u901a\u8fc7\u5de5\u5382\u4e0e\u751f\u6210\u5668\u88c5\u914d\u602a\u7269\u6a21\u677f\uff0c\u652f\u6301\u968f\u673a\u751f\u6210\u3001\u7279\u5b9a\u653e\u7f6e\u4e0e\u8303\u56f4\u751f\u6210\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u7269\u54c1\u7cfb\u7edf\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4e0e\u5de5\u5382\u6a21\u5f0f\u7ed3\u5408\uff0c\u7269\u54c1\u7c7b\u578b\u7531JSON\u5b9a\u4e49\u5e76\u901a\u8fc7string_id\u8bbf\u95ee\uff0c\u652f\u6301\u7ee7\u627f\u4e0e\u5ef6\u8fdf\u89e3\u6790\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.mermaid,{value:'graph LR\nGame["Game"] --\x3e Map["\u5730\u56fe/\u73b0\u5b9e\u6ce1"]\nGame --\x3e Char["\u73a9\u5bb6/\u89d2\u8272"]\nGame --\x3e NPC["NPC"]\nGame --\x3e Mon["\u602a\u7269\u751f\u6210\u5668"]\nMon --\x3e Gen["\u6a21\u677f/\u7ee7\u627f/\u5ef6\u8fdf\u89e3\u6790"]\nGame --\x3e Item["\u7269\u54c1\u7cfb\u7edf"]\nItem --\x3e Factory["\u901a\u7528\u5de5\u5382"]'}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u56fe\u8868\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"game.h"}),"\n",(0,s.jsx)(e.li,{children:"monstergenerator.cpp"}),"\n",(0,s.jsx)(e.li,{children:"generic_factory.h"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"game.h"}),"\n",(0,s.jsx)(e.li,{children:"monstergenerator.cpp"}),"\n",(0,s.jsx)(e.li,{children:"generic_factory.h"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u7279\u6b8a\u6a21\u5f0f\u4e0e\u884c\u4e3a\u63a5\u53e3",children:"\u7279\u6b8a\u6a21\u5f0f\u4e0e\u884c\u4e3a\u63a5\u53e3"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u7279\u6b8a\u6a21\u5f0f\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u901a\u8fc7special_game\u63a5\u53e3\u5b9a\u4e49\u7279\u6b8a\u73a9\u6cd5\uff0c\u652f\u6301\u6bcf\u56de\u5408\u524d/\u540e\u3001\u9884\u5904\u7406/\u540e\u5904\u7406\u3001\u6e38\u620f\u7ed3\u675f\u7b49\u94a9\u5b50\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u884c\u4e3a\u63a5\u53e3\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"iuse_actor\u5b9a\u4e49\u53ef\u4f7f\u7528\u7684\u7269\u54c1\u884c\u4e3a\uff0c\u5982\u53ec\u5524\u602a\u7269\u7b49\uff0c\u4f53\u73b0\u201c\u884c\u4e3a\u5373\u63d2\u62d4\u201d\u7684\u6269\u5c55\u70b9\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"gamemode.h"}),"\n",(0,s.jsx)(e.li,{children:"iuse_actor.h"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790",children:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u6a21\u5757\u8026\u5408\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"game\u5bf9\u4e8b\u4ef6\u603b\u7ebf\u3001UI\u7ba1\u7406\u5668\u3001\u5730\u56fe/\u8fc7\u8f7d\u56fe\u3001\u8ba1\u65f6\u4e8b\u4ef6\u3001\u7edf\u8ba1/\u6210\u5c31/\u5893\u5fd7\u94ed\u7b49\u5b58\u5728\u76f4\u63a5\u4f9d\u8d56\uff0c\u4f46\u901a\u8fc7\u8ba2\u9605/\u67e5\u8be2\u63a5\u53e3\u964d\u4f4e\u8026\u5408\u5ea6\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u901a\u7528\u5de5\u5382\u88ab\u5e7f\u6cdb\u4f7f\u7528\uff0c\u5f62\u6210\u201c\u6570\u636e\u88c5\u914d\u4e2d\u5fc3\u201d\uff0c\u907f\u514d\u5404\u6a21\u5757\u76f4\u63a5\u89e3\u6790JSON\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u5916\u90e8\u4f9d\u8d56\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"TILES\u8def\u5f84\u4f9d\u8d56SDL\u6e32\u67d3\u5668\uff1bTUI\u8def\u5f84\u4f9d\u8d56curses\uff1b\u8de8\u5e73\u53f0\u8def\u5f84\u5305\u542bAndroid/Windows\u7279\u5b9a\u5904\u7406\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u6f5c\u5728\u98ce\u9669\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4e8b\u4ef6\u603b\u7ebf\u7684\u8ba2\u9605/\u9000\u8ba2\u5fc5\u987b\u6210\u5bf9\uff0c\u5426\u5219\u4f1a\u4ea7\u751f\u60ac\u6302\u6307\u9488\u6216\u91cd\u590d\u8ba2\u9605\u8b66\u544a\u3002"}),"\n",(0,s.jsx)(e.li,{children:"UI\u6808\u7684\u751f\u547d\u5468\u671f\u7ba1\u7406\u9700\u4e25\u683c\u9075\u5faaRAII\u8bed\u4e49\uff0c\u907f\u514d\u91cd\u7ed8\u5f02\u5e38\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.mermaid,{value:'graph TB\nGame["Game"] --\x3e Bus["EventBus"]\nGame --\x3e UI["UIManager"]\nGame --\x3e Map["Map/Overmap"]\nGame --\x3e Cal["Calendar/TimedEvents"]\nGame --\x3e Stats["Stats/Achieve/Memo"]\nGame --\x3e GF["GenericFactory"]\nGF --\x3e JSON["JSON\u6570\u636e"]'}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u56fe\u8868\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"game.cpp"}),"\n",(0,s.jsx)(e.li,{children:"generic_factory.h"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"game.cpp"}),"\n",(0,s.jsx)(e.li,{children:"generic_factory.h"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u6027\u80fd\u8003\u8651",children:"\u6027\u80fd\u8003\u8651"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u4e8b\u4ef6\u603b\u7ebf\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u53d1\u9001\u524d\u8fdb\u884c\u4e8b\u4ef6\u6709\u6548\u6027\u68c0\u67e5\uff0c\u907f\u514d\u7a7a\u4e8b\u4ef6\u5e7f\u64ad\uff1b\u8ba2\u9605\u8005\u904d\u5386\u6210\u672c\u4f4e\uff0c\u9002\u5408\u9ad8\u9891\u4e8b\u4ef6\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["UI\u91cd\u7ed8\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4ec5\u91cd\u7ed8\u6807\u8bb0\u4e3a\u65e0\u6548\u7684\u533a\u57df\uff0c\u51cf\u5c11\u5168\u5c4f\u5237\u65b0\uff1b\u5728TILES\u8def\u5f84\u4e0b\u6309\u9700\u5237\u65b0\u663e\u793a\uff0c\u907f\u514d\u65e0\u610f\u4e49\u8c03\u7528\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u5de5\u5382\u7f13\u5b58\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"string_id\u7f13\u5b58\u901a\u8fc7\u7248\u672c\u53f7\u5931\u6548\uff0c\u907f\u514d\u91cd\u590d\u67e5\u627e\uff1bfinalize\u9636\u6bb5\u7edf\u4e00\u5904\u7406\u5ef6\u8fdf\u9879\uff0c\u964d\u4f4e\u8fd0\u884c\u65f6\u5f00\u9500\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u4e3b\u5faa\u73af\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5728\u8c03\u8bd5\u6a21\u5f0f\u4e0b\u8fdb\u884c\u5e27\u7387\u57fa\u51c6\u6d4b\u8bd5\uff0c\u6307\u5bfc\u6e32\u67d3\u53c2\u6570\u8c03\u6574\uff08\u5982\u7740\u8272\u5668\u3001\u7eb9\u7406\u6df7\u5408\u7b49\uff09\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"event_bus.cpp"}),"\n",(0,s.jsx)(e.li,{children:"ui_manager.cpp"}),"\n",(0,s.jsx)(e.li,{children:"generic_factory.h"}),"\n",(0,s.jsx)(e.li,{children:"debug_menu.cpp"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u6545\u969c\u6392\u9664\u6307\u5357",children:"\u6545\u969c\u6392\u9664\u6307\u5357"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u4e8b\u4ef6\u603b\u7ebf\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u91cd\u590d\u8ba2\u9605\u4f1a\u89e6\u53d1\u8c03\u8bd5\u544a\u8b66\uff1b\u9000\u8ba2\u5931\u8d25\u4f1a\u63d0\u793a\u201c\u4e0d\u5728\u8ba2\u9605\u5217\u8868\u201d\u3002\u8bf7\u786e\u4fdd\u8ba2\u9605/\u9000\u8ba2\u6210\u5bf9\u51fa\u73b0\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["UI\u7ba1\u7406\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u82e5\u51fa\u73b0\u754c\u9762\u95ea\u70c1\u6216\u5149\u6807\u9519\u4f4d\uff0c\u68c0\u67e5ui_adaptor\u7684\u56de\u8c03\u662f\u5426\u8d8a\u754c\u7ed8\u5236\u6216\u672a\u6b63\u786e\u8bbe\u7f6e\u4f4d\u7f6e\uff1b\u786e\u8ba4\u5728\u56de\u8c03\u4e2d\u4e0d\u6267\u884c\u53ef\u80fd\u6539\u53d8UI\u6808\u7684\u64cd\u4f5c\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u5de5\u5382\u52a0\u8f7d\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u82e5\u5bf9\u8c61\u7f3a\u5931\u6216\u7ee7\u627f\u94fe\u65ad\u88c2\uff0c\u68c0\u67e5copy-from/abstract\u5b57\u6bb5\u4e0e\u5ef6\u8fdf\u89e3\u6790\u65e5\u5fd7\uff1b\u786e\u4fddfinalize\u9636\u6bb5\u88ab\u8c03\u7528\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u4e3b\u5faa\u73af\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u51fa\u73b0\u5361\u987f\u6216\u5d29\u6e83\uff0c\u4f18\u5148\u68c0\u67e5\u8f93\u5165\u6cf5\u4e0eUI\u91cd\u7ed8\u7684\u8c03\u7528\u987a\u5e8f\uff1b\u5728TILES\u8def\u5f84\u4e0b\u6ce8\u610f\u5237\u65b0\u65f6\u673a\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"event_bus.cpp"}),"\n",(0,s.jsx)(e.li,{children:"ui_manager.cpp"}),"\n",(0,s.jsx)(e.li,{children:"generic_factory.cpp"}),"\n",(0,s.jsx)(e.li,{children:"sdltiles.cpp"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u7ed3\u8bba",children:"\u7ed3\u8bba"}),"\n",(0,s.jsx)(e.p,{children:"CDDA\u7684\u6838\u5fc3\u67b6\u6784\u4ee5\u201c\u5355\u4e00\u4e3b\u63a7\u5236\u5668 + \u4e8b\u4ef6\u603b\u7ebf + \u901a\u7528\u5de5\u5382 + \u5206\u5c42UI\u201d\u4e3a\u6838\u5fc3\uff0c\u901a\u8fc7\u89c2\u5bdf\u8005\u6a21\u5f0f\u5b9e\u73b0\u6a21\u5757\u89e3\u8026\uff0c\u901a\u8fc7\u5de5\u5382\u6a21\u5f0f\u5b9e\u73b0\u8fd0\u884c\u671f\u6570\u636e\u88c5\u914d\uff0c\u901a\u8fc7\u4e3b\u5faa\u73af\u9a71\u52a8\u72b6\u6001\u6f14\u8fdb\u4e0e\u6e32\u67d3\u5237\u65b0\u3002\u8be5\u8bbe\u8ba1\u5728\u53ef\u6269\u5c55\u6027\u4e0e\u53ef\u7ef4\u62a4\u6027\u65b9\u9762\u8868\u73b0\u826f\u597d\uff0c\u540c\u65f6\u5728\u6027\u80fd\u4e0a\u901a\u8fc7\u7f13\u5b58\u5931\u6548\u3001\u6309\u9700\u5237\u65b0\u4e0e\u5ef6\u8fdf\u89e3\u6790\u7b49\u7b56\u7565\u5b9e\u73b0\u4e86\u5e73\u8861\u3002\u5efa\u8bae\u5728\u540e\u7eed\u5f00\u53d1\u4e2d\u7ee7\u7eed\u5f3a\u5316\u4e8b\u4ef6\u5951\u7ea6\u4e0eUI\u56de\u8c03\u7ea6\u675f\uff0c\u5b8c\u5584\u6570\u636e\u88c5\u914d\u7684\u9519\u8bef\u62a5\u544a\u4e0e\u56de\u6eda\u673a\u5236\uff0c\u4ee5\u8fdb\u4e00\u6b65\u63d0\u5347\u7a33\u5b9a\u6027\u4e0e\u53ef\u8bca\u65ad\u6027\u3002"})]})}function j(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(x,{...n})}):x(n)}}}]);