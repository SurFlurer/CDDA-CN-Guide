"use strict";(globalThis.webpackChunkCDDA_CN_Guide=globalThis.webpackChunkCDDA_CN_Guide||[]).push([[2139],{28453(n,e,l){l.d(e,{R:()=>c,x:()=>x});var s=l(96540);const i={},r=s.createContext(i);function c(n){const e=s.useContext(r);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function x(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:c(n.components),s.createElement(r.Provider,{value:e},n.children)}},65673(n,e,l){l.r(e),l.d(e,{assets:()=>d,contentTitle:()=>x,default:()=>a,frontMatter:()=>c,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"content/\u6570\u636e\u6301\u4e45\u5316/\u4fdd\u5b58\u7cfb\u7edf","title":"\u4fdd\u5b58\u7cfb\u7edf","description":"\u672c\u6587\u5f15\u7528\u7684\u6587\u4ef6","source":"@site/docs/content/\u6570\u636e\u6301\u4e45\u5316/\u4fdd\u5b58\u7cfb\u7edf.md","sourceDirName":"content/\u6570\u636e\u6301\u4e45\u5316","slug":"/content/\u6570\u636e\u6301\u4e45\u5316/\u4fdd\u5b58\u7cfb\u7edf","permalink":"/CDDA-CN-Guide/docs/content/\u6570\u636e\u6301\u4e45\u5316/\u4fdd\u5b58\u7cfb\u7edf","draft":false,"unlisted":false,"editUrl":"https://github.com/SurFlurer/CDDA-CN-Guide/edit/master/CataclysmDDA\u7efc\u5408\u653b\u7565\u624b\u518c/docs/content/\u6570\u636e\u6301\u4e45\u5316/\u4fdd\u5b58\u7cfb\u7edf.md","tags":[],"version":"current","frontMatter":{"title":"\u4fdd\u5b58\u7cfb\u7edf"},"sidebar":"tutorialSidebar","previous":{"title":"\u6570\u636e\u6301\u4e45\u5316","permalink":"/CDDA-CN-Guide/docs/content/\u6570\u636e\u6301\u4e45\u5316/"},"next":{"title":"\u914d\u7f6e\u7ba1\u7406","permalink":"/CDDA-CN-Guide/docs/content/\u6570\u636e\u6301\u4e45\u5316/\u914d\u7f6e\u7ba1\u7406"}}');var i=l(74848),r=l(28453);const c={title:"\u4fdd\u5b58\u7cfb\u7edf"},x=void 0,d={},h=[{value:"\u76ee\u5f55",id:"\u76ee\u5f55",level:2},{value:"\u5f15\u8a00",id:"\u5f15\u8a00",level:2},{value:"\u9879\u76ee\u7ed3\u6784",id:"\u9879\u76ee\u7ed3\u6784",level:2},{value:"\u6838\u5fc3\u7ec4\u4ef6",id:"\u6838\u5fc3\u7ec4\u4ef6",level:2},{value:"\u67b6\u6784\u603b\u89c8",id:"\u67b6\u6784\u603b\u89c8",level:2},{value:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790",id:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790",level:2},{value:"\u7ec4\u4ef6A\uff1a\u6e38\u620f\u4e3b\u5b58\u6863\uff08JSON\uff09",id:"\u7ec4\u4ef6a\u6e38\u620f\u4e3b\u5b58\u6863json",level:3},{value:"\u7ec4\u4ef6B\uff1a\u89d2\u8272\u4e0eNPC\u6301\u4e45\u5316\uff08JSON\uff09",id:"\u7ec4\u4ef6b\u89d2\u8272\u4e0enpc\u6301\u4e45\u5316json",level:3},{value:"\u7ec4\u4ef6C\uff1a\u8d85\u56fe\u4e0e\u5730\u56fe\u6301\u4e45\u5316\uff08JSON\uff09",id:"\u7ec4\u4ef6c\u8d85\u56fe\u4e0e\u5730\u56fe\u6301\u4e45\u5316json",level:3},{value:"\u7ec4\u4ef6D\uff1aFlexBuffers\u7f13\u5b58\u4e0e\u89e3\u6790",id:"\u7ec4\u4ef6dflexbuffers\u7f13\u5b58\u4e0e\u89e3\u6790",level:3},{value:"\u7ec4\u4ef6E\uff1a\u7248\u672c\u517c\u5bb9\u6027\u4e0e\u6570\u636e\u8fc1\u79fb",id:"\u7ec4\u4ef6e\u7248\u672c\u517c\u5bb9\u6027\u4e0e\u6570\u636e\u8fc1\u79fb",level:3},{value:"\u7ec4\u4ef6F\uff1a\u9519\u8bef\u6062\u590d\u4e0e\u6570\u636e\u5b8c\u6574\u6027",id:"\u7ec4\u4ef6f\u9519\u8bef\u6062\u590d\u4e0e\u6570\u636e\u5b8c\u6574\u6027",level:3},{value:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790",id:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790",level:2},{value:"\u6027\u80fd\u8003\u91cf",id:"\u6027\u80fd\u8003\u91cf",level:2},{value:"\u6545\u969c\u6392\u67e5\u6307\u5357",id:"\u6545\u969c\u6392\u67e5\u6307\u5357",level:2},{value:"\u7ed3\u8bba",id:"\u7ed3\u8bba",level:2},{value:"\u9644\u5f55",id:"\u9644\u5f55",level:2}];function j(n){const e={a:"a",cite:"cite",h2:"h2",h3:"h3",li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.cite,{children:"\n**\u672c\u6587\u5f15\u7528\u7684\u6587\u4ef6**\n- savegame.cpp\n- savegame_json.cpp\n- savegame_legacy.cpp\n- flexbuffer_cache.h\n- flexbuffer_cache.cpp\n- json_loader.cpp\n- flexbuffer_json.h\n- flexbuffer_json.cpp\n- cata_flatbuffers_assert.h\n- worldfactory.cpp\n- Makefile\n- flatbuffers.vcxproj\n"}),"\n",(0,i.jsx)(e.h2,{id:"\u76ee\u5f55",children:"\u76ee\u5f55"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#%E5%BC%95%E8%A8%80",children:"\u5f15\u8a00"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84",children:"\u9879\u76ee\u7ed3\u6784"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6",children:"\u6838\u5fc3\u7ec4\u4ef6"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#%E6%9E%B6%E6%9E%84%E6%80%BB%E8%A7%88",children:"\u67b6\u6784\u603b\u89c8"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#%E8%AF%A6%E7%BB%86%E7%BB%84%E4%BB%B6%E5%88%86%E6%9E%90",children:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB%E5%88%86%E6%9E%90",children:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#%E6%80%A7%E8%83%BD%E8%80%83%E9%87%8F",children:"\u6027\u80fd\u8003\u91cf"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E6%8C%87%E5%8D%97",children:"\u6545\u969c\u6392\u67e5\u6307\u5357"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#%E7%BB%93%E8%AE%BA",children:"\u7ed3\u8bba"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#%E9%99%84%E5%BD%95",children:"\u9644\u5f55"})}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u5f15\u8a00",children:"\u5f15\u8a00"}),"\n",(0,i.jsx)(e.p,{children:"\u672c\u6587\u4ef6\u9762\u5411Cataclysm-DDA\u7684\u4fdd\u5b58\u7cfb\u7edf\uff0c\u7cfb\u7edf\u6027\u9610\u8ff0\u5176\u57fa\u4e8eFlatBuffers/FlexBuffers\u7684\u5e8f\u5217\u5316\u4e0e\u53cd\u5e8f\u5217\u5316\u5b9e\u73b0\uff0c\u8986\u76d6\u4ee5\u4e0b\u5173\u952e\u4e3b\u9898\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6570\u636e\u7ed3\u6784\u5b9a\u4e49\u4e0e\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\u6d41\u7a0b"}),"\n",(0,i.jsx)(e.li,{children:"\u5b58\u6863\u6587\u4ef6\u7ec4\u7ec7\u7ed3\u6784\u3001\u538b\u7f29\u4e0e\u5b58\u50a8\u4f18\u5316"}),"\n",(0,i.jsx)(e.li,{children:"\u7248\u672c\u517c\u5bb9\u6027\u4e0e\u6570\u636e\u8fc1\u79fb\u673a\u5236"}),"\n",(0,i.jsx)(e.li,{children:"\u9519\u8bef\u6062\u590d\u3001\u6570\u636e\u5b8c\u6574\u6027\u6821\u9a8c\u4e0e\u5f02\u5e38\u5904\u7406\u7b56\u7565"}),"\n",(0,i.jsx)(e.li,{children:"\u5178\u578b\u4fdd\u5b58/\u52a0\u8f7d\u573a\u666f\uff08\u6e38\u620f\u72b6\u6001\u3001\u5730\u56fe\u6570\u636e\u3001\u89d2\u8272\u4fe1\u606f\uff09\u7684\u5b9e\u73b0\u8def\u5f84"}),"\n",(0,i.jsx)(e.li,{children:"\u6027\u80fd\u4f18\u5316\u4e0e\u5b58\u50a8\u7a7a\u95f4\u7ba1\u7406\u6700\u4f73\u5b9e\u8df5"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u9879\u76ee\u7ed3\u6784",children:"\u9879\u76ee\u7ed3\u6784"}),"\n",(0,i.jsx)(e.p,{children:"\u4fdd\u5b58\u7cfb\u7edf\u7531\u201c\u4f20\u7edfJSON\u4fdd\u5b58\u201d\u4e0e\u201cFlexBuffers\u7f13\u5b58\u89e3\u6790\u201d\u4e24\u5957\u5e76\u884c\u673a\u5236\u6784\u6210\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4f20\u7edfJSON\u4fdd\u5b58\uff1a\u7528\u4e8e\u73a9\u5bb6\u8fdb\u5ea6\u3001\u4e16\u754c\u72b6\u6001\u7b49\uff0c\u91c7\u7528\u6807\u51c6JSON\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\u3002"}),"\n",(0,i.jsx)(e.li,{children:"FlexBuffers\u7f13\u5b58\u89e3\u6790\uff1a\u5c06JSON\u6587\u672c\u8f6c\u6362\u4e3aFlexBuffers\u4e8c\u8fdb\u5236\uff0c\u4ee5\u63d0\u5347\u8bfb\u53d6\u6027\u80fd\u4e0e\u5185\u5b58\u5360\u7528\uff0c\u5e76\u652f\u6301\u78c1\u76d8\u7f13\u5b58\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.mermaid,{value:'graph TB\nsubgraph "\u4fdd\u5b58\u7cfb\u7edf"\nA["savegame.cpp<br/>\u6e38\u620f\u4e3b\u5b58\u6863(JSON)"]\nB["savegame_json.cpp<br/>\u5404\u7c7b\u5bf9\u8c61JSON\u5e8f\u5217\u5316"]\nC["savegame_legacy.cpp<br/>\u65e7\u7248\u7c7b\u578b\u6620\u5c04/\u8fc1\u79fb"]\nD["json_loader.cpp<br/>FlexBuffers\u7f13\u5b58\u5165\u53e3"]\nE["flexbuffer_cache.h/.cpp<br/>FlexBuffers\u89e3\u6790/\u7f13\u5b58"]\nF["flexbuffer_json.h/.cpp<br/>FlexBuffers\u5230JSON\u89c6\u56fe"]\nG["cata_flatbuffers_assert.h<br/>\u65ad\u8a00\u9002\u914d"]\nH["worldfactory.cpp<br/>\u538b\u7f29\u6253\u5305(.zzip)"]\nend\nA --\x3e B\nA --\x3e C\nD --\x3e E\nD --\x3e F\nE --\x3e F\nG --\x3e E\nH --\x3e A'}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u56fe\u8868\u6765\u6e90"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"savegame.cpp"}),"\n",(0,i.jsx)(e.li,{children:"savegame_json.cpp"}),"\n",(0,i.jsx)(e.li,{children:"savegame_legacy.cpp"}),"\n",(0,i.jsx)(e.li,{children:"json_loader.cpp"}),"\n",(0,i.jsx)(e.li,{children:"flexbuffer_cache.h"}),"\n",(0,i.jsx)(e.li,{children:"flexbuffer_cache.cpp"}),"\n",(0,i.jsx)(e.li,{children:"flexbuffer_json.h"}),"\n",(0,i.jsx)(e.li,{children:"flexbuffer_json.cpp"}),"\n",(0,i.jsx)(e.li,{children:"cata_flatbuffers_assert.h"}),"\n",(0,i.jsx)(e.li,{children:"worldfactory.cpp"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"savegame.cpp"}),"\n",(0,i.jsx)(e.li,{children:"json_loader.cpp"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u6838\u5fc3\u7ec4\u4ef6",children:"\u6838\u5fc3\u7ec4\u4ef6"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u6e38\u620f\u4e3b\u5b58\u6863\uff08JSON\uff09\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7248\u672c\u53f7\u4e0e\u65f6\u95f4\u8f74\u3001\u89c6\u89d2\u504f\u79fb\u3001\u7edf\u8ba1\u8ffd\u8e2a\u5668\u3001\u6210\u5c31\u8ffd\u8e2a\u5668\u3001\u6d88\u606f\u7cfb\u7edf\u3001\u5168\u5c40\u53d8\u91cf\u7b49\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u6e38\u620f\u5e8f\u5217\u5316\u5934\uff0c\u53cd\u5e8f\u5217\u5316\u5b9e\u73b0\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u89d2\u8272\u4e0eNPC\u6301\u4e45\u5316\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u73a9\u5bb6\u5c5e\u6027\u3001\u6280\u80fd\u3001\u5185\u810f\u3001\u6d3b\u52a8\u5386\u53f2\u3001\u589e\u76ca/\u51cf\u76ca\u3001\u9b54\u6cd5\u3001\u4f53\u6db2\u7b49\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u89d2\u8272\u5e8f\u5217\u5316\u7247\u6bb5\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5730\u56fe\u4e0e\u8d85\u56fe\uff08JSON\uff09\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5c42\u7ea7\u5730\u5f62RLE\u7f16\u7801\u3001\u57ce\u5e02/\u6cb3\u6d41/\u8fde\u63a5/\u8425\u5730/\u7279\u6b8a\u70b9\u4f4d\u7b49\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u8d85\u56fe\u53cd\u5e8f\u5217\u5316\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["FlexBuffers\u7f13\u5b58\u4e0e\u89e3\u6790\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5c06JSON\u6587\u672c\u89e3\u6790\u4e3aFlexBuffers\u4e8c\u8fdb\u5236\uff0c\u652f\u6301\u78c1\u76d8\u7f13\u5b58\u4e0e\u5185\u5b58\u6620\u5c04\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u7f13\u5b58\u63a5\u53e3\uff0c\u89e3\u6790\u4e0e\u7f13\u5b58\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["JSON\u52a0\u8f7d\u5668\u4e0eFlexBuffers\u6865\u63a5\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u63d0\u4f9b\u4ece\u8def\u5f84/\u5b57\u7b26\u4e32\u89e3\u6790\u4e3aFlexBuffers\u89c6\u56fe\u7684\u80fd\u529b\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u52a0\u8f7d\u5668\u5165\u53e3\uff0c\u5b57\u7b26\u4e32\u89e3\u6790\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u65ad\u8a00\u9002\u914d\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5c06FlatBuffers/FlexBuffers\u65ad\u8a00\u66ff\u6362\u4e3a\u9879\u76ee\u81ea\u5b9a\u4e49\u65ad\u8a00\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u65ad\u8a00\u9002\u914d\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"savegame.cpp"}),"\n",(0,i.jsx)(e.li,{children:"savegame_json.cpp"}),"\n",(0,i.jsx)(e.li,{children:"savegame.cpp"}),"\n",(0,i.jsx)(e.li,{children:"flexbuffer_cache.h"}),"\n",(0,i.jsx)(e.li,{children:"flexbuffer_cache.cpp"}),"\n",(0,i.jsx)(e.li,{children:"json_loader.cpp"}),"\n",(0,i.jsx)(e.li,{children:"cata_flatbuffers_assert.h"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u67b6\u6784\u603b\u89c8",children:"\u67b6\u6784\u603b\u89c8"}),"\n",(0,i.jsx)(e.p,{children:"\u4fdd\u5b58\u7cfb\u7edf\u5728\u8fd0\u884c\u65f6\u901a\u8fc7\u201cJSON\u6587\u672c \u2192 FlexBuffers\u4e8c\u8fdb\u5236 \u2192 \u5185\u5b58\u89c6\u56fe\u201d\u7684\u94fe\u8def\u52a0\u901f\u8bfb\u53d6\uff1b\u540c\u65f6\u4fdd\u7559\u4f20\u7edfJSON\u5199\u5165\u8def\u5f84\u4ee5\u517c\u5bb9\u65e7\u7248\u4e0e\u8de8\u5e73\u53f0\u9700\u6c42\u3002\u4e16\u754c\u5de5\u5382\u8d1f\u8d23\u5c06\u5730\u56fe\u8bb0\u5fc6\u4e0e\u8d85\u56fe\u7b49\u8d44\u6e90\u6253\u5305\u4e3a.zzip\u5f52\u6863\uff0c\u51cf\u5c11\u788e\u7247\u4e0eIO\u5f00\u9500\u3002"}),"\n",(0,i.jsx)(e.mermaid,{value:'sequenceDiagram\nparticipant Game as "\u6e38\u620f\u903b\u8f91(savegame.cpp)"\nparticipant Loader as "\u52a0\u8f7d\u5668(json_loader.cpp)"\nparticipant Cache as "FlexBuffers\u7f13\u5b58(flexbuffer_cache.cpp)"\nparticipant FBJS as "FlexBuffers\u89c6\u56fe(flexbuffer_json.cpp)"\nparticipant Disk as "\u78c1\u76d8/\u5185\u5b58\u6620\u5c04"\nGame->>Loader : \u8bf7\u6c42\u4ece\u8def\u5f84\u52a0\u8f7dJSON\nLoader->>Cache : \u89e3\u6790\u5e76\u7f13\u5b58FlexBuffers\nCache->>Disk : \u8bfb\u53d6JSON\u6587\u672c\u6216\u5185\u5b58\u6620\u5c04\nCache--\x3e>FBJS : \u8fd4\u56deFlexBuffers\u6839\u5f15\u7528\nFBJS--\x3e>Game : \u63d0\u4f9b\u5f3a\u7c7b\u578b\u8bbf\u95ee\u63a5\u53e3\nNote over Cache,Disk : \u652f\u6301\u78c1\u76d8\u7f13\u5b58\u4e0emmap\u52a0\u901f'}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u56fe\u8868\u6765\u6e90"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"json_loader.cpp"}),"\n",(0,i.jsx)(e.li,{children:"flexbuffer_cache.cpp"}),"\n",(0,i.jsx)(e.li,{children:"flexbuffer_json.cpp"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"json_loader.cpp"}),"\n",(0,i.jsx)(e.li,{children:"flexbuffer_cache.cpp"}),"\n",(0,i.jsx)(e.li,{children:"flexbuffer_json.cpp"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790",children:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790"}),"\n",(0,i.jsx)(e.h3,{id:"\u7ec4\u4ef6a\u6e38\u620f\u4e3b\u5b58\u6863json",children:"\u7ec4\u4ef6A\uff1a\u6e38\u620f\u4e3b\u5b58\u6863\uff08JSON\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u7248\u672c\u53f7\u4e0e\u5934\u90e8\u4fe1\u606f\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4fdd\u5b58\u7248\u672c\u53f7\u3001\u65f6\u95f4\u6233\u3001\u521d\u59cb\u5b63\u8282\u3001\u81ea\u52a8\u65c5\u884c\u6a21\u5f0f\u3001\u5b89\u5168\u6a21\u5f0f\u7b49\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u5934\u90e8\u5e8f\u5217\u5316\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5730\u56fe\u5750\u6807\u4e0e\u89c6\u89d2\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5f53\u524d\u5b50\u56fe\u5750\u6807\u3001\u8d85\u56fe\u5750\u6807\u3001\u89c6\u89d2\u504f\u79fb\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u5750\u6807\u4e0e\u89c6\u89d2\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u6c14\u5473\u4e0e\u602a\u7269\u8ffd\u8e2a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"RLE\u7f16\u7801\u7684\u6c14\u5473\u6570\u636e\u3001\u6d3b\u8dc3\u602a\u7269\u5217\u8868\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u6c14\u5473\u5e8f\u5217\u5316\uff0c\u602a\u7269\u8ffd\u8e2a\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5168\u5c40\u72b6\u6001\u4e0e\u6d88\u606f\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7edf\u8ba1\u8ffd\u8e2a\u5668\u3001\u6210\u5c31\u8ffd\u8e2a\u5668\u3001\u6d88\u606f\u7cfb\u7edf\u3001\u5168\u5c40\u53d8\u91cf\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u72b6\u6001\u4e0e\u6d88\u606f\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.mermaid,{value:'flowchart TD\nStart(["\u5f00\u59cb\u5e8f\u5217\u5316"]) --\x3e Header["\u5199\u5165\u7248\u672c\u53f7/\u65f6\u95f4\u8f74/\u6a21\u5f0f"]\nHeader --\x3e MapPos["\u5199\u5165\u5730\u56fe\u5750\u6807/\u89c6\u89d2\u504f\u79fb"]\nMapPos --\x3e Scent["\u5199\u5165\u6c14\u5473\u6570\u636e(RLE)"]\nScent --\x3e Monsters["\u5199\u5165\u6d3b\u8dc3\u602a\u7269\u5217\u8868"]\nMonsters --\x3e Stats["\u5199\u5165\u7edf\u8ba1/\u6210\u5c31/\u6d88\u606f"]\nStats --\x3e Player["\u5199\u5165\u73a9\u5bb6\u72b6\u6001"]\nPlayer --\x3e End(["\u7ed3\u675f"])'}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u56fe\u8868\u6765\u6e90"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"savegame.cpp"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"savegame.cpp"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u7ec4\u4ef6b\u89d2\u8272\u4e0enpc\u6301\u4e45\u5316json",children:"\u7ec4\u4ef6B\uff1a\u89d2\u8272\u4e0eNPC\u6301\u4e45\u5316\uff08JSON\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u89d2\u8272\u57fa\u7840\u5c5e\u6027\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u529b\u91cf/\u654f\u6377/\u611f\u77e5/\u667a\u529b\u3001\u8eab\u9ad8\u4f53\u91cd\u3001\u8840\u578b\u3001\u6bcf\u65e5\u7761\u7720/\u8fde\u7eed\u7761\u7720\u7b49\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u89d2\u8272\u52a0\u8f7d\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u6280\u80fd\u4e0e\u4e13\u957f\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6280\u80fd\u7b49\u7ea7\u3001\u7ec3\u4e60\u5ea6\u3001\u77e5\u8bc6\u7b49\u7ea7\u3001\u62f3\u672f\u6d41\u6d3e\u4e0e\u9009\u62e9\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u6280\u80fd\u5e8f\u5217\u5316\uff0c\u62f3\u672f\u6570\u636e\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u7ef4\u751f\u7d20\u4e0e\u6d88\u8017\u5386\u53f2\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6bcf\u65e5\u7ef4\u751f\u7d20\u6444\u5165\u3001\u6d88\u8d39\u4e8b\u4ef6\u5386\u53f2\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u7ef4\u751f\u7d20\u4e0e\u6d88\u8017\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u9057\u4f20\u4e0e\u53d8\u5f02\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u53d8\u5f02\u6570\u636e\u3001\u53d8\u79cd\u4fe1\u606f\u3001\u662f\u5426\u5e26\u7535/\u4f9b\u7535\u7b49\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u53d8\u5f02\u5e8f\u5217\u5316\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.mermaid,{value:'classDiagram\nclass Character {\n+\u5c5e\u6027 : \u529b/\u654f/\u611f/\u667a\n+\u751f\u7406 : \u8eab\u9ad8/\u4f53\u91cd/\u8840\u578b\n+\u9700\u6c42 : \u9965\u6e34/\u7761\u7720/\u8f90\u5c04\n+\u6280\u80fd : \u6280\u80fd\u7b49\u7ea7/\u7ec3\u4e60\u5ea6\n+\u4e13\u957f : \u62f3\u672f\u6d41\u6d3e/\u9009\u62e9\n+\u7ef4\u751f : \u7ef4\u751f\u7d20/\u6d88\u8017\u5386\u53f2\n+\u72b6\u6001 : \u589e\u76ca/\u51cf\u76ca/\u9b54\u6cd5\n}\nclass SkillLevel {\n+level\n+exercise\n+knowledgeLevel\n+rustAccumulator\n}\nCharacter --\x3e SkillLevel : "\u5305\u542b"'}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u56fe\u8868\u6765\u6e90"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"savegame_json.cpp"}),"\n",(0,i.jsx)(e.li,{children:"savegame_json.cpp"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"savegame_json.cpp"}),"\n",(0,i.jsx)(e.li,{children:"savegame_json.cpp"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u7ec4\u4ef6c\u8d85\u56fe\u4e0e\u5730\u56fe\u6301\u4e45\u5316json",children:"\u7ec4\u4ef6C\uff1a\u8d85\u56fe\u4e0e\u5730\u56fe\u6301\u4e45\u5316\uff08JSON\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5c42\u7ea7\u5730\u5f62\u4e0eRLE\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5730\u5f62\u5c42\u6309Z/Y/X\u626b\u63cf\uff0c\u4f7f\u7528RLE\u538b\u7f29\u5b58\u50a8\uff0c\u652f\u6301\u8fc7\u65f6\u5730\u5f62ID\u8fc1\u79fb\u4e0e\u8425\u5730\u653e\u7f6e\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u5c42\u7ea7\u89e3\u6790\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u8fde\u63a5\u4e0e\u9053\u8def\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8fde\u63a5\u5916\u57df\u7684\u8fde\u63a5\u7c7b\u578b\u3001\u672c\u5730\u9053\u8def\u8fc1\u79fb\u81f3\u8fde\u63a5\u4f53\u7cfb\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u8fde\u63a5\u4e0e\u9053\u8def\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u57ce\u5e02/\u6cb3\u6d41/\u65e0\u7ebf\u7535\u5854/\u8f7d\u5177\u8ffd\u8e2a\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u57ce\u5e02\u7ed3\u6784\u3001\u6cb3\u6d41\u8282\u70b9\u3001\u65e0\u7ebf\u7535\u5854\u3001\u8ffd\u8e2a\u8f7d\u5177\u7b49\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u57ce\u5e02/\u6cb3\u6d41/\u65e0\u7ebf\u7535\uff0c\u8f7d\u5177\u8ffd\u8e2a\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u602a\u7269\u7fa4\u7ec4\u4e0e\u7279\u6b8a\u70b9\u4f4d\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u602a\u7269\u7fa4\u7ec4\u4f4d\u7f6e\u4e0e\u76ee\u6807\u3001\u8425\u5730/\u5b89\u5168\u533a\u6807\u8bb0\u3001\u7279\u6b8a\u70b9\u4f4d\u653e\u7f6e\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u602a\u7269\u7fa4\u7ec4\uff0c\u7279\u6b8a\u70b9\u4f4d\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.mermaid,{value:'flowchart TD\nLayers["\u8bfb\u53d6\u5c42\u7ea7\u6570\u7ec4"] --\x3e RLE["\u9010\u5c42RLE\u89e3\u7801\u5730\u5f62"]\nRLE --\x3e Obsolete["\u8fc7\u65f6\u5730\u5f62ID\u8fc1\u79fb"]\nObsolete --\x3e Camps["\u6839\u636e\u5730\u5f62\u7c7b\u578b\u6807\u8bb0\u8425\u5730"]\nLayers --\x3e Connections["\u8fde\u63a5/\u9053\u8def\u89e3\u6790"]\nLayers --\x3e Cities["\u57ce\u5e02/\u6cb3\u6d41/\u65e0\u7ebf\u7535"]\nLayers --\x3e Special["\u7279\u6b8a\u70b9\u4f4d/\u5b89\u5168\u533a"]\nLayers --\x3e Monsters["\u602a\u7269\u7fa4\u7ec4/\u8ffd\u8e2a\u8f7d\u5177"]'}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u56fe\u8868\u6765\u6e90"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"savegame.cpp"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"savegame.cpp"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u7ec4\u4ef6dflexbuffers\u7f13\u5b58\u4e0e\u89e3\u6790",children:"\u7ec4\u4ef6D\uff1aFlexBuffers\u7f13\u5b58\u4e0e\u89e3\u6790"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u7f13\u5b58\u63a5\u53e3\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u652f\u6301\u4ece\u8def\u5f84\u89e3\u6790\u3001\u4ece\u7f13\u51b2\u533a\u89e3\u6790\u3001\u5e26\u504f\u79fb\u89e3\u6790\uff1b\u53ef\u9009\u78c1\u76d8\u7f13\u5b58\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u7f13\u5b58\u7c7b\u63a5\u53e3\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u89e3\u6790\u4e0e\u78c1\u76d8\u7f13\u5b58\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4f18\u5148\u5c1d\u8bd5mmap\u8bfb\u53d6\u4e0e\u78c1\u76d8\u7f13\u5b58\u547d\u4e2d\uff1b\u5426\u5219\u89e3\u6790JSON\u6587\u672c\u5e76\u843d\u76d8\u7f13\u5b58\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u89e3\u6790\u4e0e\u7f13\u5b58\uff0c\u78c1\u76d8\u7f13\u5b58\u4fdd\u5b58\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["FlexBuffers\u5230JSON\u89c6\u56fe\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u63d0\u4f9b\u952e\u8def\u5f84\u8bbf\u95ee\u3001\u6210\u5458\u904d\u5386\u3001\u9519\u8bef\u5b9a\u4f4d\u4e0e\u672a\u8bbf\u95ee\u5b57\u6bb5\u62a5\u544a\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u7c7b\u578b\u6620\u5c04\uff0c\u9519\u8bef\u5b9a\u4f4d\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.mermaid,{value:'sequenceDiagram\nparticipant Path as "\u8def\u5f84/\u5b57\u7b26\u4e32"\nparticipant Cache as "flexbuffer_cache"\nparticipant Disk as "\u78c1\u76d8\u7f13\u5b58"\nparticipant FB as "FlexBuffers"\nparticipant View as "flexbuffer_json"\nPath->>Cache : parse()/parse_and_cache()\nalt \u547d\u4e2d\u78c1\u76d8\u7f13\u5b58\nCache->>Disk : \u52a0\u8f7d.mtime.fb\nDisk--\x3e>Cache : \u8fd4\u56demmap\u53e5\u67c4\nelse \u672a\u547d\u4e2d\nCache->>FB : \u89e3\u6790JSON\u6587\u672c\u4e3aFlexBuffers\nCache->>Disk : \u5199\u5165.mtime.fb\nend\nCache--\x3e>View : \u8fd4\u56de\u6839\u5f15\u7528/\u952e\u8def\u5f84\u8bbf\u95ee'}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u56fe\u8868\u6765\u6e90"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"flexbuffer_cache.cpp"}),"\n",(0,i.jsx)(e.li,{children:"flexbuffer_json.cpp"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"flexbuffer_cache.h"}),"\n",(0,i.jsx)(e.li,{children:"flexbuffer_cache.cpp"}),"\n",(0,i.jsx)(e.li,{children:"flexbuffer_json.cpp"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u7ec4\u4ef6e\u7248\u672c\u517c\u5bb9\u6027\u4e0e\u6570\u636e\u8fc1\u79fb",children:"\u7ec4\u4ef6E\uff1a\u7248\u672c\u517c\u5bb9\u6027\u4e0e\u6570\u636e\u8fc1\u79fb"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u7248\u672c\u53f7\u4e0e\u52a0\u8f7d\u7248\u672c\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e3b\u5b58\u6863\u7248\u672c\u53f7\u4e0e\u52a0\u8f7d\u7248\u672c\u53f7\u5206\u79bb\uff0c\u4fbf\u4e8e\u8de8\u7248\u672c\u517c\u5bb9\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u7248\u672c\u5e38\u91cf\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u65e7\u7248\u7c7b\u578b\u6620\u5c04\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6d3b\u52a8\u7c7b\u578b\u3001\u5bf9\u8bdd\u4e3b\u9898\u7b49\u679a\u4e3e\u503c\u8fc1\u79fb\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u6d3b\u52a8\u7c7b\u578b\u6620\u5c04\uff0c\u5bf9\u8bdd\u4e3b\u9898\u6620\u5c04\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5730\u5f62/\u9884decessors\u4fee\u590d\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5bf9\u7ebf\u6027\u9053\u8def\u7684\u8fc7\u5ea6\u53e0\u52a0\u8fdb\u884c\u53bb\u91cd\u4e0e\u56de\u9000\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u9884decessors\u4fee\u590d\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.mermaid,{value:'flowchart TD\nLoad["\u8bfb\u53d6\u4fdd\u5b58\u7248\u672c\u53f7"] --\x3e Check{"\u662f\u5426\u65b0\u7248\u672c?"}\nCheck -- \u5426 --\x3e UseNew["\u4f7f\u7528\u65b0\u89e3\u6790\u5668"]\nCheck -- \u662f --\x3e UseLegacy["\u8c03\u7528\u65e7\u7248\u52a0\u8f7d\u5668"]\nUseLegacy --\x3e Migrate["\u7c7b\u578b/ID\u8fc1\u79fb"]\nMigrate --\x3e Apply["\u5e94\u7528\u5230\u5f53\u524d\u5bf9\u8c61"]'}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u56fe\u8868\u6765\u6e90"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"savegame.cpp"}),"\n",(0,i.jsx)(e.li,{children:"savegame_legacy.cpp"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"savegame.cpp"}),"\n",(0,i.jsx)(e.li,{children:"savegame_legacy.cpp"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u7ec4\u4ef6f\u9519\u8bef\u6062\u590d\u4e0e\u6570\u636e\u5b8c\u6574\u6027",children:"\u7ec4\u4ef6F\uff1a\u9519\u8bef\u6062\u590d\u4e0e\u6570\u636e\u5b8c\u6574\u6027"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u65ad\u8a00\u9002\u914d\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5c06FlatBuffers/FlexBuffers\u65ad\u8a00\u66ff\u6362\u4e3a\u9879\u76ee\u65ad\u8a00\uff0c\u786e\u4fdd\u53ef\u6355\u83b7\u4e0e\u7edf\u4e00\u5904\u7406\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u65ad\u8a00\u9002\u914d\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["JSON\u89e3\u6790\u9519\u8bef\u5b9a\u4f4d\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u901a\u8fc7\u952e\u8def\u5f84\u4e0e\u539f\u59cb\u6d41\u5b9a\u4f4d\u9519\u8bef\uff0c\u63d0\u4f9b\u53cb\u597d\u62a5\u9519\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u9519\u8bef\u629b\u51fa\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u78c1\u76d8\u7f13\u5b58\u4e00\u81f4\u6027\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u57fa\u4e8emtime\u6821\u9a8c\u7f13\u5b58\u6709\u6548\u6027\uff0c\u8fc7\u671f\u5219\u5220\u9664\u5e76\u91cd\u65b0\u751f\u6210\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u7f13\u5b58\u4e00\u81f4\u6027\u68c0\u67e5\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"cata_flatbuffers_assert.h"}),"\n",(0,i.jsx)(e.li,{children:"flexbuffer_json.cpp"}),"\n",(0,i.jsx)(e.li,{children:"flexbuffer_cache.cpp"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790",children:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5916\u90e8\u4f9d\u8d56\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"FlatBuffers/FlexBuffers\u5934\u6587\u4ef6\u4e0eIDL\u89e3\u6790\u5668\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u7b2c\u4e09\u65b9\u6e90\u6536\u96c6\uff0cMSVC\u5de5\u7a0b\u5305\u542b\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5185\u90e8\u8026\u5408\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"json_loader\u4f9d\u8d56flexbuffer_cache\u4e0eflexbuffer_json\uff0c\u540e\u8005\u63d0\u4f9bFlexBuffers\u5230JSON\u89c6\u56fe\u7684\u6865\u63a5\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u52a0\u8f7d\u5668\u4f9d\u8d56\uff0c\u89c6\u56fe\u63a5\u53e3\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.mermaid,{value:'graph LR\nMake["Makefile<br/>\u7b2c\u4e09\u65b9\u6e90\u6536\u96c6"] --\x3e FB["FlatBuffers/FlexBuffers"]\nVCX["flatbuffers.vcxproj<br/>MSVC\u5305\u542b"] --\x3e FB\nLoader["json_loader.cpp"] --\x3e Cache["flexbuffer_cache.*"]\nLoader --\x3e FBJS["flexbuffer_json.*"]\nCache --\x3e FB\nFBJS --\x3e FB'}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u56fe\u8868\u6765\u6e90"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Makefile"}),"\n",(0,i.jsx)(e.li,{children:"flatbuffers.vcxproj"}),"\n",(0,i.jsx)(e.li,{children:"json_loader.cpp"}),"\n",(0,i.jsx)(e.li,{children:"flexbuffer_cache.cpp"}),"\n",(0,i.jsx)(e.li,{children:"flexbuffer_json.h"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Makefile"}),"\n",(0,i.jsx)(e.li,{children:"flatbuffers.vcxproj"}),"\n",(0,i.jsx)(e.li,{children:"json_loader.cpp"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u6027\u80fd\u8003\u91cf",children:"\u6027\u80fd\u8003\u91cf"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["FlexBuffers\u89e3\u6790\u4e0e\u7f13\u5b58\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u901a\u8fc7\u78c1\u76d8\u7f13\u5b58\u4e0emmap\u51cf\u5c11\u91cd\u590d\u89e3\u6790\u4e0eIO\u5f00\u9500\uff1b\u5bf9\u70ed\u8def\u5f84\uff08\u5730\u56fe/\u8d85\u56fe\uff09\u663e\u8457\u63d0\u901f\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u78c1\u76d8\u7f13\u5b58\u4fdd\u5b58\uff0cmmap\u52a0\u8f7d\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["JSON\u5230FlexBuffers\u8f6c\u6362\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5c06\u9891\u7e41\u8bfb\u53d6\u7684JSON\u6587\u672c\u8f6c\u6362\u4e3a\u4e8c\u8fdb\u5236\u7ed3\u6784\uff0c\u964d\u4f4e\u89e3\u6790\u6210\u672c\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u89e3\u6790\u5165\u53e3\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u538b\u7f29\u5f52\u6863\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e16\u754c\u5de5\u5382\u5c06\u5730\u56fe\u8bb0\u5fc6\u4e0e\u8d85\u56fe\u6253\u5305\u4e3a.zzip\uff0c\u51cf\u5c11\u6587\u4ef6\u788e\u7247\u4e0e\u76ee\u5f55\u5c42\u7ea7\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u538b\u7f29\u6d41\u7a0b\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"[\u672c\u8282\u4e3a\u901a\u7528\u6027\u80fd\u5efa\u8bae\uff0c\u4e0d\u76f4\u63a5\u5206\u6790\u5177\u4f53\u6587\u4ef6]"}),"\n",(0,i.jsx)(e.h2,{id:"\u6545\u969c\u6392\u67e5\u6307\u5357",children:"\u6545\u969c\u6392\u67e5\u6307\u5357"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["JSON\u89e3\u6790\u5931\u8d25\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528\u952e\u8def\u5f84\u5b9a\u4f4d\u9519\u8bef\u4f4d\u7f6e\uff0c\u7ed3\u5408\u539f\u59cb\u6d41\u8f93\u51fa\u5b9a\u4f4d\u95ee\u9898\u5b57\u6bb5\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u9519\u8bef\u629b\u51fa\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["FlexBuffers\u7f13\u5b58\u5931\u6548\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u68c0\u67e5mtime\u4e00\u81f4\u6027\uff0c\u5fc5\u8981\u65f6\u6e05\u7406\u7f13\u5b58\u6587\u4ef6\u540e\u91cd\u5efa\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u7f13\u5b58\u4e00\u81f4\u6027\u68c0\u67e5\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u7248\u672c\u4e0d\u5339\u914d\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u786e\u8ba4savegame_loading_version\u4e0e\u5b58\u6863\u5934\u90e8\u4e00\u81f4\uff0c\u5fc5\u8981\u65f6\u542f\u7528\u65e7\u7248\u52a0\u8f7d\u5668\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53c2\u8003\u8def\u5f84\uff1a\u7248\u672c\u8bfb\u53d6\uff0c\u65e7\u7248\u6620\u5c04\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7ae0\u8282\u6765\u6e90"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"flexbuffer_json.cpp"}),"\n",(0,i.jsx)(e.li,{children:"flexbuffer_cache.cpp"}),"\n",(0,i.jsx)(e.li,{children:"savegame.cpp"}),"\n",(0,i.jsx)(e.li,{children:"savegame_legacy.cpp"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u7ed3\u8bba",children:"\u7ed3\u8bba"}),"\n",(0,i.jsx)(e.p,{children:"Cataclysm-DDA\u7684\u4fdd\u5b58\u7cfb\u7edf\u901a\u8fc7\u201cJSON\u6301\u4e45\u5316 + FlexBuffers\u52a0\u901f\u201d\u7684\u53cc\u8f68\u8bbe\u8ba1\uff0c\u5728\u4fdd\u8bc1\u8de8\u7248\u672c\u517c\u5bb9\u4e0e\u53ef\u79fb\u690d\u6027\u7684\u524d\u63d0\u4e0b\uff0c\u663e\u8457\u63d0\u5347\u4e86\u8bfb\u53d6\u6027\u80fd\u4e0e\u5185\u5b58\u6548\u7387\u3002\u914d\u5408\u78c1\u76d8\u7f13\u5b58\u4e0e.zzip\u538b\u7f29\uff0c\u7cfb\u7edf\u5728\u5927\u89c4\u6a21\u5730\u56fe\u4e0e\u590d\u6742\u89d2\u8272\u6570\u636e\u573a\u666f\u4e0b\u4ecd\u80fd\u4fdd\u6301\u7a33\u5b9a\u4e0e\u9ad8\u6548\u3002"}),"\n",(0,i.jsx)(e.p,{children:"[\u672c\u8282\u4e3a\u603b\u7ed3\u6027\u5185\u5bb9\uff0c\u4e0d\u76f4\u63a5\u5206\u6790\u5177\u4f53\u6587\u4ef6]"}),"\n",(0,i.jsx)(e.h2,{id:"\u9644\u5f55",children:"\u9644\u5f55"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u672f\u8bed\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"JSON\uff1a\u4eba\u7c7b\u53ef\u8bfb\u7684\u6587\u672c\u683c\u5f0f\uff0c\u9002\u5408\u8c03\u8bd5\u4e0e\u8de8\u5e73\u53f0\u3002"}),"\n",(0,i.jsx)(e.li,{children:"FlexBuffers\uff1a\u8f7b\u91cf\u7ea7\u4e8c\u8fdb\u5236\u5e8f\u5217\u5316\uff0c\u9002\u5408\u9ad8\u6027\u80fd\u8bfb\u53d6\u3002"}),"\n",(0,i.jsx)(e.li,{children:"mtime\uff1a\u6587\u4ef6\u6700\u540e\u4fee\u6539\u65f6\u95f4\uff0c\u7528\u4e8e\u7f13\u5b58\u4e00\u81f4\u6027\u6821\u9a8c\u3002"}),"\n",(0,i.jsx)(e.li,{children:".zzip\uff1a\u538b\u7f29\u5f52\u6863\u683c\u5f0f\uff0c\u7528\u4e8e\u6253\u5305\u5730\u56fe\u4e0e\u8bb0\u5fc6\u6587\u4ef6\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5b9e\u73b0\u8def\u5f84\u901f\u67e5\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6e38\u620f\u4e3b\u5b58\u6863\u5e8f\u5217\u5316\uff1asavegame.cpp"}),"\n",(0,i.jsx)(e.li,{children:"\u89d2\u8272\u5e8f\u5217\u5316\uff1asavegame_json.cpp"}),"\n",(0,i.jsx)(e.li,{children:"\u8d85\u56fe\u53cd\u5e8f\u5217\u5316\uff1asavegame.cpp"}),"\n",(0,i.jsx)(e.li,{children:"FlexBuffers\u89e3\u6790\u4e0e\u7f13\u5b58\uff1aflexbuffer_cache.cpp"}),"\n",(0,i.jsx)(e.li,{children:"JSON\u52a0\u8f7d\u5668\u5165\u53e3\uff1ajson_loader.cpp"}),"\n",(0,i.jsx)(e.li,{children:"\u65ad\u8a00\u9002\u914d\uff1acata_flatbuffers_assert.h"}),"\n",(0,i.jsx)(e.li,{children:"\u538b\u7f29\u6253\u5305\uff1aworldfactory.cpp"}),"\n"]}),"\n"]}),"\n"]})]})}function a(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(j,{...n})}):j(n)}}}]);