"use strict";(globalThis.webpackChunkCDDA_CN_Guide=globalThis.webpackChunkCDDA_CN_Guide||[]).push([[7368],{1614(n,e,i){i.r(e),i.d(e,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>r});const s=JSON.parse('{"id":"content/\u5e73\u53f0\u9002\u914d/\u8de8\u5e73\u53f0\u6784\u5efa\u7cfb\u7edf","title":"\u8de8\u5e73\u53f0\u6784\u5efa\u7cfb\u7edf","description":"\u672c\u6587\u5f15\u7528\u7684\u6587\u4ef6","source":"@site/docs/content/\u5e73\u53f0\u9002\u914d/\u8de8\u5e73\u53f0\u6784\u5efa\u7cfb\u7edf.md","sourceDirName":"content/\u5e73\u53f0\u9002\u914d","slug":"/content/\u5e73\u53f0\u9002\u914d/\u8de8\u5e73\u53f0\u6784\u5efa\u7cfb\u7edf","permalink":"/CDDA-CN-Guide/docs/content/\u5e73\u53f0\u9002\u914d/\u8de8\u5e73\u53f0\u6784\u5efa\u7cfb\u7edf","draft":false,"unlisted":false,"editUrl":"https://github.com/SurFlurer/CDDA-CN-Guide/edit/master/CataclysmDDA\u7efc\u5408\u653b\u7565\u624b\u518c/docs/content/\u5e73\u53f0\u9002\u914d/\u8de8\u5e73\u53f0\u6784\u5efa\u7cfb\u7edf.md","tags":[],"version":"current","frontMatter":{"title":"\u8de8\u5e73\u53f0\u6784\u5efa\u7cfb\u7edf"},"sidebar":"tutorialSidebar","previous":{"title":"Windows\u5e73\u53f0\u9002\u914d","permalink":"/CDDA-CN-Guide/docs/content/\u5e73\u53f0\u9002\u914d/Windows\u5e73\u53f0\u9002\u914d"},"next":{"title":"\u5f00\u53d1\u5de5\u5177\u4e0e\u6d4b\u8bd5","permalink":"/CDDA-CN-Guide/docs/content/\u5f00\u53d1\u5de5\u5177\u4e0e\u6d4b\u8bd5/"}}');var l=i(74848),c=i(28453);const t={title:"\u8de8\u5e73\u53f0\u6784\u5efa\u7cfb\u7edf"},d=void 0,a={},r=[{value:"\u76ee\u5f55",id:"\u76ee\u5f55",level:2},{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"\u9879\u76ee\u7ed3\u6784",id:"\u9879\u76ee\u7ed3\u6784",level:2},{value:"\u6838\u5fc3\u7ec4\u4ef6",id:"\u6838\u5fc3\u7ec4\u4ef6",level:2},{value:"\u67b6\u6784\u603b\u89c8",id:"\u67b6\u6784\u603b\u89c8",level:2},{value:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790",id:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790",level:2},{value:"\u7ec4\u4ef6A\uff1a\u9876\u5c42CMake\u914d\u7f6e\u4e0e\u6761\u4ef6\u7f16\u8bd1",id:"\u7ec4\u4ef6a\u9876\u5c42cmake\u914d\u7f6e\u4e0e\u6761\u4ef6\u7f16\u8bd1",level:3},{value:"\u7ec4\u4ef6B\uff1aCMake\u9884\u8bbe\u7cfb\u7edf\u4e0e\u53d8\u91cf\u7ee7\u627f",id:"\u7ec4\u4ef6bcmake\u9884\u8bbe\u7cfb\u7edf\u4e0e\u53d8\u91cf\u7ee7\u627f",level:3},{value:"\u7ec4\u4ef6C\uff1a\u5de5\u5177\u94fe\u4e0e\u4ea4\u53c9\u7f16\u8bd1\u914d\u7f6e",id:"\u7ec4\u4ef6c\u5de5\u5177\u94fe\u4e0e\u4ea4\u53c9\u7f16\u8bd1\u914d\u7f6e",level:3},{value:"\u7ec4\u4ef6D\uff1a\u6784\u5efa\u811a\u672c\u7ec4\u7ec7\u4e0e\u81ea\u52a8\u5316\u4efb\u52a1",id:"\u7ec4\u4ef6d\u6784\u5efa\u811a\u672c\u7ec4\u7ec7\u4e0e\u81ea\u52a8\u5316\u4efb\u52a1",level:3},{value:"\u7ec4\u4ef6E\uff1a\u76ee\u6807\u5e73\u53f0\u68c0\u6d4b\u4e0e\u6761\u4ef6\u7f16\u8bd1\u903b\u8f91",id:"\u7ec4\u4ef6e\u76ee\u6807\u5e73\u53f0\u68c0\u6d4b\u4e0e\u6761\u4ef6\u7f16\u8bd1\u903b\u8f91",level:3},{value:"\u7ec4\u4ef6F\uff1a\u53ef\u6267\u884c\u76ee\u6807\u4e0e\u5b89\u88c5\u89c4\u5219",id:"\u7ec4\u4ef6f\u53ef\u6267\u884c\u76ee\u6807\u4e0e\u5b89\u88c5\u89c4\u5219",level:3},{value:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790",id:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790",level:2},{value:"\u6027\u80fd\u8003\u91cf",id:"\u6027\u80fd\u8003\u91cf",level:2},{value:"\u6545\u969c\u6392\u67e5\u6307\u5357",id:"\u6545\u969c\u6392\u67e5\u6307\u5357",level:2},{value:"\u7ed3\u8bba",id:"\u7ed3\u8bba",level:2},{value:"\u9644\u5f55",id:"\u9644\u5f55",level:2}];function x(n){const e={a:"a",cite:"cite",em:"em",h2:"h2",h3:"h3",li:"li",mermaid:"mermaid",ol:"ol",p:"p",ul:"ul",...(0,c.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.cite,{children:"\n**\u672c\u6587\u5f15\u7528\u7684\u6587\u4ef6**\n- CMakeLists.txt\n- CMakePresets.json\n- CMakeUserPresets.json.in\n- build.sh\n- MSVC.cmake\n- LLVM.cmake\n- x64-windows-static.cmake\n- windows-tiles-sounds-x64-msvc.cmake\n- src/CMakeLists.txt\n- data/CMakeLists.txt\n- clang-tidy-build.sh\n- clang-tidy-run.sh\n"}),"\n",(0,l.jsx)(e.h2,{id:"\u76ee\u5f55",children:"\u76ee\u5f55"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#%E7%AE%80%E4%BB%8B",children:"\u7b80\u4ecb"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84",children:"\u9879\u76ee\u7ed3\u6784"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6",children:"\u6838\u5fc3\u7ec4\u4ef6"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#%E6%9E%B6%E6%9E%84%E6%80%BB%E8%A7%88",children:"\u67b6\u6784\u603b\u89c8"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#%E8%AF%A6%E7%BB%86%E7%BB%84%E4%BB%B6%E5%88%86%E6%9E%90",children:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB%E5%88%86%E6%9E%90",children:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#%E6%80%A7%E8%83%BD%E8%80%83%E9%87%8F",children:"\u6027\u80fd\u8003\u91cf"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E6%8C%87%E5%8D%97",children:"\u6545\u969c\u6392\u67e5\u6307\u5357"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#%E7%BB%93%E8%AE%BA",children:"\u7ed3\u8bba"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#%E9%99%84%E5%BD%95",children:"\u9644\u5f55"})}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u7b80\u4ecb",children:"\u7b80\u4ecb"}),"\n",(0,l.jsx)(e.p,{children:"\u672c\u6587\u4ef6\u9762\u5411Cataclysm-DDA\u7684\u8de8\u5e73\u53f0\u6784\u5efa\u7cfb\u7edf\uff0c\u7cfb\u7edf\u6027\u68b3\u7406CMake\u914d\u7f6e\u4e0e\u9884\u8bbe\u3001\u6761\u4ef6\u7f16\u8bd1\u4e0e\u5e73\u53f0\u68c0\u6d4b\u3001\u5de5\u5177\u94fe\u4e0e\u4ea4\u53c9\u7f16\u8bd1\u3001\u6784\u5efa\u811a\u672c\u7ec4\u7ec7\u4e0e\u81ea\u52a8\u5316\u4efb\u52a1\uff0c\u5e76\u7ed9\u51fa\u6269\u5c55\u65b9\u6cd5\u4e0e\u5e38\u89c1\u95ee\u9898\u8bca\u65ad\u3002\u6587\u6863\u4ee5\u4ed3\u5e93\u4e2d\u5b9e\u9645\u6587\u4ef6\u4e3a\u4f9d\u636e\uff0c\u901a\u8fc7\u56fe\u793a\u4e0e\u5206\u5c42\u8bf4\u660e\u5e2e\u52a9\u8bfb\u8005\u5feb\u901f\u7406\u89e3\u5e76\u9ad8\u6548\u4f7f\u7528\u8be5\u6784\u5efa\u4f53\u7cfb\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"\u9879\u76ee\u7ed3\u6784",children:"\u9879\u76ee\u7ed3\u6784"}),"\n",(0,l.jsx)(e.p,{children:"\u4ed3\u5e93\u91c7\u7528\u201c\u9876\u5c42CMake + \u5b50\u76ee\u5f55\u6a21\u5757\u201d\u7684\u7ec4\u7ec7\u65b9\u5f0f\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9876\u5c42\u6839CMakeLists.txt\u8d1f\u8d23\u5168\u5c40\u9009\u9879\u3001\u5e73\u53f0\u68c0\u6d4b\u3001\u5e93\u67e5\u627e\u4e0e\u5b89\u88c5\u89c4\u5219"}),"\n",(0,l.jsx)(e.li,{children:"src/data\u7b49\u5b50\u76ee\u5f55\u5206\u522b\u5b9a\u4e49\u53ef\u6267\u884c\u76ee\u6807\u4e0e\u6570\u636e\u5b89\u88c5"}),"\n",(0,l.jsx)(e.li,{children:"build-scripts\u63d0\u4f9b\u8de8\u5e73\u53f0\u5de5\u5177\u94fe\u3001CI\u811a\u672c\u4e0eclang-tidy\u652f\u6301"}),"\n",(0,l.jsx)(e.li,{children:"CMakePresets.json\u96c6\u4e2d\u63cf\u8ff0\u591a\u5e73\u53f0\u6784\u5efa\u9884\u8bbe\uff0c\u652f\u6301\u7ee7\u627f\u4e0e\u73af\u5883\u6ce8\u5165"}),"\n"]}),"\n",(0,l.jsx)(e.mermaid,{value:'graph TB\nRoot["\u9876\u5c42CMakeLists.txt<br/>\u5168\u5c40\u9009\u9879/\u5e73\u53f0\u68c0\u6d4b/\u5e93\u67e5\u627e/\u5b89\u88c5"] --\x3e Src["src/CMakeLists.txt<br/>\u53ef\u6267\u884c\u76ee\u6807\u4e0e\u94fe\u63a5"]\nRoot --\x3e Data["data/CMakeLists.txt<br/>\u6570\u636e\u5b89\u88c5"]\nRoot --\x3e Presets["CMakePresets.json<br/>\u591a\u5e73\u53f0\u9884\u8bbe/\u7ee7\u627f/\u73af\u5883"]\nRoot --\x3e Scripts["build-scripts/<br/>\u5de5\u5177\u94fe/\u811a\u672c/clang-tidy"]\nPresets --\x3e MSVC["MSVC.cmake<br/>MSVC\u5de5\u5177\u94fe"]\nPresets --\x3e LLVM["LLVM.cmake<br/>ClangCL\u5de5\u5177\u94fe"]\nPresets --\x3e Triplet["x64-windows-static.cmake<br/>\u9759\u6001\u4e09\u5143\u7ec4"]\nPresets --\x3e Preload["windows-tiles-sounds-x64-msvc.cmake<br/>\u9884\u52a0\u8f7d\u811a\u672c"]'}),"\n",(0,l.jsx)(e.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"src/CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"data/CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"CMakePresets.json"}),"\n",(0,l.jsx)(e.li,{children:"MSVC.cmake"}),"\n",(0,l.jsx)(e.li,{children:"LLVM.cmake"}),"\n",(0,l.jsx)(e.li,{children:"x64-windows-static.cmake"}),"\n",(0,l.jsx)(e.li,{children:"windows-tiles-sounds-x64-msvc.cmake"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"CMakePresets.json"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u6838\u5fc3\u7ec4\u4ef6",children:"\u6838\u5fc3\u7ec4\u4ef6"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5168\u5c40\u6784\u5efa\u9009\u9879\u4e0e\u5e73\u53f0\u68c0\u6d4b\uff1a\u5728\u9876\u5c42CMakeLists\u4e2d\u5b9a\u4e49\u6784\u5efa\u7c7b\u578b\u3001\u7f16\u8bd1\u5668\u8b66\u544a\u3001\u52a8\u6001/\u9759\u6001\u94fe\u63a5\u7b56\u7565\u3001\u56fd\u9645\u5316\u4e0e\u672c\u5730\u5316\u5f00\u5173\u3001\u6d4b\u8bd5\u5f00\u5173\u7b49\uff1b\u901a\u8fc7CMAKE_SYSTEM_NAME\u4e0eCMAKE_HOST_SYSTEM_PROCESSOR\u8f93\u51fa\u6784\u5efa\u73af\u5883\u4fe1\u606f\uff0c\u5e76\u5bf9MSYS2\u3001Darwin\u7b49\u8fdb\u884c\u5dee\u5f02\u5316\u5904\u7406\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u6761\u4ef6\u7f16\u8bd1\u4e0e\u529f\u80fd\u5f00\u5173\uff1aTILES/CURSES/SOUND/BACKTRACE/LOCALIZE/USE_XDG_DIR/USE_HOME_DIR/DYNAMIC_LINKING/JSON_FORMAT/CATA_CCACHE\u7b49\u9009\u9879\u63a7\u5236\u529f\u80fd\u7ec4\u5408\u4e0e\u94fe\u63a5\u6a21\u5f0f\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u5e93\u67e5\u627e\u4e0e\u76ee\u6807\u751f\u6210\uff1a\u6839\u636e\u9009\u9879\u67e5\u627eSDL2/SDL2_ttf/SDL2_image/SDL2_mixer/ncurses/zlib/threads\u7b49\uff1b\u5728src/CMakeLists\u4e2d\u6309\u5e73\u53f0\u751f\u6210cataclysm\u4e0ecataclysm-tiles\u4e24\u4e2a\u53ef\u6267\u884c\u76ee\u6807\u53ca\u5176\u516c\u5171\u5bf9\u8c61\u5e93\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u9884\u8bbe\u7cfb\u7edf\uff1aCMakePresets.json\u96c6\u4e2d\u5b9a\u4e49Windows/Linux\u591a\u5957\u9884\u8bbe\uff0c\u652f\u6301\u7ee7\u627f\u3001\u73af\u5883\u53d8\u91cf\u6ce8\u5165\u3001\u5de5\u5177\u94fe\u6587\u4ef6\u4e0e\u9879\u76ee\u524d\u7f6e\u811a\u672c\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u5de5\u5177\u94fe\u4e0e\u4ea4\u53c9\u7f16\u8bd1\uff1aMSVC.cmake/LLVM.cmake/x64-windows-static.cmake\u63d0\u4f9b\u7f16\u8bd1\u5668\u3001\u94fe\u63a5\u5668\u3001\u8fd0\u884c\u65f6\u4e0eVCPKG\u96c6\u6210\uff1bwindows-tiles-sounds-x64-msvc.cmake\u7528\u4e8e\u9884\u52a0\u8f7dVCPKG\u6839\u8def\u5f84\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u6784\u5efa\u811a\u672c\uff1abuild-scripts/build.sh\u7edf\u4e00CI\u4e0e\u672c\u5730\u6784\u5efa\u6d41\u7a0b\uff0c\u652f\u6301clang-tidy\u63d2\u4ef6\u6784\u5efa\u4e0e\u6d4b\u8bd5\uff1bclang-tidy-run.sh/clang-tidy-build.sh\u63d0\u4f9bclang-tidy\u68c0\u67e5\u6d41\u6c34\u7ebf\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u6570\u636e\u5b89\u88c5\uff1adata/CMakeLists.txt\u6309SOUND\u5f00\u5173\u5b89\u88c5\u97f3\u6548\u8d44\u6e90\uff0c\u6309RELEASE\u5b89\u88c5\u6e38\u620f\u6570\u636e\u76ee\u5f55\u4e0e\u6587\u4ef6\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"src/CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"data/CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"CMakePresets.json"}),"\n",(0,l.jsx)(e.li,{children:"MSVC.cmake"}),"\n",(0,l.jsx)(e.li,{children:"LLVM.cmake"}),"\n",(0,l.jsx)(e.li,{children:"x64-windows-static.cmake"}),"\n",(0,l.jsx)(e.li,{children:"windows-tiles-sounds-x64-msvc.cmake"}),"\n",(0,l.jsx)(e.li,{children:"build.sh"}),"\n",(0,l.jsx)(e.li,{children:"clang-tidy-build.sh"}),"\n",(0,l.jsx)(e.li,{children:"clang-tidy-run.sh"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u67b6\u6784\u603b\u89c8",children:"\u67b6\u6784\u603b\u89c8"}),"\n",(0,l.jsx)(e.p,{children:"\u4e0b\u56fe\u5c55\u793a\u4ece\u7528\u6237\u9009\u62e9\u9884\u8bbe\u5230\u751f\u6210\u53ef\u6267\u884c\u76ee\u6807\u4e0e\u5b89\u88c5\u6570\u636e\u7684\u6574\u4f53\u6d41\u7a0b\uff0c\u4ee5\u53ca\u5de5\u5177\u94fe\u4e0eVCPKG\u7684\u96c6\u6210\u70b9\u3002"}),"\n",(0,l.jsx)(e.mermaid,{value:'sequenceDiagram\nparticipant Dev as "\u5f00\u53d1\u8005/CI"\nparticipant CMake as "CMake(\u9876\u5c42)"\nparticipant Preset as "CMakePresets.json"\nparticipant Toolchain as "\u5de5\u5177\u94fe\u6587\u4ef6"\nparticipant VCPKG as "VCPKG\u96c6\u6210"\nparticipant Src as "src/CMakeLists.txt"\nparticipant Data as "data/CMakeLists.txt"\nDev->>Preset : \u9009\u62e9\u9884\u8bbe(\u5982windows-x64-msvc)\nPreset->>CMake : \u6ce8\u5165\u7f13\u5b58\u53d8\u91cf/\u73af\u5883/\u5de5\u5177\u94fe\nCMake->>Toolchain : \u52a0\u8f7dMSVC.cmake/LLVM.cmake\nToolchain->>VCPKG : \u5305\u542bvcpkg.cmake\u5e76\u5e94\u7528triplet\nCMake->>Src : \u67e5\u627e\u5e93/\u751f\u6210\u76ee\u6807\nSrc--\x3e>CMake : \u8f93\u51facataclysm/cataclysm-tiles\nCMake->>Data : \u5b89\u88c5\u6570\u636e\u76ee\u5f55\u4e0e\u6587\u4ef6\nCMake--\x3e>Dev : \u53ef\u6267\u884c\u6587\u4ef6\u4e0e\u5b89\u88c5\u4ea7\u7269'}),"\n",(0,l.jsx)(e.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"CMakePresets.json"}),"\n",(0,l.jsx)(e.li,{children:"MSVC.cmake"}),"\n",(0,l.jsx)(e.li,{children:"LLVM.cmake"}),"\n",(0,l.jsx)(e.li,{children:"src/CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"data/CMakeLists.txt"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790",children:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790"}),"\n",(0,l.jsx)(e.h3,{id:"\u7ec4\u4ef6a\u9876\u5c42cmake\u914d\u7f6e\u4e0e\u6761\u4ef6\u7f16\u8bd1",children:"\u7ec4\u4ef6A\uff1a\u9876\u5c42CMake\u914d\u7f6e\u4e0e\u6761\u4ef6\u7f16\u8bd1"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5e73\u53f0\u68c0\u6d4b\u4e0e\u5b8f\u5b9a\u4e49\uff1a\u57fa\u4e8eCMAKE_SYSTEM_NAME\u8bbe\u7f6e_OS_*\u5b8f\uff0cDarwin\u5e73\u53f0\u9644\u52a0MACOSX\u4e0eSDL\u76f8\u5173\u5b8f\uff1bMSYS2\u73af\u5883\u4e0b\u6dfb\u52a0MSYS2\u5b8f\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u52a8\u6001/\u9759\u6001\u94fe\u63a5\u7b56\u7565\uff1aDYNAMIC_LINKING\u5173\u95ed\u65f6\u5f3a\u5236\u9759\u6001\u94fe\u63a5\uff0c\u8bbe\u7f6eBUILD_SHARED_LIBRARIES\u4e0e\u94fe\u63a5\u5668\u6807\u5fd7\uff1bMINGW\u975eMSVC\u65f6\u907f\u514d\u4f9d\u8d56MinGW\u8fd0\u884c\u65f6DLL\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u7f16\u8bd1\u5668\u8b66\u544a\u4e0e\u6807\u51c6\uff1a\u975eMSVC\u542f\u7528\u4e25\u683c\u8b66\u544a\u96c6\u5408\u5e76\u6309\u7f16\u8bd1\u5668\u5dee\u5f02\u8c03\u6574\uff1b\u5f3a\u5236C++17\u6807\u51c6\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u6784\u5efa\u7c7b\u578b\u4e0e\u8f93\u51fa\uff1aDebug\u9ed8\u8ba4\u5f00\u53d1\u6a21\u5f0f\uff0c\u8f93\u51fa\u81f3\u6e90\u76ee\u5f55\uff1bRelease\u8bbe\u7f6e\u5b89\u88c5\u524d\u7f00\u4e0e\u6570\u636e\u76ee\u5f55\u5e03\u5c40\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u529f\u80fd\u5f00\u5173\u4e0e\u4e92\u65a5\uff1aTILES\u4e0eCURSES\u4e92\u65a5\uff1bUSE_XDG_DIR\u4e0eUSE_HOME_DIR\u4e92\u65a5\uff1bLOCALIZE\u4e0eGETTEXT\u96c6\u6210\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u5e93\u67e5\u627e\u4e0e\u76ee\u6807\uff1a\u6309\u9700\u67e5\u627eSDL2/SDL2_ttf/SDL2_image/SDL2_mixer/ncurses/zlib/Threads\uff1b\u6dfb\u52a0lang/src/data/tests\u7b49\u5b50\u76ee\u5f55\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.mermaid,{value:'flowchart TD\nStart(["\u8fdb\u5165\u9876\u5c42CMake"]) --\x3e Detect["\u5e73\u53f0\u68c0\u6d4b<br/>CMAKE_SYSTEM_NAME/CMAKE_HOST_SYSTEM_PROCESSOR"]\nDetect --\x3e DynLink{"DYNAMIC_LINKING?"}\nDynLink --\x3e |\u5426| Static["\u8bbe\u7f6e\u9759\u6001\u94fe\u63a5\u7b56\u7565<br/>\u7981\u7528\u5171\u4eab\u5e93/\u6e05\u7406\u52a8\u6001\u94fe\u63a5\u6807\u5fd7"]\nDynLink --\x3e |\u662f| Shared["\u4fdd\u6301\u52a8\u6001\u94fe\u63a5<br/>\u5fc5\u8981\u65f6\u9759\u6001GCC/STDC++"]\nStatic --\x3e Options["\u89e3\u6790\u6784\u5efa\u9009\u9879<br/>TILES/CURSES/SOUND/LOCALIZE\u7b49"]\nShared --\x3e Options\nOptions --\x3e Libs["\u67e5\u627eSDL2/ncurses/zlib/Threads\u7b49"]\nLibs --\x3e Targets["\u751f\u6210\u53ef\u6267\u884c\u76ee\u6807\u4e0e\u5b89\u88c5\u89c4\u5219"]\nTargets --\x3e End(["\u5b8c\u6210"])'}),"\n",(0,l.jsx)(e.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"CMakeLists.txt"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"CMakeLists.txt"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u7ec4\u4ef6bcmake\u9884\u8bbe\u7cfb\u7edf\u4e0e\u53d8\u91cf\u7ee7\u627f",children:"\u7ec4\u4ef6B\uff1aCMake\u9884\u8bbe\u7cfb\u7edf\u4e0e\u53d8\u91cf\u7ee7\u627f"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9884\u8bbe\u5206\u5c42\uff1awindows/linux\u4e24\u7c7b\uff0c\u6bcf\u7c7b\u5305\u542b\u57fa\u7840\u4e0e\u5e26\u56fe\u5f62/\u58f0\u97f3\u7684\u53d8\u4f53\uff1b\u90e8\u5206\u9884\u8bbe\u901a\u8fc7inherits\u7ee7\u627f\uff0c\u51cf\u5c11\u91cd\u590d\u914d\u7f6e\u3002"}),"\n",(0,l.jsxs)(e.li,{children:["\u5173\u952e\u53d8\u91cf\uff1a\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"generator\uff1aNinja Multi-Config\u6216Visual Studio 17 2022"}),"\n",(0,l.jsx)(e.li,{children:"cacheVariables\uff1aDYNAMIC_LINKING\u3001CURSES/LOCALIZE/TILES/SOUND/TESTS\u7b49"}),"\n",(0,l.jsx)(e.li,{children:"toolset\uff1aClangCL\u7528\u4e8eClangCL\u73af\u5883"}),"\n",(0,l.jsx)(e.li,{children:"environment\uff1aVCPKG_ROOT/VCPKG_APPLOCAL_DEPS\u7b49"}),"\n",(0,l.jsx)(e.li,{children:"CMAKE_PROJECT_INCLUDE_BEFORE\uff1a\u9884\u52a0\u8f7dVCPKG\u6839\u8def\u5f84"}),"\n",(0,l.jsx)(e.li,{children:"CMAKE_TOOLCHAIN_FILE\uff1a\u6307\u5411MSVC.cmake\u6216LLVM.cmake"}),"\n",(0,l.jsx)(e.li,{children:"VCPKG_TARGET_TRIPLET\uff1ax64-windows-static\u7b49"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"\u7528\u6237\u9884\u8bbe\u6a21\u677f\uff1aCMakeUserPresets.json.in\u63d0\u4f9b\u7528\u6237\u7ea7\u6784\u5efa\u9884\u8bbe\u6a21\u677f\uff0c\u4fbf\u4e8e\u672c\u5730\u8986\u76d6\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.mermaid,{value:'graph LR\nBase["\u57fa\u7840\u9884\u8bbe<br/>windows-x64/linux-x64"] --\x3e Tiles["tiles\u53d8\u4f53<br/>windows-tiles-sounds-x64"]\nTiles --\x3e MSVC["MSVC\u53d8\u4f53<br/>windows-x64-msvc"]\nMSVC --\x3e ClangCL["ClangCL\u53d8\u4f53<br/>windows-tiles-sounds-x64-clang-cl"]\nBase --\x3e VCPKG["VCPKG\u53d8\u4f53<br/>linux-tiles-sounds-x64-vcpkg"]\nMSVC --\x3e Preload["\u9884\u52a0\u8f7d\u811a\u672c<br/>windows-tiles-sounds-x64-msvc.cmake"]\nMSVC --\x3e Toolchain["\u5de5\u5177\u94fe<br/>MSVC.cmake"]\nVCPKG --\x3e Toolchain2["\u5de5\u5177\u94fe<br/>LLVM.cmake"]'}),"\n",(0,l.jsx)(e.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"CMakePresets.json"}),"\n",(0,l.jsx)(e.li,{children:"CMakeUserPresets.json.in"}),"\n",(0,l.jsx)(e.li,{children:"windows-tiles-sounds-x64-msvc.cmake"}),"\n",(0,l.jsx)(e.li,{children:"MSVC.cmake"}),"\n",(0,l.jsx)(e.li,{children:"LLVM.cmake"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"CMakePresets.json"}),"\n",(0,l.jsx)(e.li,{children:"CMakeUserPresets.json.in"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u7ec4\u4ef6c\u5de5\u5177\u94fe\u4e0e\u4ea4\u53c9\u7f16\u8bd1\u914d\u7f6e",children:"\u7ec4\u4ef6C\uff1a\u5de5\u5177\u94fe\u4e0e\u4ea4\u53c9\u7f16\u8bd1\u914d\u7f6e"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"MSVC.cmake\uff1a\u6307\u5b9acl.exe/clang-cl.exe\u4f5c\u4e3a\u7f16\u8bd1\u5668\uff0c\u7edf\u4e00\u7f16\u8bd1/\u94fe\u63a5\u9009\u9879\u4e0e\u7f16\u8bd1\u5668\u5b9a\u4e49\uff1b\u8bbe\u7f6e\u591a\u8fdb\u7a0b\u7f16\u8bd1\u3001UTF-8\u5b57\u7b26\u96c6\u3001\u7981\u7528\u90e8\u5206\u5b89\u5168\u68c0\u67e5\uff1b\u6ce8\u5165VCPKG_ROOT\u5e76\u5305\u542bvcpkg.cmake\u3002"}),"\n",(0,l.jsx)(e.li,{children:"LLVM.cmake\uff1a\u5728ClangCL\u57fa\u7840\u4e0a\u590d\u7528MSVC.cmake\u7684\u5927\u90e8\u5206\u6807\u5fd7\uff0c\u9002\u914dLLVM\u5de5\u5177\u94fe\u3002"}),"\n",(0,l.jsx)(e.li,{children:"x64-windows-static.cmake\uff1a\u8bbe\u7f6eVCPKG_TARGET_ARCHITECTURE\u3001CRT\u4e0e\u5e93\u94fe\u63a5\u5747\u4e3a\u9759\u6001\uff0c\u6784\u5efa\u7c7b\u578b\u4e3arelease\u3002"}),"\n",(0,l.jsx)(e.li,{children:"windows-tiles-sounds-x64-msvc.cmake\uff1a\u5728VS\u73af\u5883\u4e2d\u9884\u52a0\u8f7dVCPKG_ROOT\uff0c\u786e\u4fdd\u540e\u7eed\u5de5\u5177\u94fe\u4e0e\u9884\u8bbe\u6b63\u786e\u89e3\u6790\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.mermaid,{value:'classDiagram\nclass MSVC_Toolchain {\n+\u7f16\u8bd1\u5668 : cl.exe/clang-cl.exe\n+\u7f16\u8bd1\u9009\u9879 : \u591a\u8fdb\u7a0b/UTF-8/\u8b66\u544a\u7ea7\u522b\n+\u94fe\u63a5\u9009\u9879 : REF/ICF/LTCG\n+\u8fd0\u884c\u65f6 : MultiThreaded[Debug]\n+VCPKG\u96c6\u6210 : vcpkg.cmake\n}\nclass LLVM_Toolchain {\n+\u7f16\u8bd1\u5668 : clang-cl.exe\n+\u9009\u9879 : \u590d\u7528MSVC.cmake\u6807\u5fd7\n+VCPKG\u96c6\u6210 : vcpkg.cmake\n}\nclass Static_Triplet {\n+\u67b6\u6784 : x64\n+CRT : \u9759\u6001\n+\u5e93 : \u9759\u6001\n+\u6784\u5efa\u7c7b\u578b : release\n}\nclass VS_Preload {\n+\u4f5c\u7528 : \u8bbe\u7f6eVCPKG_ROOT\n}\nMSVC_Toolchain <.. VS_Preload : "\u9884\u52a0\u8f7d\u811a\u672c\u914d\u5408"\nLLVM_Toolchain <.. VS_Preload : "\u9884\u52a0\u8f7d\u811a\u672c\u914d\u5408"\nMSVC_Toolchain <.. Static_Triplet : "\u7ed3\u5408\u4f7f\u7528"'}),"\n",(0,l.jsx)(e.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"MSVC.cmake"}),"\n",(0,l.jsx)(e.li,{children:"LLVM.cmake"}),"\n",(0,l.jsx)(e.li,{children:"x64-windows-static.cmake"}),"\n",(0,l.jsx)(e.li,{children:"windows-tiles-sounds-x64-msvc.cmake"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"MSVC.cmake"}),"\n",(0,l.jsx)(e.li,{children:"LLVM.cmake"}),"\n",(0,l.jsx)(e.li,{children:"x64-windows-static.cmake"}),"\n",(0,l.jsx)(e.li,{children:"windows-tiles-sounds-x64-msvc.cmake"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u7ec4\u4ef6d\u6784\u5efa\u811a\u672c\u7ec4\u7ec7\u4e0e\u81ea\u52a8\u5316\u4efb\u52a1",children:"\u7ec4\u4ef6D\uff1a\u6784\u5efa\u811a\u672c\u7ec4\u7ec7\u4e0e\u81ea\u52a8\u5316\u4efb\u52a1"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"build.sh\uff1a\u7edf\u4e00CI\u4e0e\u672c\u5730\u6784\u5efa\u5165\u53e3\uff0c\u652f\u6301CMAKE/NATIVE\u4e24\u79cd\u6a21\u5f0f\uff1b\u5728CMAKE\u6a21\u5f0f\u4e0b\u751f\u6210compile_commands.json\u5e76\u53ef\u9009clang-tidy\u5206\u6790\uff1b\u5728NATIVE\u6a21\u5f0f\u4e0b\u76f4\u63a5\u8c03\u7528make\u5e76\u8fd0\u884c\u6d4b\u8bd5\uff1b\u652f\u6301Android NDK\u6784\u5efa\u3002"}),"\n",(0,l.jsx)(e.li,{children:"clang-tidy-run.sh\uff1a\u5bfc\u51facompile_commands.json\u540e\uff0c\u6309\u53d8\u66f4\u6587\u4ef6\u96c6\u5408\u4e0esubset\u7b56\u7565\u5e76\u884c\u5206\u6790\u53d7\u5f71\u54cd\u6587\u4ef6\uff1b\u652f\u6301CI\u4e2d\u5168\u91cf\u5206\u6790\u89e6\u53d1\u3002"}),"\n",(0,l.jsx)(e.li,{children:"clang-tidy-build.sh\uff1a\u6784\u5efaclang-tidy\u63d2\u4ef6\u5e76\u9a8c\u8bc1\u6d4b\u8bd5\uff0c\u4fbf\u4e8e\u672c\u5730\u8c03\u8bd5\u81ea\u5b9a\u4e49\u68c0\u67e5\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.mermaid,{value:'sequenceDiagram\nparticipant CI as "CI/\u672c\u5730"\nparticipant Build as "build.sh"\nparticipant CMake as "CMake(\u751f\u6210compile_commands.json)"\nparticipant Tidy as "clang-tidy-run.sh"\nparticipant Plugin as "clang-tidy-build.sh"\nCI->>Build : \u89e6\u53d1\u6784\u5efa\nBuild->>CMake : \u914d\u7f6e\u5e76\u751f\u6210\u6570\u636e\u5e93\nCMake--\x3e>Build : compile_commands.json\nBuild->>Tidy : \u8fd0\u884cclang-tidy\u5206\u6790\nTidy--\x3e>CI : \u5206\u6790\u7ed3\u679c\nCI->>Plugin : \u6784\u5efa\u5e76\u9a8c\u8bc1clang-tidy\u63d2\u4ef6\nPlugin--\x3e>CI : \u63d2\u4ef6\u4ea7\u7269\u4e0e\u6d4b\u8bd5'}),"\n",(0,l.jsx)(e.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"build.sh"}),"\n",(0,l.jsx)(e.li,{children:"clang-tidy-run.sh"}),"\n",(0,l.jsx)(e.li,{children:"clang-tidy-build.sh"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"build.sh"}),"\n",(0,l.jsx)(e.li,{children:"clang-tidy-run.sh"}),"\n",(0,l.jsx)(e.li,{children:"clang-tidy-build.sh"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u7ec4\u4ef6e\u76ee\u6807\u5e73\u53f0\u68c0\u6d4b\u4e0e\u6761\u4ef6\u7f16\u8bd1\u903b\u8f91",children:"\u7ec4\u4ef6E\uff1a\u76ee\u6807\u5e73\u53f0\u68c0\u6d4b\u4e0e\u6761\u4ef6\u7f16\u8bd1\u903b\u8f91"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u5e73\u53f0\u5b8f\uff1a",(0,l.jsx)(e.em,{children:"OS_LINUX"}),"/",(0,l.jsx)(e.em,{children:"OS_BSD"}),"/_OS_DARWIN_\u7528\u4e8e\u6761\u4ef6\u7f16\u8bd1\u4e0e\u7279\u6027\u5f00\u5173\u3002"]}),"\n",(0,l.jsx)(e.li,{children:"MSYS2\u68c0\u6d4b\uff1a\u901a\u8fc7\u73af\u5883\u53d8\u91cf\u6807\u8bb0\uff0c\u5f71\u54cd\u7f16\u8bd1\u5668\u4e0e\u8fd0\u884c\u65f6\u884c\u4e3a\u3002"}),"\n",(0,l.jsx)(e.li,{children:"Windows/Apple\u7279\u4f8b\uff1aWindows\u76ee\u6807\u94fe\u63a5gdi32/winmm/imm32/ole32\u7b49\uff1bApple\u76ee\u6807\u94fe\u63a5CoreFoundation\u6846\u67b6\u3002"}),"\n",(0,l.jsx)(e.li,{children:"TILES/CURSES\u4e92\u65a5\uff1a\u786e\u4fdd\u56fe\u5f62\u7248\u4e0e\u6587\u672c\u7248\u4e8c\u9009\u4e00\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.mermaid,{value:'flowchart TD\nA["CMAKE_SYSTEM_NAME"] --\x3e B{"\u5339\u914d\u5e73\u53f0?"}\nB --\x3e |Linux| L["_OS_LINUX_=1"]\nB --\x3e |BSD| BSD["_OS_BSD_=1"]\nB --\x3e |Darwin| MAC["\u5b9a\u4e49MACOSX/OSX_SDL2_LIBS"]\nA --\x3e MSYS{"MSYSTEM\u73af\u5883?"}\nMSYS --\x3e |\u5b58\u5728| M["\u5b9a\u4e49MSYS2"]\nA --\x3e Win{"WIN32?"}\nWin --\x3e |\u662f| W["\u94fe\u63a5Windows\u7cfb\u7edf\u5e93"]\nA --\x3e Apple{"APPLE?"}\nApple --\x3e |\u662f| F["\u94fe\u63a5CoreFoundation"]'}),"\n",(0,l.jsx)(e.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"src/CMakeLists.txt"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"src/CMakeLists.txt"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u7ec4\u4ef6f\u53ef\u6267\u884c\u76ee\u6807\u4e0e\u5b89\u88c5\u89c4\u5219",children:"\u7ec4\u4ef6F\uff1a\u53ef\u6267\u884c\u76ee\u6807\u4e0e\u5b89\u88c5\u89c4\u5219"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u56fe\u5f62\u7248(cataclysm-tiles)\u4e0e\u6587\u672c\u7248(cataclysm)\uff1a\u5747\u4ee5\u516c\u5171\u5bf9\u8c61\u5e93\u805a\u5408\u6e90\u7801\uff0c\u518d\u94fe\u63a5\u7b2c\u4e09\u65b9\u5e93\u4e0e\u7cfb\u7edf\u5e93\uff1b\u56fe\u5f62\u7248\u989d\u5916\u94fe\u63a5SDL2\u7cfb\u5217\u4e0e\u53ef\u9009SDL2_mixer\u3002"}),"\n",(0,l.jsx)(e.li,{children:"Windows\u6e05\u5355\u4e0e\u8d44\u6e90\uff1a\u5728Win32\u4e0b\u8bbe\u7f6e\u8d44\u6e90\u6587\u4ef6\u4f9d\u8d56\u4e0e\u94fe\u63a5\u5668\u53c2\u6570\uff1bMSYS2 RelWithDebInfo\u4e0b\u8fdb\u884c\u8c03\u8bd5\u7b26\u53f7\u5206\u79bb\u4e0e\u5265\u79bb\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u5b89\u88c5\u89c4\u5219\uff1aRelease\u6a21\u5f0f\u5b89\u88c5\u53ef\u6267\u884c\u6587\u4ef6\u4e0e\u6570\u636e\u76ee\u5f55\uff1b\u6309SOUND\u5f00\u5173\u51b3\u5b9a\u662f\u5426\u5b89\u88c5sound\u76ee\u5f55\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.mermaid,{value:'graph TB\nCommon["cataclysm-common(\u6587\u672c\u7248)"] --\x3e ExeText["cataclysm(\u6587\u672c\u7248\u53ef\u6267\u884c)"]\nTilesCommon["cataclysm-tiles-common(\u56fe\u5f62\u7248)"] --\x3e ExeTiles["cataclysm-tiles(\u56fe\u5f62\u7248\u53ef\u6267\u884c)"]\nTilesCommon --\x3e SDL["SDL2/SDL_image/SDL_ttf"]\nTilesCommon --\x3e Mix["SDL2_mixer(\u53ef\u9009)"]\nExeText --\x3e SysWin["Windows\u7cfb\u7edf\u5e93(\u53ef\u9009)"]\nExeTiles --\x3e SysWin\nExeText --\x3e SysMac["Apple\u6846\u67b6(\u53ef\u9009)"]\nExeTiles --\x3e SysMac\nRootInstall["\u5b89\u88c5\u89c4\u5219(Release)"] --\x3e ExeText\nRootInstall --\x3e ExeTiles\nRootInstall --\x3e DataInstall["\u6570\u636e\u76ee\u5f55/\u6587\u4ef6"]'}),"\n",(0,l.jsx)(e.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"src/CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"src/CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"data/CMakeLists.txt"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"src/CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"data/CMakeLists.txt"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790",children:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9876\u5c42CMake\u5bf9src/data/tests/\u5de5\u5177\u6a21\u5757\u6709\u76f4\u63a5\u4f9d\u8d56\uff1bsrc\u4f9d\u8d56third-party\u4e0e\u5e73\u53f0\u5e93\uff1bdata\u4f9d\u8d56\u9876\u5c42\u9009\u9879\u63a7\u5236\u5b89\u88c5\u8303\u56f4\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u9884\u8bbe\u901a\u8fc7CMAKE_PROJECT_INCLUDE_BEFORE\u4e0eCMAKE_TOOLCHAIN_FILE\u95f4\u63a5\u8026\u5408\u5de5\u5177\u94fe\u4e0eVCPKG\u3002"}),"\n",(0,l.jsx)(e.li,{children:"clang-tidy\u76f8\u5173\u811a\u672c\u4f9d\u8d56compile_commands.json\u4e0eVCPKG\u63d0\u4f9b\u7684clang-tidy\u63d2\u4ef6\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.mermaid,{value:'graph LR\nRoot["CMakeLists.txt"] --\x3e Src["src/CMakeLists.txt"]\nRoot --\x3e Data["data/CMakeLists.txt"]\nRoot --\x3e Presets["CMakePresets.json"]\nPresets --\x3e MSVC["MSVC.cmake"]\nPresets --\x3e LLVM["LLVM.cmake"]\nPresets --\x3e Triplet["x64-windows-static.cmake"]\nPresets --\x3e Preload["windows-tiles-sounds-x64-msvc.cmake"]\nRoot --\x3e TidyRun["clang-tidy-run.sh"]\nRoot --\x3e TidyBuild["clang-tidy-build.sh"]\nRoot --\x3e BuildSh["build.sh"]'}),"\n",(0,l.jsx)(e.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"src/CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"data/CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"CMakePresets.json"}),"\n",(0,l.jsx)(e.li,{children:"MSVC.cmake"}),"\n",(0,l.jsx)(e.li,{children:"LLVM.cmake"}),"\n",(0,l.jsx)(e.li,{children:"x64-windows-static.cmake"}),"\n",(0,l.jsx)(e.li,{children:"windows-tiles-sounds-x64-msvc.cmake"}),"\n",(0,l.jsx)(e.li,{children:"clang-tidy-run.sh"}),"\n",(0,l.jsx)(e.li,{children:"clang-tidy-build.sh"}),"\n",(0,l.jsx)(e.li,{children:"build.sh"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"CMakePresets.json"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u6027\u80fd\u8003\u91cf",children:"\u6027\u80fd\u8003\u91cf"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7f16\u8bd1\u52a0\u901f\uff1a\u542f\u7528ccache\u5e76\u901a\u8fc7CMAKE_C/CXX_LINKER_LAUNCHER\u6ce8\u5165\uff1bRelWithDebInfo\u4f18\u5316\u4e0e\u8c03\u8bd5\u4fe1\u606f\u5e73\u8861\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u5e76\u884c\u6784\u5efa\uff1aNinja Multi-Config\u4e0e\u591a\u6838\u7f16\u8bd1\uff1bclang-tidy\u5206\u6790\u91c7\u7528\u968f\u673a\u6253\u6563\u4e0e\u5e76\u884c\u6267\u884c\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u94fe\u63a5\u4f18\u5316\uff1aWindows\u4e0b\u4f7f\u7528/OPT:REF/ICF\u51cf\u5c11\u5197\u4f59\uff1bRelWithDebInfo\u542f\u7528\u51fd\u6570\u5185\u8054\u63d0\u793a\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u4f53\u79ef\u4e0e\u53d1\u5e03\uff1aRelease\u6a21\u5f0f\u5b89\u88c5\u6570\u636e\u76ee\u5f55\uff0c\u56fe\u5f62\u7248\u6309\u9700\u5b89\u88c5gfx\uff1b\u9759\u6001\u94fe\u63a5\u51cf\u5c11\u8fd0\u884c\u65f6\u4f9d\u8d56\u4f46\u589e\u5927\u4f53\u79ef\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"build.sh"}),"\n",(0,l.jsx)(e.li,{children:"MSVC.cmake"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u6545\u969c\u6392\u67e5\u6307\u5357",children:"\u6545\u969c\u6392\u67e5\u6307\u5357"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u672a\u627e\u5230Git\u5bfc\u81f4\u7248\u672c\u53f7\u4e3a\u7a7a\uff1a\u9876\u5c42CMake\u4f1a\u8f93\u51fa\u8b66\u544a\u5e76\u56de\u9000\u81f3\u7a7a\u7248\u672c\uff1b\u53ef\u901a\u8fc7-DGIT_BINARY\u6307\u5b9agit\u8def\u5f84\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u7f3a\u5c11SDL2/SDL2_ttf/SDL2_image/SDL2_mixer\u6216ncurses\uff1a\u9876\u5c42CMake\u4f1a\u5728\u5bf9\u5e94\u9009\u9879\u5f00\u542f\u65f6\u8981\u6c42\u76f8\u5e94\u5e93\uff1b\u8bf7\u5b89\u88c5\u5f00\u53d1\u5305\u6216\u5207\u6362\u5230\u53e6\u4e00\u6a21\u5f0f\u3002"}),"\n",(0,l.jsx)(e.li,{children:"MSVC/ClangCL\u5de5\u5177\u94fe\u95ee\u9898\uff1a\u786e\u8ba4VCPKG_ROOT\u4e0eCMAKE_TOOLCHAIN_FILE\uff1bClangCL\u9700\u8bbe\u7f6etoolset\u4e0e\u73af\u5883\u53d8\u91cf\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u9759\u6001\u94fe\u63a5\u5931\u8d25\uff1a\u68c0\u67e5CMAKE_EXE_LINKER_FLAGS\u4e0eBUILD_SHARED_LIBRARIES\uff1bWindows\u4e0b\u53ef\u80fd\u9700\u8981\u7279\u5b9aCRT\u94fe\u63a5\u7b56\u7565\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u6d4b\u8bd5\u4e0eclang-tidy\uff1a\u786e\u4fdd\u751f\u6210compile_commands.json\uff1bCI\u4e2d\u82e5\u65e0\u63d2\u4ef6\u5219\u811a\u672c\u4f1a\u63d0\u524d\u9000\u51fa\uff0c\u9700\u624b\u52a8\u6307\u5b9a\u68c0\u67e5\u8303\u56f4\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"CMakeLists.txt"}),"\n",(0,l.jsx)(e.li,{children:"MSVC.cmake"}),"\n",(0,l.jsx)(e.li,{children:"clang-tidy-run.sh"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u7ed3\u8bba",children:"\u7ed3\u8bba"}),"\n",(0,l.jsx)(e.p,{children:"\u8be5\u6784\u5efa\u7cfb\u7edf\u901a\u8fc7CMake\u9876\u5c42\u914d\u7f6e\u3001\u5b50\u76ee\u5f55\u76ee\u6807\u4e0e\u6570\u636e\u5b89\u88c5\u3001CMakePresets.json\u9884\u8bbe\u3001\u5de5\u5177\u94fe\u4e0eVCPKG\u96c6\u6210\uff0c\u4ee5\u53ca\u5b8c\u5584\u7684CI/\u672c\u5730\u6784\u5efa\u811a\u672c\uff0c\u5b9e\u73b0\u4e86\u8de8\u5e73\u53f0\u3001\u53ef\u6269\u5c55\u4e14\u53ef\u7ef4\u62a4\u7684\u6784\u5efa\u6d41\u7a0b\u3002\u5efa\u8bae\u5728\u65b0\u589e\u5e73\u53f0\u6216\u7b2c\u4e09\u65b9\u5e93\u65f6\u9075\u5faa\u73b0\u6709\u9884\u8bbe\u4e0e\u5de5\u5177\u94fe\u6a21\u5f0f\uff0c\u4fdd\u6301\u53d8\u91cf\u7ee7\u627f\u4e0e\u73af\u5883\u6ce8\u5165\u7684\u4e00\u81f4\u6027\uff0c\u4ee5\u964d\u4f4e\u7ef4\u62a4\u6210\u672c\u5e76\u63d0\u5347\u53ef\u79fb\u690d\u6027\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"\u9644\u5f55",children:"\u9644\u5f55"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u6269\u5c55\u65b9\u6cd5\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u81ea\u5b9a\u4e49\u6a21\u5757\uff1a\u5728CMakeModules\u76ee\u5f55\u4e0b\u65b0\u589eFind*.cmake\u6216\u6a21\u5757\u811a\u672c\uff0c\u7eb3\u5165CMAKE_MODULE_PATH"}),"\n",(0,l.jsx)(e.li,{children:"\u7b2c\u4e09\u65b9\u5e93\u96c6\u6210\uff1a\u4f18\u5148\u901a\u8fc7VCPKG triplet\u7ba1\u7406\uff1b\u82e5\u9700\u672c\u5730\u5e93\uff0c\u53c2\u8003MSVC.cmake\u4e2d\u7684\u5305\u542b\u4e0e\u94fe\u63a5\u65b9\u5f0f"}),"\n",(0,l.jsx)(e.li,{children:"\u6784\u5efa\u4f18\u5316\uff1a\u6839\u636e\u5e73\u53f0\u8c03\u6574\u7f16\u8bd1/\u94fe\u63a5\u9009\u9879\uff1b\u5229\u7528ccache\u4e0e\u5e76\u884c\u6784\u5efa\uff1b\u5408\u7406\u9009\u62e9DYNAMIC_LINKING"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u5e38\u89c1\u95ee\u9898\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9884\u8bbe\u672a\u751f\u6548\uff1a\u68c0\u67e5generator\u4e0e\u7f13\u5b58\u53d8\u91cf\uff1b\u786e\u8ba4CMAKE_PROJECT_INCLUDE_BEFORE\u4e0eCMAKE_TOOLCHAIN_FILE\u8def\u5f84"}),"\n",(0,l.jsx)(e.li,{children:"VCPKG\u627e\u4e0d\u5230\uff1a\u786e\u4fddVCPKG_ROOT\u6216VCPKG_MANIFEST_DIR\u6b63\u786e\uff1btriplet\u4e0e\u76ee\u6807\u67b6\u6784\u4e00\u81f4"}),"\n",(0,l.jsx)(e.li,{children:"\u6d4b\u8bd5\u5931\u8d25\uff1a\u67e5\u770bclang-tidy-run.sh\u7684subset\u4e0efiles_changed\u903b\u8f91\uff1b\u5fc5\u8981\u65f6\u5168\u91cf\u5206\u6790"}),"\n"]}),"\n"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(x,{...n})}):x(n)}},28453(n,e,i){i.d(e,{R:()=>t,x:()=>d});var s=i(96540);const l={},c=s.createContext(l);function t(n){const e=s.useContext(c);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:t(n.components),s.createElement(c.Provider,{value:e},n.children)}}}]);