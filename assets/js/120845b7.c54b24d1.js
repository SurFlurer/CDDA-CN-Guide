"use strict";(globalThis.webpackChunkCDDA_CN_Guide=globalThis.webpackChunkCDDA_CN_Guide||[]).push([[9378],{28453(e,n,r){r.d(n,{R:()=>s,x:()=>t});var i=r(96540);const l={},c=i.createContext(l);function s(e){const n=i.useContext(c);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),i.createElement(c.Provider,{value:n},e.children)}},31651(e,n,r){r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>x,frontMatter:()=>s,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"content/\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1/\u6a21\u5757\u5316\u8bbe\u8ba1\u4e0e\u8bbe\u8ba1\u6a21\u5f0f","title":"\u6a21\u5757\u5316\u8bbe\u8ba1\u4e0e\u8bbe\u8ba1\u6a21\u5f0f","description":"\u672c\u6587\u5f15\u7528\u7684\u6587\u4ef6","source":"@site/docs/content/\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1/\u6a21\u5757\u5316\u8bbe\u8ba1\u4e0e\u8bbe\u8ba1\u6a21\u5f0f.md","sourceDirName":"content/\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1","slug":"/content/\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1/\u6a21\u5757\u5316\u8bbe\u8ba1\u4e0e\u8bbe\u8ba1\u6a21\u5f0f","permalink":"/CDDA-CN-Guide/docs/content/\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1/\u6a21\u5757\u5316\u8bbe\u8ba1\u4e0e\u8bbe\u8ba1\u6a21\u5f0f","draft":false,"unlisted":false,"editUrl":"https://github.com/SurFlurer/CDDA-CN-Guide/edit/master/CataclysmDDA\u7efc\u5408\u653b\u7565\u624b\u518c/docs/content/\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1/\u6a21\u5757\u5316\u8bbe\u8ba1\u4e0e\u8bbe\u8ba1\u6a21\u5f0f.md","tags":[],"version":"current","frontMatter":{"title":"\u6a21\u5757\u5316\u8bbe\u8ba1\u4e0e\u8bbe\u8ba1\u6a21\u5f0f"},"sidebar":"tutorialSidebar","previous":{"title":"\u6838\u5fc3\u7ec4\u4ef6\u4ea4\u4e92\u4e0e\u6570\u636e\u6d41","permalink":"/CDDA-CN-Guide/docs/content/\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1/\u6838\u5fc3\u7ec4\u4ef6\u4ea4\u4e92\u4e0e\u6570\u636e\u6d41"},"next":{"title":"\u6e38\u620f\u4e3b\u5faa\u73af\u4e0e\u751f\u547d\u5468\u671f","permalink":"/CDDA-CN-Guide/docs/content/\u6838\u5fc3\u67b6\u6784\u8bbe\u8ba1/\u6e38\u620f\u4e3b\u5faa\u73af\u4e0e\u751f\u547d\u5468\u671f"}}');var l=r(74848),c=r(28453);const s={title:"\u6a21\u5757\u5316\u8bbe\u8ba1\u4e0e\u8bbe\u8ba1\u6a21\u5f0f"},t=void 0,a={},h=[{value:"\u76ee\u5f55",id:"\u76ee\u5f55",level:2},{value:"\u5f15\u8a00",id:"\u5f15\u8a00",level:2},{value:"\u9879\u76ee\u7ed3\u6784",id:"\u9879\u76ee\u7ed3\u6784",level:2},{value:"\u6838\u5fc3\u7ec4\u4ef6",id:"\u6838\u5fc3\u7ec4\u4ef6",level:2},{value:"\u67b6\u6784\u603b\u89c8",id:"\u67b6\u6784\u603b\u89c8",level:2},{value:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790",id:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790",level:2},{value:"\u5de5\u5382\u6a21\u5f0f\uff1ageneric_factory \u4e0e JSON \u9a71\u52a8\u7684\u6570\u636e\u52a0\u8f7d",id:"\u5de5\u5382\u6a21\u5f0fgeneric_factory-\u4e0e-json-\u9a71\u52a8\u7684\u6570\u636e\u52a0\u8f7d",level:3},{value:"\u89c2\u5bdf\u8005\u6a21\u5f0f\uff1a\u4e8b\u4ef6\u603b\u7ebf\u4e0e\u8ba2\u9605\u8005",id:"\u89c2\u5bdf\u8005\u6a21\u5f0f\u4e8b\u4ef6\u603b\u7ebf\u4e0e\u8ba2\u9605\u8005",level:3},{value:"\u7b56\u7565\u6a21\u5f0f\uff1a\u884c\u4e3a\u6811\u7b56\u7565\u4e0e\u6267\u884c\u6d41\u7a0b",id:"\u7b56\u7565\u6a21\u5f0f\u884c\u4e3a\u6811\u7b56\u7565\u4e0e\u6267\u884c\u6d41\u7a0b",level:3},{value:"\u5355\u4f8b\u6a21\u5f0f\u4e0e\u5168\u5c40\u521d\u59cb\u5316",id:"\u5355\u4f8b\u6a21\u5f0f\u4e0e\u5168\u5c40\u521d\u59cb\u5316",level:3},{value:"\u5730\u56fe\u7cfb\u7edf\uff1a\u6a21\u5757\u8fb9\u754c\u4e0e\u4ea4\u4e92\u534f\u8bae",id:"\u5730\u56fe\u7cfb\u7edf\u6a21\u5757\u8fb9\u754c\u4e0e\u4ea4\u4e92\u534f\u8bae",level:3},{value:"\u89d2\u8272\u7cfb\u7edf\uff1a\u63a5\u53e3\u62bd\u8c61\u4e0e\u591a\u6001",id:"\u89d2\u8272\u7cfb\u7edf\u63a5\u53e3\u62bd\u8c61\u4e0e\u591a\u6001",level:3},{value:"\u7269\u54c1\u7cfb\u7edf\uff1a\u6a21\u677f\u4e0e\u6389\u843d\u7ec4",id:"\u7269\u54c1\u7cfb\u7edf\u6a21\u677f\u4e0e\u6389\u843d\u7ec4",level:3},{value:"\u4f9d\u8d56\u5206\u6790",id:"\u4f9d\u8d56\u5206\u6790",level:2},{value:"\u6027\u80fd\u8003\u91cf",id:"\u6027\u80fd\u8003\u91cf",level:2},{value:"\u6545\u969c\u6392\u67e5\u6307\u5357",id:"\u6545\u969c\u6392\u67e5\u6307\u5357",level:2},{value:"\u7ed3\u8bba",id:"\u7ed3\u8bba",level:2},{value:"\u9644\u5f55",id:"\u9644\u5f55",level:2}];function d(e){const n={a:"a",cite:"cite",code:"code",h2:"h2",h3:"h3",itype:"itype",li:"li",mermaid:"mermaid",ol:"ol",p:"p",ul:"ul",...(0,c.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.cite,{children:"\n**\u672c\u6587\u5f15\u7528\u7684\u6587\u4ef6**\n- generic_factory.h\n- ordered_static_globals.cpp\n- event_subscriber.h\n- event_bus.cpp\n- behavior_strategy.h\n- behavior_strategy.cpp\n- behavior.h\n- behavior.cpp\n- stats_tracker.h\n- map.h\n- item_factory.h\n- itype.h\n- monster.h\n- character.h\n- talker_character.h\n- talker_character.cpp\n- talker_monster.cpp\n- creature_tracker.h\n- character.cpp\n"}),"\n",(0,l.jsx)(n.h2,{id:"\u76ee\u5f55",children:"\u76ee\u5f55"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E5%BC%95%E8%A8%80",children:"\u5f15\u8a00"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84",children:"\u9879\u76ee\u7ed3\u6784"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6",children:"\u6838\u5fc3\u7ec4\u4ef6"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E6%9E%B6%E6%9E%84%E6%80%BB%E8%A7%88",children:"\u67b6\u6784\u603b\u89c8"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E8%AF%A6%E7%BB%86%E7%BB%84%E4%BB%B6%E5%88%86%E6%9E%90",children:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E4%BE%9D%E8%B5%96%E5%88%86%E6%9E%90",children:"\u4f9d\u8d56\u5206\u6790"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E6%80%A7%E8%83%BD%E8%80%83%E9%87%8F",children:"\u6027\u80fd\u8003\u91cf"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E6%8C%87%E5%8D%97",children:"\u6545\u969c\u6392\u67e5\u6307\u5357"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E7%BB%93%E8%AE%BA",children:"\u7ed3\u8bba"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E9%99%84%E5%BD%95",children:"\u9644\u5f55"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u5f15\u8a00",children:"\u5f15\u8a00"}),"\n",(0,l.jsx)(n.p,{children:"\u672c\u6587\u4ef6\u9762\u5411Cataclysm-DDA\uff08CDDA\uff09\u9879\u76ee\u7684\u6a21\u5757\u5316\u8bbe\u8ba1\u4e0e\u8bbe\u8ba1\u6a21\u5f0f\u5e94\u7528\uff0c\u7cfb\u7edf\u68b3\u7406\u5176\u5728\u8fd0\u884c\u65f6\u6570\u636e\u52a0\u8f7d\u3001\u4e8b\u4ef6\u901a\u4fe1\u3001\u884c\u4e3a\u6811\u51b3\u7b56\u3001\u4ee5\u53ca\u6838\u5fc3\u5b9e\u4f53\uff08\u5730\u56fe\u3001\u89d2\u8272\u3001\u7269\u54c1\u3001\u602a\u7269\uff09\u4e4b\u95f4\u7684\u8fb9\u754c\u4e0e\u4ea4\u4e92\u534f\u8bae\u3002\u91cd\u70b9\u8986\u76d6\u4ee5\u4e0b\u8bbe\u8ba1\u6a21\u5f0f\u4e0e\u673a\u5236\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5de5\u5382\u6a21\u5f0f\uff1a\u901a\u7528\u6cdb\u578b\u5de5\u5382generic_factory\u53ca\u5176\u4e0e\u5b57\u7b26\u4e32ID\u4f53\u7cfb\u7684\u534f\u4f5c\uff0c\u652f\u6491JSON\u9a71\u52a8\u7684\u7c7b\u578b\u6ce8\u518c\u4e0e\u7ee7\u627f\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u89c2\u5bdf\u8005\u6a21\u5f0f\uff1a\u4e8b\u4ef6\u603b\u7ebfevent_bus\u4e0e\u4e8b\u4ef6\u8ba2\u9605\u8005event_subscriber\u7684\u53d1\u5e03/\u8ba2\u9605\u6a21\u578b\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u7b56\u7565\u6a21\u5f0f\uff1a\u884c\u4e3a\u6811\u8282\u70b9\u7684\u6267\u884c\u7b56\u7565\uff08\u987a\u5e8f\u3001\u56de\u9000\u3001\u76f4\u5230\u5b8c\u6210\uff09\uff0c\u901a\u8fc7\u7b56\u7565\u6620\u5c04\u8fdb\u884c\u914d\u7f6e\u5316\u9009\u62e9\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u5355\u4f8b\u6a21\u5f0f\uff1a\u901a\u8fc7\u9759\u6001\u5168\u5c40\u521d\u59cb\u5316\u4e0e\u7248\u672c\u53f7\u673a\u5236\uff0c\u786e\u4fdd\u5de5\u5382\u4e0e\u5168\u5c40\u5bf9\u8c61\u7684\u6709\u5e8f\u6784\u9020\u4e0e\u5931\u6548\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u62bd\u8c61\u63a5\u53e3\u4e0e\u591a\u6001\uff1atalker\u7cfb\u5217\u63a5\u53e3\u7edf\u4e00\u4e0d\u540c\u5b9e\u4f53\u7684\u5bf9\u8bdd/\u4fe1\u606f\u8bbf\u95ee\uff1bCreature\u6d3e\u751f\u4f53\u7cfb\u5b9e\u73b0\u89d2\u8272\u4e0e\u602a\u7269\u7684\u5171\u540c\u80fd\u529b\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u9879\u76ee\u7ed3\u6784",children:"\u9879\u76ee\u7ed3\u6784"}),"\n",(0,l.jsx)(n.p,{children:"CDDA\u91c7\u7528\u201c\u6309\u529f\u80fd\u57df\u5206\u5c42\u201d\u7684\u7ec4\u7ec7\u65b9\u5f0f\uff0c\u6838\u5fc3\u6a21\u5757\u4f4d\u4e8esrc\u76ee\u5f55\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6570\u636e\u5de5\u5382\u4e0eID\u7cfb\u7edf\uff1ageneric_factory\u3001string_id/int_id\u3001DynamicDataLoader\u6ce8\u518c\u6d41\u7a0b"}),"\n",(0,l.jsx)(n.li,{children:"\u4e8b\u4ef6\u7cfb\u7edf\uff1aevent_subscriber\u3001event_bus\u3001stats_tracker"}),"\n",(0,l.jsx)(n.li,{children:"\u884c\u4e3a\u6811\uff1abehavior_strategy\u3001behavior"}),"\n",(0,l.jsx)(n.li,{children:"\u5730\u56fe\u4e0e\u5b50\u5730\u56fe\uff1amap\u3001submap\u3001item_stack\u3001field\u7b49"}),"\n",(0,l.jsx)(n.li,{children:"\u5b9e\u4f53\u4e0e\u4ea4\u4e92\uff1acharacter\u3001monster\u3001talker_*\u3001creature_tracker"}),"\n",(0,l.jsx)(n.li,{children:"\u7269\u54c1\u7cfb\u7edf\uff1aitem_factory\u3001itype\u3001item_group"}),"\n"]}),"\n",(0,l.jsx)(n.mermaid,{value:'graph TB\nsubgraph "\u6570\u636e\u5de5\u5382\u4e0eID"\nGF["generic_factory<T>"]\nSTRID["string_id/int_id"]\nend\nsubgraph "\u4e8b\u4ef6\u7cfb\u7edf"\nSUB["event_subscriber"]\nBUS["event_bus"]\nST["stats_tracker"]\nend\nsubgraph "\u884c\u4e3a\u6811"\nSTRAT["strategy_t \u53ca\u5176\u5b9e\u73b0"]\nBEH["behavior \u6811/\u8282\u70b9"]\nend\nsubgraph "\u5730\u56fe\u4e0e\u5b9e\u4f53"\nMAP["map/submap"]\nCHR["character"]\nMON["monster"]\nTKCHR["talker_character"]\nTKMON["talker_monster"]\nCT["creature_tracker"]\nend\nsubgraph "\u7269\u54c1\u7cfb\u7edf"\nIF["Item_factory"]\nIT["itype/item_group"]\nend\nGF --\x3e STRID\nBUS --\x3e SUB\nST --\x3e SUB\nBEH --\x3e STRAT\nMAP --\x3e CHR\nMAP --\x3e MON\nCHR --\x3e TKCHR\nMON --\x3e TKMON\nCT --\x3e MON\nIF --\x3e IT\nMAP --\x3e IF\nMAP --\x3e IT'}),"\n",(0,l.jsx)(n.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"generic_factory.h"}),"\n",(0,l.jsx)(n.li,{children:"event_subscriber.h"}),"\n",(0,l.jsx)(n.li,{children:"event_bus.cpp"}),"\n",(0,l.jsx)(n.li,{children:"behavior_strategy.h"}),"\n",(0,l.jsx)(n.li,{children:"behavior.h"}),"\n",(0,l.jsx)(n.li,{children:"map.h"}),"\n",(0,l.jsx)(n.li,{children:"item_factory.h"}),"\n",(0,l.jsx)(n.li,{children:"itype.h"}),"\n",(0,l.jsx)(n.li,{children:"character.h"}),"\n",(0,l.jsx)(n.li,{children:"monster.h"}),"\n",(0,l.jsx)(n.li,{children:"talker_character.h"}),"\n",(0,l.jsx)(n.li,{children:"talker_monster.cpp"}),"\n",(0,l.jsx)(n.li,{children:"creature_tracker.h"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"generic_factory.h"}),"\n",(0,l.jsx)(n.li,{children:"map.h"}),"\n",(0,l.jsx)(n.li,{children:"item_factory.h"}),"\n",(0,l.jsx)(n.li,{children:"itype.h"}),"\n",(0,l.jsx)(n.li,{children:"behavior.h"}),"\n",(0,l.jsx)(n.li,{children:"behavior_strategy.h"}),"\n",(0,l.jsx)(n.li,{children:"event_subscriber.h"}),"\n",(0,l.jsx)(n.li,{children:"event_bus.cpp"}),"\n",(0,l.jsx)(n.li,{children:"stats_tracker.h"}),"\n",(0,l.jsx)(n.li,{children:"character.h"}),"\n",(0,l.jsx)(n.li,{children:"monster.h"}),"\n",(0,l.jsx)(n.li,{children:"talker_character.h"}),"\n",(0,l.jsx)(n.li,{children:"talker_character.cpp"}),"\n",(0,l.jsx)(n.li,{children:"talker_monster.cpp"}),"\n",(0,l.jsx)(n.li,{children:"creature_tracker.h"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u6838\u5fc3\u7ec4\u4ef6",children:"\u6838\u5fc3\u7ec4\u4ef6"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u901a\u7528\u5de5\u5382",(0,l.jsx)(n.code,{children:"generic_factory<T>"}),"\uff1a\u8d1f\u8d23\u4eceJSON\u52a0\u8f7d\u3001\u7ee7\u627f\u590d\u5236\u3001\u62bd\u8c61\u5b9a\u4e49\u3001\u5ef6\u8fdf\u52a0\u8f7d\u3001\u7248\u672c\u63a7\u5236\u4e0e\u7f13\u5b58\u5931\u6548\uff0c\u63d0\u4f9bstring_id/int_id\u5230\u5bf9\u8c61\u5b9e\u4f8b\u7684\u67e5\u8be2\u63a5\u53e3\u3002"]}),"\n",(0,l.jsx)(n.li,{children:"\u4e8b\u4ef6\u7cfb\u7edf\uff1aevent_subscriber\u5b9a\u4e49\u8ba2\u9605\u63a5\u53e3\uff0cevent_bus\u7ba1\u7406\u8ba2\u9605\u8005\u96c6\u5408\u5e76\u5e7f\u64ad\u4e8b\u4ef6\uff1bstats_tracker\u7ee7\u627fevent_subscriber\u4ee5\u7edf\u8ba1\u4e8b\u4ef6\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u884c\u4e3a\u6811\uff1astrategy_t\u5b9a\u4e49\u7b56\u7565\u63a5\u53e3\uff0csequential_t/fallback_t/sequential_until_done_t\u63d0\u4f9b\u4e0d\u540c\u904d\u5386\u7b56\u7565\uff1bbehavior\u6811\u5c01\u88c5\u8282\u70b9\u3001\u6761\u4ef6\u3001\u76ee\u6807\u4e0etick\u6d41\u7a0b\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u5730\u56fe\u7cfb\u7edf\uff1amap\u627f\u8f7d\u5730\u5f62\u3001\u5bb6\u5177\u3001\u7269\u54c1\u6808\u3001\u8def\u5f84\u3001\u89c6\u91ce\u3001\u573a\u7b49\uff1b\u4e0esubmap\u3001item_stack\u3001field\u7b49\u534f\u4f5c\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u89d2\u8272\u4e0e\u602a\u7269\uff1acharacter\u4e0emonster\u5747\u7ee7\u627fCreature\uff0c\u4f7f\u7528talker_*\u9002\u914d\u5668\u7edf\u4e00\u5bf9\u8bdd/\u4f4d\u7f6e/\u72b6\u6001\u8bbf\u95ee\uff1bcreature_tracker\u7ef4\u62a4\u4e34\u65f6ID\u4e0e\u4f4d\u7f6e\u66f4\u65b0\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u7269\u54c1\u7cfb\u7edf\uff1aItem_factory\u96c6\u4e2d\u7ba1\u7406itype\u4e0eitem_group\uff0c\u914d\u5408generic_factory\u5b9e\u73b0\u7269\u54c1\u6a21\u677f\u4e0e\u968f\u673a\u6389\u843d\u7ec4\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"generic_factory.h"}),"\n",(0,l.jsx)(n.li,{children:"event_subscriber.h"}),"\n",(0,l.jsx)(n.li,{children:"event_bus.cpp"}),"\n",(0,l.jsx)(n.li,{children:"stats_tracker.h"}),"\n",(0,l.jsx)(n.li,{children:"behavior_strategy.h"}),"\n",(0,l.jsx)(n.li,{children:"behavior.h"}),"\n",(0,l.jsx)(n.li,{children:"map.h"}),"\n",(0,l.jsx)(n.li,{children:"character.h"}),"\n",(0,l.jsx)(n.li,{children:"monster.h"}),"\n",(0,l.jsx)(n.li,{children:"item_factory.h"}),"\n",(0,l.jsx)(n.li,{children:"itype.h"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u67b6\u6784\u603b\u89c8",children:"\u67b6\u6784\u603b\u89c8"}),"\n",(0,l.jsx)(n.p,{children:"CDDA\u901a\u8fc7\u201c\u5de5\u5382+ID+\u4e8b\u4ef6+\u884c\u4e3a\u6811+\u5b9e\u4f53\u201d\u4e94\u6761\u4e3b\u7ebf\u5b9e\u73b0\u6a21\u5757\u5316\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6570\u636e\u5de5\u5382\u4e0eID\uff1a\u6240\u6709\u53ef\u914d\u7f6e\u7c7b\u578b\uff08\u5982\u7269\u54c1\u3001\u602a\u7269\u3001\u5730\u56fe\u751f\u6210\u53c2\u6570\u7b49\uff09\u7ecf\u7531generic_factory\u6ce8\u518c\uff0c\u4f7f\u7528string_id\u4f5c\u4e3a\u7a33\u5b9a\u6807\u8bc6\uff0c\u652f\u6301\u7ee7\u627f\u4e0e\u5ef6\u8fdf\u52a0\u8f7d\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u4e8b\u4ef6\u7cfb\u7edf\uff1a\u5168\u5c40\u4e8b\u4ef6\u603b\u7ebf\u5bf9\u6e38\u620f\u5185\u5404\u7c7b\u4e8b\u4ef6\u8fdb\u884c\u5e7f\u64ad\uff0c\u8ba2\u9605\u8005\uff08\u542b\u7edf\u8ba1\u8ffd\u8e2a\u5668\uff09\u6309\u9700\u54cd\u5e94\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u884c\u4e3a\u6811\uff1a\u884c\u4e3a\u6811\u8282\u70b9\u901a\u8fc7\u7b56\u7565\u7ec4\u5408\u5b9e\u73b0\u4f18\u5148\u7ea7\u4e0e\u77ed\u8def\u903b\u8f91\uff0c\u4fbf\u4e8e\u914d\u7f6e\u5316\u884c\u4e3a\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u5730\u56fe\u4e0e\u5b9e\u4f53\uff1a\u5730\u56fe\u4f5c\u4e3a\u5bb9\u5668\u805a\u5408\u5b9e\u4f53\u4e0e\u7269\u54c1\uff1b\u89d2\u8272\u4e0e\u602a\u7269\u5171\u4eabCreature\u57fa\u7c7b\u80fd\u529b\u5e76\u901a\u8fc7talker\u9002\u914d\u5668\u66b4\u9732\u7edf\u4e00\u63a5\u53e3\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u7269\u54c1\u7cfb\u7edf\uff1aItem_factory\u96c6\u4e2d\u7ba1\u7406\u7269\u54c1\u6a21\u677f\u4e0e\u6389\u843d\u7ec4\uff0c\u4e0e\u5730\u56fe/\u89d2\u8272\u4ea4\u4e92\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.mermaid,{value:"classDiagram\nclass generic_factory~T~ {\n+load(json, src)\n+insert(obj)\n+obj(id)\n+convert(id)\n+get_version()\n}\nclass string_id~T~\nclass int_id~T~\nclass event_subscriber\nclass event_bus {\n+subscribe(subscriber)\n+unsubscribe(subscriber)\n+send(event)\n}\nclass strategy_t {\n<<interface>>\n+evaluate(subject, children)\n}\nclass sequential_t\nclass fallback_t\nclass sequential_until_done_t\nclass behavior_tree {\n+tick(subject)\n+goal()\n}\nclass node_t {\n+tick(subject)\n+set_strategy()\n+add_predicate()\n+set_goal()\n+add_child()\n}\nclass map\nclass character\nclass monster\nclass talker_character\nclass talker_monster\nclass creature_tracker\nclass Item_factory {\n+get_generic_factory()\n+load_item_group()\n+check_definitions()\n}\nclass itype\ngeneric_factory --\x3e string_id\ngeneric_factory --\x3e int_id\nevent_bus --\x3e event_subscriber\nbehavior_tree --\x3e node_t\nnode_t --\x3e strategy_t\nsequential_t ..|> strategy_t\nfallback_t ..|> strategy_t\nsequential_until_done_t ..|> strategy_t\nmap --\x3e character\nmap --\x3e monster\ncharacter --\x3e talker_character\nmonster --\x3e talker_monster\ncreature_tracker --\x3e monster\nItem_factory --\x3e itype"}),"\n",(0,l.jsx)(n.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"generic_factory.h"}),"\n",(0,l.jsx)(n.li,{children:"event_subscriber.h"}),"\n",(0,l.jsx)(n.li,{children:"event_bus.cpp"}),"\n",(0,l.jsx)(n.li,{children:"behavior_strategy.h"}),"\n",(0,l.jsx)(n.li,{children:"behavior.h"}),"\n",(0,l.jsx)(n.li,{children:"map.h"}),"\n",(0,l.jsx)(n.li,{children:"character.h"}),"\n",(0,l.jsx)(n.li,{children:"monster.h"}),"\n",(0,l.jsx)(n.li,{children:"item_factory.h"}),"\n",(0,l.jsx)(n.li,{children:"itype.h"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790",children:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790"}),"\n",(0,l.jsx)(n.h3,{id:"\u5de5\u5382\u6a21\u5f0fgeneric_factory-\u4e0e-json-\u9a71\u52a8\u7684\u6570\u636e\u52a0\u8f7d",children:"\u5de5\u5382\u6a21\u5f0f\uff1ageneric_factory \u4e0e JSON \u9a71\u52a8\u7684\u6570\u636e\u52a0\u8f7d"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u7ee7\u627f\u4e0e\u62bd\u8c61\uff1a\u652f\u6301\u201ccopy-from\u201d\u7ee7\u627f\u4e0e\u201cabstract\u201d\u62bd\u8c61\u5b9a\u4e49\uff0c\u5ef6\u8fdf\u52a0\u8f7ddeferred_json\u5728finalize\u9636\u6bb5\u7edf\u4e00\u5904\u7406\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u7248\u672c\u4e0e\u7f13\u5b58\uff1a\u5185\u90e8\u7248\u672cversion\u4e0estring_id\u7f13\u5b58\u534f\u540c\uff0c\u63d2\u5165\u65b0\u5bf9\u8c61\u4f1a\u9012\u589e\u7248\u672c\uff0c\u4f7f\u65e7\u7f13\u5b58\u5931\u6548\uff0c\u4fdd\u8bc1\u67e5\u8be2\u4e00\u81f4\u6027\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u67e5\u8be2\u63a5\u53e3\uff1a\u63d0\u4f9bstring_id/int_id\u53cc\u5411\u8f6c\u6362\u3001\u6709\u6548\u6027\u68c0\u67e5\u3001\u8303\u56f4\u8fed\u4ee3\u4e0e\u4e00\u6b21\u6027finalization\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u4f7f\u7528\u5efa\u8bae\uff1a\u7c7b\u578bT\u9700\u5b9e\u73b0load/\u68c0\u67e5/\u53ef\u9009check\uff0c\u914d\u5408string_id\u91cd\u5b9a\u5411\u81f3\u5de5\u5382load/reset/finalize\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.mermaid,{value:'sequenceDiagram\nparticipant Loader as "DynamicDataLoader"\nparticipant Factory as "generic_factory<T>"\nparticipant JSON as "JsonObject"\nparticipant Map as "map/abstracts"\nparticipant Deferred as "deferred_json"\nLoader->>Factory : \u8c03\u7528 load(json, src)\nFactory->>Factory : handle_inheritance()\nalt \u5b58\u5728 copy-from\nFactory->>Map : \u67e5\u627e\u7236\u5bf9\u8c61\u6216\u62bd\u8c61\nFactory--\x3e>Factory : \u590d\u5236/\u8d4b\u503c\nelse \u4e0d\u5b58\u5728\nFactory->>Deferred : \u5ef6\u8fdf\u52a0\u8f7d\nend\nFactory->>Factory : load(...).load(json, src)\nalt \u52a0\u8f7d\u6210\u529f\nFactory->>Factory : insert(obj)\nelse \u52a0\u8f7d\u5931\u8d25\nFactory->>Deferred : \u8bb0\u5f55\u5ef6\u8fdf\nend\nnote over Factory : finalize()\u540e\u6e05\u7406\u62bd\u8c61\u8868\u5e76\u5237\u65b0\u7248\u672c'}),"\n",(0,l.jsx)(n.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"generic_factory.h"}),"\n",(0,l.jsx)(n.li,{children:"generic_factory.h"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"generic_factory.h"}),"\n",(0,l.jsx)(n.li,{children:"generic_factory.h"}),"\n",(0,l.jsx)(n.li,{children:"generic_factory.h"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u89c2\u5bdf\u8005\u6a21\u5f0f\u4e8b\u4ef6\u603b\u7ebf\u4e0e\u8ba2\u9605\u8005",children:"\u89c2\u5bdf\u8005\u6a21\u5f0f\uff1a\u4e8b\u4ef6\u603b\u7ebf\u4e0e\u8ba2\u9605\u8005"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u63a5\u53e3\u5951\u7ea6\uff1aevent_subscriber\u5b9a\u4e49notify\u56de\u8c03\uff1bevent_bus\u7ef4\u62a4\u8ba2\u9605\u5217\u8868\uff0c\u652f\u6301\u666e\u901a\u4e8b\u4ef6\u4e0e\u5e26talker\u7684\u4e8b\u4ef6\u5e7f\u64ad\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u751f\u547d\u5468\u671f\uff1a\u8ba2\u9605\u8005\u6790\u6784\u65f6\u81ea\u52a8\u53d6\u6d88\u8ba2\u9605\uff1b\u91cd\u590d\u8ba2\u9605\u4e0e\u9519\u8bef\u9000\u8ba2\u6709\u4fdd\u62a4\u4e0e\u8c03\u8bd5\u63d0\u793a\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u6269\u5c55\u70b9\uff1astats_tracker\u7ee7\u627fevent_subscriber\uff0c\u805a\u5408\u4e8b\u4ef6\u5e76\u63d0\u4f9b\u7edf\u8ba1\u67e5\u8be2\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.mermaid,{value:'sequenceDiagram\nparticipant Sender as "\u4efb\u610f\u53d1\u9001\u65b9"\nparticipant Bus as "event_bus"\nparticipant Sub as "event_subscriber"\nparticipant Stat as "stats_tracker"\nSender->>Bus : send(event)\nBus->>Sub : notify(event)\nBus->>Stat : notify(event)\nNote over Bus,Sub : \u652f\u6301\u5e26talker\u7684\u53cc\u53c2notify'}),"\n",(0,l.jsx)(n.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"event_subscriber.h"}),"\n",(0,l.jsx)(n.li,{children:"event_bus.cpp"}),"\n",(0,l.jsx)(n.li,{children:"stats_tracker.h"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"event_subscriber.h"}),"\n",(0,l.jsx)(n.li,{children:"event_bus.cpp"}),"\n",(0,l.jsx)(n.li,{children:"stats_tracker.h"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u7b56\u7565\u6a21\u5f0f\u884c\u4e3a\u6811\u7b56\u7565\u4e0e\u6267\u884c\u6d41\u7a0b",children:"\u7b56\u7565\u6a21\u5f0f\uff1a\u884c\u4e3a\u6811\u7b56\u7565\u4e0e\u6267\u884c\u6d41\u7a0b"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u7b56\u7565\u63a5\u53e3\uff1astrategy_t\u5b9a\u4e49evaluate(subject, children)\uff0c\u5177\u4f53\u7b56\u7565\u5305\u62ec\u987a\u5e8f\u6267\u884c\u3001\u56de\u9000\u6267\u884c\u3001\u987a\u5e8f\u76f4\u5230\u6210\u529f\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u884c\u4e3a\u6811\uff1atree.tick\u8fd4\u56de\u5f53\u524d\u76ee\u6807\uff0cnode_t\u6839\u636e\u7b56\u7565\u4e0e\u8c13\u8bcd\u51b3\u5b9a\u5b50\u8282\u70b9\u904d\u5386\u987a\u5e8f\u4e0e\u77ed\u8def\u6761\u4ef6\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u914d\u7f6e\u5316\uff1astrategy_map\u63d0\u4f9b\u540d\u79f0\u5230\u7b56\u7565\u5b9e\u4f8b\u7684\u6620\u5c04\uff0c\u4fbf\u4e8eJSON\u914d\u7f6e\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.mermaid,{value:'flowchart TD\nStart(["\u8fdb\u5165 node_t::tick"]) --\x3e Pred["\u8bc4\u4f30\u6761\u4ef6/\u8c13\u8bcd"]\nPred --\x3e PredRes{"pred\u8fd4\u56de running?"}\nPredRes --\x3e |\u5426| Ret["\u8fd4\u56de pred \u7ed3\u679c"]\nPredRes --\x3e |\u662f| Strat["\u8c03\u7528\u7b56\u7565 evaluate(children)"]\nStrat --\x3e StratRes{"\u7b56\u7565\u8fd4\u56de success/failure/running"}\nStratRes --\x3e |success| Done["\u8fd4\u56de success"]\nStratRes --\x3e |failure| Fail["\u8fd4\u56de failure"]\nStratRes --\x3e |running| Next["\u7ee7\u7eed\u5b50\u8282\u70b9 tick"]\nNext --\x3e End(["\u7ed3\u675f"])\nRet --\x3e End\nDone --\x3e End\nFail --\x3e End'}),"\n",(0,l.jsx)(n.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"behavior.h"}),"\n",(0,l.jsx)(n.li,{children:"behavior.cpp"}),"\n",(0,l.jsx)(n.li,{children:"behavior_strategy.h"}),"\n",(0,l.jsx)(n.li,{children:"behavior_strategy.cpp"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"behavior.h"}),"\n",(0,l.jsx)(n.li,{children:"behavior.cpp"}),"\n",(0,l.jsx)(n.li,{children:"behavior_strategy.h"}),"\n",(0,l.jsx)(n.li,{children:"behavior_strategy.cpp"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u5355\u4f8b\u6a21\u5f0f\u4e0e\u5168\u5c40\u521d\u59cb\u5316",children:"\u5355\u4f8b\u6a21\u5f0f\u4e0e\u5168\u5c40\u521d\u59cb\u5316"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5168\u5c40\u521d\u59cb\u5316\uff1aordered_static_globals\u5728\u542f\u52a8\u65f6\u8c03\u7528\u82e5\u5e72\u5de5\u5382/\u7c7b\u578b\u521d\u59cb\u5316\u51fd\u6570\uff0c\u786e\u4fdd\u9759\u6001\u5168\u5c40\u5bf9\u8c61\u7684\u6709\u5e8f\u6784\u9020\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u7248\u672c\u5931\u6548\uff1ageneric_factory\u901a\u8fc7\u7248\u672c\u53f7\u4f7fstring_id\u7f13\u5b58\u5931\u6548\uff0c\u907f\u514d\u810f\u8bfb\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"ordered_static_globals.cpp"}),"\n",(0,l.jsx)(n.li,{children:"generic_factory.h"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u5730\u56fe\u7cfb\u7edf\u6a21\u5757\u8fb9\u754c\u4e0e\u4ea4\u4e92\u534f\u8bae",children:"\u5730\u56fe\u7cfb\u7edf\uff1a\u6a21\u5757\u8fb9\u754c\u4e0e\u4ea4\u4e92\u534f\u8bae"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u8fb9\u754c\uff1amap\u4f5c\u4e3a\u5bb9\u5668\u805a\u5408terrain/furniture/items/fields/vehicles\uff1b\u4e0esubmap\u3001item_stack\u3001field\u7b49\u534f\u4f5c\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u4ea4\u4e92\uff1a\u5730\u56fe\u63d0\u4f9b\u5750\u6807\u7cfb\u8f6c\u6362\u3001\u8d8a\u754c\u88c1\u526a\u3001\u53ef\u89c1\u6027\u53d8\u91cf\u3001\u8def\u5f84\u89c4\u5212\u8bbe\u7f6e\u7b49\uff1b\u4e0e\u89d2\u8272/\u602a\u7269\u4ea4\u4e92\u901a\u8fc7\u4f4d\u7f6e\u4e0e\u72b6\u6001\u67e5\u8be2\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u63a5\u53e3\uff1a\u5730\u56fe\u63d0\u4f9babs/bub/omt\u5750\u6807\u8f6c\u6362\u3001\u8fb9\u754c\u68c0\u67e5\u3001clip_to_bounds\u7b49\u5de5\u5177\u65b9\u6cd5\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"map.h"}),"\n",(0,l.jsx)(n.li,{children:"map.h"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u89d2\u8272\u7cfb\u7edf\u63a5\u53e3\u62bd\u8c61\u4e0e\u591a\u6001",children:"\u89d2\u8272\u7cfb\u7edf\uff1a\u63a5\u53e3\u62bd\u8c61\u4e0e\u591a\u6001"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u62bd\u8c61\u63a5\u53e3\uff1atalker_character/talker_character_const\u7edf\u4e00\u89d2\u8272\u7684\u72b6\u6001/\u4f4d\u7f6e/\u5c5e\u6027\u8bbf\u95ee\uff1btalker_monster/talker_monster_const\u540c\u7406\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u7ee7\u627f\u4f53\u7cfb\uff1acharacter\u4e0emonster\u5747\u7ee7\u627fCreature\uff0c\u5171\u4eab\u57fa\u7840\u80fd\u529b\uff1bcreature_tracker\u63d0\u4f9b\u4e34\u65f6ID\u4e0e\u4f4d\u7f6e\u66f4\u65b0\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u4ea4\u4e92\uff1a\u89d2\u8272\u4e0e\u602a\u7269\u5747\u53ef\u4f5c\u4e3atalker\u53c2\u4e0e\u5bf9\u8bdd/\u72b6\u6001\u67e5\u8be2\uff1b\u5730\u56fe\u4e0eNPC/\u73a9\u5bb6\u4ea4\u4e92\u901a\u8fc7talker\u9002\u914d\u5668\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.mermaid,{value:"classDiagram\nclass Creature\nclass character\nclass monster\nclass talker_character\nclass talker_character_const\nclass talker_monster\nclass talker_monster_const\nclass creature_tracker\ncharacter --|> Creature\nmonster --|> Creature\ntalker_character --\x3e character\ntalker_character_const --\x3e character\ntalker_monster --\x3e monster\ntalker_monster_const --\x3e monster\ncreature_tracker --\x3e monster"}),"\n",(0,l.jsx)(n.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"character.h"}),"\n",(0,l.jsx)(n.li,{children:"monster.h"}),"\n",(0,l.jsx)(n.li,{children:"talker_character.h"}),"\n",(0,l.jsx)(n.li,{children:"talker_character.cpp"}),"\n",(0,l.jsx)(n.li,{children:"talker_monster.cpp"}),"\n",(0,l.jsx)(n.li,{children:"creature_tracker.h"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"character.h"}),"\n",(0,l.jsx)(n.li,{children:"monster.h"}),"\n",(0,l.jsx)(n.li,{children:"talker_character.h"}),"\n",(0,l.jsx)(n.li,{children:"talker_character.cpp"}),"\n",(0,l.jsx)(n.li,{children:"talker_monster.cpp"}),"\n",(0,l.jsx)(n.li,{children:"creature_tracker.h"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u7269\u54c1\u7cfb\u7edf\u6a21\u677f\u4e0e\u6389\u843d\u7ec4",children:"\u7269\u54c1\u7cfb\u7edf\uff1a\u6a21\u677f\u4e0e\u6389\u843d\u7ec4"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Item_factory\uff1a\u96c6\u4e2d\u7ba1\u7406itype\u4e0eitem_group\uff0c\u63d0\u4f9b\u521d\u59cb\u5316\u3001\u91cd\u7f6e\u3001\u4e00\u81f4\u6027\u68c0\u67e5\u3001\u9ed1\u540d\u5355\u52a0\u8f7d\u3001\u67e5\u627e\u4e0e\u7b5b\u9009\u7b49\u63a5\u53e3\u3002"}),"\n",(0,l.jsx)(n.li,{children:"itype\uff1a\u7269\u54c1\u6a21\u677f\uff0c\u5305\u542b\u69fd\u4f4d\u3001\u4f7f\u7528\u51fd\u6570\u3001\u8ba1\u6570\u52a8\u4f5c\u3001\u6389\u843d\u524d/\u540e\u52a8\u4f5c\u7b49\uff1b\u901a\u8fc7generic_factory\u6ce8\u518c\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u4ea4\u4e92\uff1a\u5730\u56fe/\u89d2\u8272\u901a\u8fc7Item_factory\u83b7\u53d6\u6a21\u677f\u4e0e\u968f\u673a\u6389\u843d\u7ec4\uff0c\u751f\u6210\u5b9e\u9645\u7269\u54c1\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"item_factory.h"}),"\n",(0,l.jsx)(n.li,{children:"item_factory.h"}),"\n",(0,l.jsx)(n.li,{children:"itype.h"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u4f9d\u8d56\u5206\u6790",children:"\u4f9d\u8d56\u5206\u6790"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5de5\u5382\u4e0eID\uff1ageneric_factory\u4f9d\u8d56string_id/int_id\u3001DynamicDataLoader\u3001mod_tracker\uff1b\u901a\u8fc7\u7248\u672c\u53f7\u4e0e\u7f13\u5b58\u534f\u540c\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u4e8b\u4ef6\u7cfb\u7edf\uff1aevent_bus\u4f9d\u8d56event_subscriber\u3001talker\uff1bstats_tracker\u4f9d\u8d56event_multiset\u4e0ecata_variant\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u884c\u4e3a\u6811\uff1abehavior\u4f9d\u8d56behavior_strategy\u4e0ebehavior_oracle\uff1bstrategy_map\u63d0\u4f9b\u7b56\u7565\u5b9e\u4f8b\u6620\u5c04\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u5730\u56fe\u4e0e\u5b9e\u4f53\uff1amap\u4f9d\u8d56character/monster/item_stack/field\u7b49\uff1bcreature_tracker\u4f9d\u8d56monster\u4e0e\u4e34\u65f6ID\u3002"}),"\n",(0,l.jsxs)(n.li,{children:["\u7269\u54c1\u7cfb\u7edf\uff1aItem_factory\u4f9d\u8d56generic_factory",(0,l.jsx)(n.itype,{children:"\u4e0eitem_group\uff1bitype\u4f9d\u8d56use_function\u4e0eslot\u7c7b\u578b\u3002"})]}),"\n"]}),"\n",(0,l.jsx)(n.mermaid,{value:'graph LR\nGF["generic_factory<T>"] --\x3e STRID["string_id/int_id"]\nGF --\x3e DDL["DynamicDataLoader"]\nBUS["event_bus"] --\x3e SUB["event_subscriber"]\nST["stats_tracker"] --\x3e BUS\nBEH["behavior::tree/node"] --\x3e STRAT["strategy_t"]\nMAP["map"] --\x3e CHR["character"]\nMAP --\x3e MON["monster"]\nCHR --\x3e TKCHR["talker_character"]\nMON --\x3e TKMON["talker_monster"]\nCT["creature_tracker"] --\x3e MON\nIF["Item_factory"] --\x3e IT["itype"]'}),"\n",(0,l.jsx)(n.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"generic_factory.h"}),"\n",(0,l.jsx)(n.li,{children:"event_bus.cpp"}),"\n",(0,l.jsx)(n.li,{children:"behavior.h"}),"\n",(0,l.jsx)(n.li,{children:"behavior_strategy.h"}),"\n",(0,l.jsx)(n.li,{children:"map.h"}),"\n",(0,l.jsx)(n.li,{children:"character.h"}),"\n",(0,l.jsx)(n.li,{children:"monster.h"}),"\n",(0,l.jsx)(n.li,{children:"item_factory.h"}),"\n",(0,l.jsx)(n.li,{children:"itype.h"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"generic_factory.h"}),"\n",(0,l.jsx)(n.li,{children:"event_bus.cpp"}),"\n",(0,l.jsx)(n.li,{children:"behavior.h"}),"\n",(0,l.jsx)(n.li,{children:"behavior_strategy.h"}),"\n",(0,l.jsx)(n.li,{children:"map.h"}),"\n",(0,l.jsx)(n.li,{children:"character.h"}),"\n",(0,l.jsx)(n.li,{children:"monster.h"}),"\n",(0,l.jsx)(n.li,{children:"item_factory.h"}),"\n",(0,l.jsx)(n.li,{children:"itype.h"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u6027\u80fd\u8003\u91cf",children:"\u6027\u80fd\u8003\u91cf"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5de5\u5382\u7248\u672c\u4e0e\u7f13\u5b58\uff1a\u901a\u8fc7\u7248\u672c\u53f7\u9012\u589e\u4f7fstring_id\u7f13\u5b58\u5931\u6548\uff0c\u907f\u514d\u91cd\u590d\u67e5\u627e\u6210\u672c\uff1bfinalize\u9636\u6bb5\u7edf\u4e00\u5237\u65b0ID\u6620\u5c04\uff0c\u51cf\u5c11\u540e\u7eed\u67e5\u8be2\u5f00\u9500\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u5ef6\u8fdf\u52a0\u8f7d\uff1adeferred_json\u5728\u4e00\u6b21\u6279\u91cf\u52a0\u8f7d\u540e\u7edf\u4e00\u5904\u7406\uff0c\u964d\u4f4e\u591a\u6b21\u89e3\u6790\u4e0e\u63d2\u5165\u7684\u6296\u52a8\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u4e8b\u4ef6\u5e7f\u64ad\uff1a\u8ba2\u9605\u8005\u5217\u8868\u7ebf\u6027\u904d\u5386\uff0c\u5efa\u8bae\u63a7\u5236\u8ba2\u9605\u6570\u91cf\u4e0e\u4e8b\u4ef6\u9891\u7387\uff1b\u5fc5\u8981\u65f6\u5728\u8ba2\u9605\u4fa7\u505a\u672c\u5730\u8fc7\u6ee4\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u884c\u4e3a\u6811\u7b56\u7565\uff1a\u7b56\u7565evaluate\u6309\u914d\u7f6e\u987a\u5e8f\u77ed\u8def\uff0c\u5408\u7406\u7ec4\u7ec7\u8282\u70b9\u4f18\u5148\u7ea7\u53ef\u51cf\u5c11\u65e0\u6548\u8ba1\u7b97\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u5730\u56fe\u4e0e\u5b9e\u4f53\uff1aitem_stack\u9650\u5236\u6bcf\u683c\u6700\u5927\u7269\u54c1\u6570\uff0c\u907f\u514d\u8fc7\u91cf\u5806\u53e0\u5bfc\u81f4\u7684\u6e32\u67d3\u4e0e\u78b0\u649e\u68c0\u6d4b\u5f00\u9500\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u6545\u969c\u6392\u67e5\u6307\u5357",children:"\u6545\u969c\u6392\u67e5\u6307\u5357"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5de5\u5382\u52a0\u8f7d\u5931\u8d25\uff1a\u68c0\u67e5JSON\u662f\u5426\u540c\u65f6\u6307\u5b9aabstract\u4e0eid\uff1b\u786e\u8ba4copy-from\u5f15\u7528\u662f\u5426\u5b58\u5728\uff1b\u67e5\u770bwas_loaded\u4e0edeferred\u8bb0\u5f55\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u4e8b\u4ef6\u672a\u9001\u8fbe\uff1a\u786e\u8ba4\u8ba2\u9605\u8005\u662f\u5426\u5df2\u52a0\u5165event_bus\uff1b\u68c0\u67e5notify\u7b7e\u540d\u5339\u914d\uff1b\u5173\u6ce8\u91cd\u590d\u8ba2\u9605\u4e0e\u9519\u8bef\u9000\u8ba2\u7684\u8c03\u8bd5\u6d88\u606f\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u884c\u4e3a\u6811\u65e0\u8f93\u51fa\uff1a\u6838\u5bf9\u7b56\u7565\u6620\u5c04\u4e0e\u8282\u70b9\u6761\u4ef6\uff1b\u9a8c\u8bc1tick\u8fd4\u56de\u503c\u4e0eactive_node\u5207\u6362\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u5730\u56fe\u5750\u6807\u5f02\u5e38\uff1a\u4f7f\u7528inbounds/clip_to_bounds\u6821\u9a8c\u5750\u6807\uff1b\u786e\u8ba4abs/bub/omt\u8f6c\u6362\u94fe\u8def\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u7269\u54c1\u6389\u843d\u5f02\u5e38\uff1a\u68c0\u67e5item_group\u6743\u91cd\u4e0e\u9ed1\u540d\u5355\uff1b\u786e\u8ba4itype\u69fd\u4f4d\u4e0e\u4f7f\u7528\u51fd\u6570\u914d\u7f6e\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"generic_factory.h"}),"\n",(0,l.jsx)(n.li,{children:"generic_factory.h"}),"\n",(0,l.jsx)(n.li,{children:"event_bus.cpp"}),"\n",(0,l.jsx)(n.li,{children:"behavior.cpp"}),"\n",(0,l.jsx)(n.li,{children:"map.h"}),"\n",(0,l.jsx)(n.li,{children:"item_factory.h"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u7ed3\u8bba",children:"\u7ed3\u8bba"}),"\n",(0,l.jsx)(n.p,{children:"CDDA\u901a\u8fc7\u5de5\u5382+ID+\u4e8b\u4ef6+\u884c\u4e3a\u6811+\u5b9e\u4f53\u7684\u6a21\u5757\u5316\u67b6\u6784\uff0c\u5b9e\u73b0\u4e86\u9ad8\u5ea6\u53ef\u6269\u5c55\u4e0e\u53ef\u914d\u7f6e\u7684\u6e38\u620f\u7cfb\u7edf\u3002\u5de5\u5382\u6a21\u5f0f\u7edf\u4e00\u4e86JSON\u9a71\u52a8\u7684\u6570\u636e\u52a0\u8f7d\u4e0e\u7ee7\u627f\uff1b\u89c2\u5bdf\u8005\u6a21\u5f0f\u63d0\u4f9b\u4e86\u677e\u8026\u5408\u7684\u4e8b\u4ef6\u4f20\u64ad\uff1b\u7b56\u7565\u6a21\u5f0f\u8ba9\u884c\u4e3a\u6811\u5177\u5907\u7075\u6d3b\u7684\u6267\u884c\u7b56\u7565\uff1b\u62bd\u8c61\u63a5\u53e3\u4e0e\u591a\u6001\u4fdd\u8bc1\u4e86\u89d2\u8272/\u602a\u7269\u7684\u7edf\u4e00\u4ea4\u4e92\u3002\u4e0a\u8ff0\u8bbe\u8ba1\u6a21\u5f0f\u4e0e\u6a21\u5757\u8fb9\u754c\u5171\u540c\u6784\u6210\u4e86CDDA\u53ef\u6269\u5c55\u3001\u53ef\u7ef4\u62a4\u7684\u6838\u5fc3\u9aa8\u67b6\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"\u9644\u5f55",children:"\u9644\u5f55"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u6700\u4f73\u5b9e\u8df5\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u7c7b\u578bT\u5b9e\u73b0load/check\uff0c\u5e76\u5728string_id\u4e2d\u8f6c\u53d1\u81f3\u5de5\u5382\uff1b\u5728reset/finalize\u4e2d\u6e05\u7406\u7f13\u5b58\u4e0e\u8fde\u63a5\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u4e8b\u4ef6\u8ba2\u9605\u8005\u5e94\u907f\u514d\u91cd\u590d\u8ba2\u9605\uff1b\u5728\u6790\u6784\u65f6\u786e\u4fdd\u9000\u8ba2\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u884c\u4e3a\u6811\u8282\u70b9\u6309\u4f18\u5148\u7ea7\u7ec4\u7ec7\uff0c\u7b56\u7565\u6309\u573a\u666f\u9009\u62e9\uff1b\u6761\u4ef6\u8c13\u8bcd\u5c3d\u91cf\u77ed\u5c0f\u660e\u786e\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u5730\u56fe\u64cd\u4f5c\u524d\u540e\u6821\u9a8c\u5750\u6807\u4e0e\u8fb9\u754c\uff1b\u7269\u54c1\u6389\u843d\u7ec4\u6743\u91cd\u4e0e\u9ed1\u540d\u5355\u9700\u5b9a\u671f\u5ba1\u67e5\u3002"}),"\n"]}),"\n"]}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}}}]);