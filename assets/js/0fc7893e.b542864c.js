"use strict";(globalThis.webpackChunkCDDA_CN_Guide=globalThis.webpackChunkCDDA_CN_Guide||[]).push([[4982],{28453(e,n,r){r.d(n,{R:()=>c,x:()=>a});var l=r(96540);const i={},s=l.createContext(i);function c(e){const n=l.useContext(s);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),l.createElement(s.Provider,{value:n},e.children)}},54362(e,n,r){r.r(n),r.d(n,{assets:()=>h,contentTitle:()=>a,default:()=>o,frontMatter:()=>c,metadata:()=>l,toc:()=>t});const l=JSON.parse('{"id":"content/\u6e38\u620f\u6838\u5fc3\u7cfb\u7edf/\u6e38\u620f\u6838\u5fc3\u7cfb\u7edf","title":"\u6e38\u620f\u6838\u5fc3\u7cfb\u7edf","description":"\u672c\u6587\u6863\u5f15\u7528\u7684\u6587\u4ef6","source":"@site/docs/content/\u6e38\u620f\u6838\u5fc3\u7cfb\u7edf/\u6e38\u620f\u6838\u5fc3\u7cfb\u7edf.md","sourceDirName":"content/\u6e38\u620f\u6838\u5fc3\u7cfb\u7edf","slug":"/content/\u6e38\u620f\u6838\u5fc3\u7cfb\u7edf/","permalink":"/CDDA-CN-Guide/docs/content/\u6e38\u620f\u6838\u5fc3\u7cfb\u7edf/","draft":false,"unlisted":false,"editUrl":"https://github.com/SurFlurer/CDDA-CN-Guide/edit/master/CataclysmDDA\u7efc\u5408\u653b\u7565\u624b\u518c/docs/content/\u6e38\u620f\u6838\u5fc3\u7cfb\u7edf/\u6e38\u620f\u6838\u5fc3\u7cfb\u7edf.md","tags":[],"version":"current","frontMatter":{"title":"\u6e38\u620f\u6838\u5fc3\u7cfb\u7edf"},"sidebar":"tutorialSidebar","previous":{"title":"\u6a21\u7ec4\u7ba1\u7406\u5668","permalink":"/CDDA-CN-Guide/docs/content/\u6a21\u7ec4\u7cfb\u7edf/\u6a21\u7ec4\u7ba1\u7406\u5668"},"next":{"title":"\u4e16\u754c\u751f\u6210\u7cfb\u7edf","permalink":"/CDDA-CN-Guide/docs/content/\u6e38\u620f\u6838\u5fc3\u7cfb\u7edf/\u4e16\u754c\u751f\u6210\u7cfb\u7edf/"}}');var i=r(74848),s=r(28453);const c={title:"\u6e38\u620f\u6838\u5fc3\u7cfb\u7edf"},a=void 0,h={},t=[{value:"\u76ee\u5f55",id:"\u76ee\u5f55",level:2},{value:"\u5f15\u8a00",id:"\u5f15\u8a00",level:2},{value:"\u9879\u76ee\u7ed3\u6784",id:"\u9879\u76ee\u7ed3\u6784",level:2},{value:"\u6838\u5fc3\u7ec4\u4ef6",id:"\u6838\u5fc3\u7ec4\u4ef6",level:2},{value:"\u67b6\u6784\u603b\u89c8",id:"\u67b6\u6784\u603b\u89c8",level:2},{value:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790",id:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790",level:2},{value:"\u5730\u56fe\u7cfb\u7edf\uff08Map\uff09",id:"\u5730\u56fe\u7cfb\u7edfmap",level:3},{value:"\u89d2\u8272\u7cfb\u7edf\uff08Creature/Character/NPC\uff09",id:"\u89d2\u8272\u7cfb\u7edfcreaturecharacternpc",level:3},{value:"\u7269\u54c1\u7cfb\u7edf\uff08Item\uff09",id:"\u7269\u54c1\u7cfb\u7edfitem",level:3},{value:"\u602a\u7269\u7cfb\u7edf\uff08Monster\uff09",id:"\u602a\u7269\u7cfb\u7edfmonster",level:3},{value:"\u4e16\u754c\u751f\u6210\u7cfb\u7edf\uff08WorldFactory\uff09",id:"\u4e16\u754c\u751f\u6210\u7cfb\u7edfworldfactory",level:3},{value:"\u56de\u5408\u5236\u673a\u5236\u4e0e\u65f6\u95f4\u63a8\u8fdb",id:"\u56de\u5408\u5236\u673a\u5236\u4e0e\u65f6\u95f4\u63a8\u8fdb",level:3},{value:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790",id:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790",level:2},{value:"\u6027\u80fd\u8003\u91cf",id:"\u6027\u80fd\u8003\u91cf",level:2},{value:"\u6545\u969c\u6392\u67e5\u6307\u5357",id:"\u6545\u969c\u6392\u67e5\u6307\u5357",level:2},{value:"\u7ed3\u8bba",id:"\u7ed3\u8bba",level:2},{value:"\u9644\u5f55",id:"\u9644\u5f55",level:2}];function d(e){const n={a:"a",cite:"cite",h2:"h2",h3:"h3",li:"li",mermaid:"mermaid",ol:"ol",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.cite,{children:"\n**\u672c\u6587\u6863\u5f15\u7528\u7684\u6587\u4ef6**\n- game.h\n- do_turn.cpp\n- map.h\n- monster.h\n- item.h\n- character.h\n- creature.h\n- worldfactory.h\n- calendar.h\n- timed_event.cpp\n- point.h\n- coords_fwd.h\n"}),"\n",(0,i.jsx)(n.h2,{id:"\u76ee\u5f55",children:"\u76ee\u5f55"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#%E5%BC%95%E8%A8%80",children:"\u5f15\u8a00"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84",children:"\u9879\u76ee\u7ed3\u6784"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6",children:"\u6838\u5fc3\u7ec4\u4ef6"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#%E6%9E%B6%E6%9E%84%E6%80%BB%E8%A7%88",children:"\u67b6\u6784\u603b\u89c8"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#%E8%AF%A6%E7%BB%86%E7%BB%84%E4%BB%B6%E5%88%86%E6%9E%90",children:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB%E5%88%86%E6%9E%90",children:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#%E6%80%A7%E8%83%BD%E8%80%83%E9%87%8F",children:"\u6027\u80fd\u8003\u91cf"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E6%8C%87%E5%8D%97",children:"\u6545\u969c\u6392\u67e5\u6307\u5357"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#%E7%BB%93%E8%AE%BA",children:"\u7ed3\u8bba"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#%E9%99%84%E5%BD%95",children:"\u9644\u5f55"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u5f15\u8a00",children:"\u5f15\u8a00"}),"\n",(0,i.jsx)(n.p,{children:"\u672c\u6587\u4ef6\u9762\u5411Cataclysm-DDA\uff08\u707e\u53d8\uff09\u6e38\u620f\u7684\u6838\u5fc3\u7cfb\u7edf\uff0c\u7cfb\u7edf\u6027\u68b3\u7406\u5730\u56fe\u7cfb\u7edf\u3001\u89d2\u8272\u7cfb\u7edf\u3001\u7269\u54c1\u7cfb\u7edf\u3001\u602a\u7269\u7cfb\u7edf\u4e0e\u4e16\u754c\u751f\u6210\u7cfb\u7edf\uff0c\u5e76\u89e3\u91ca\u56de\u5408\u5236\u673a\u5236\u3001\u4e09\u7ef4\u7a7a\u95f4\u7ba1\u7406\u3001\u5c5e\u6027\u6280\u80fd\u4f53\u7cfb\u3001\u88c5\u5907\u4e0e\u80cc\u5305\u7ba1\u7406\u7b49\u5173\u952e\u7279\u6027\u3002\u6587\u6863\u4ee5\u4ee3\u7801\u7ea7\u5206\u6790\u4e3a\u57fa\u7840\uff0c\u8f85\u4ee5\u56fe\u793a\u4e0e\u4f7f\u7528\u6a21\u5f0f\uff0c\u5e2e\u52a9\u5f00\u53d1\u8005\u4e0e\u6a21\u7ec4\u4f5c\u8005\u7406\u89e3\u4e0e\u6269\u5c55\u6838\u5fc3\u7cfb\u7edf\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u9879\u76ee\u7ed3\u6784",children:"\u9879\u76ee\u7ed3\u6784"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u6e38\u620f\u4e3b\u5faa\u73af\u4e0e\u56de\u5408\u63a8\u8fdb\u7531\u5168\u5c40\u65f6\u95f4\u8f74\u9a71\u52a8\uff0c\u6bcf\u56de\u5408\u63a8\u8fdb\u65f6\u5904\u7406\u5929\u6c14\u3001NPC\u3001\u4efb\u52a1\u3001\u5b9a\u65f6\u4e8b\u4ef6\u7b49\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u5730\u56fe\u7cfb\u7edf\u8d1f\u8d23\u4e8c\u7ef4\u5b50\u56fe\u7f51\u683c\u4e0e\u4e09\u7ef4\u5750\u6807\u7cfb\u4e0b\u7684\u53ef\u89c1\u6027\u3001\u79fb\u52a8\u6210\u672c\u3001\u8def\u5f84\u89c4\u5212\u4e0e\u6e32\u67d3\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u89d2\u8272\u7cfb\u7edf\u62bd\u8c61\u51faCreature\u57fa\u7c7b\uff0c\u6d3e\u751f\u51faCharacter\uff08\u73a9\u5bb6\uff09\u4e0eNPC\u3001Monster\uff08\u602a\u7269\uff09\uff0c\u7edf\u4e00\u6218\u6597\u3001\u6548\u679c\u3001\u72b6\u6001\u4e0e\u884c\u52a8\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u7269\u54c1\u7cfb\u7edf\u63d0\u4f9b\u53ef\u5806\u53e0\u3001\u53ef\u7ec4\u5408\u3001\u53ef\u9644\u9b54\u7684\u590d\u6742\u5b9e\u4f53\uff0c\u652f\u6301\u5185\u5bb9\u4e0e\u5c5e\u6027\u4fe1\u606f\u8f93\u51fa\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u4e16\u754c\u751f\u6210\u901a\u8fc7WorldFactory\u7ba1\u7406\u4e16\u754c\u914d\u7f6e\u3001\u5b58\u6863\u4e0e\u6a21\u7ec4\u52a0\u8f7d\uff0c\u652f\u6301\u591a\u4e16\u754c\u5e76\u884c\u4e0e\u5207\u6362\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.mermaid,{value:'graph TB\nGame["\u6e38\u620f\u5b9e\u4f8b<br/>game.h"] --\x3e Calendar["\u65f6\u95f4\u8f74<br/>calendar.h"]\nGame --\x3e Map["\u5730\u56fe\u7cfb\u7edf<br/>map.h"]\nGame --\x3e Events["\u5b9a\u65f6\u4e8b\u4ef6\u7ba1\u7406<br/>timed_event.cpp"]\nGame --\x3e World["\u4e16\u754c\u5de5\u5382<br/>worldfactory.h"]\nMap --\x3e Submaps["\u5b50\u56fe\u7f51\u683c<br/>tripoint \u5750\u6807\u7cfb"]\nMap --\x3e Visibility["\u53ef\u89c1\u6027/\u5149\u7167<br/>lightmap/visibility"]\nMap --\x3e Pathfinding["\u5bfb\u8def/A*<br/>route/find_clear_path"]\nCreature["\u751f\u7269\u57fa\u7c7b<br/>creature.h"] --\x3e Character["\u89d2\u8272<br/>character.h"]\nCreature --\x3e Monster["\u602a\u7269<br/>monster.h"]\nCharacter --\x3e Items["\u7269\u54c1\u7cfb\u7edf<br/>item.h"]\nMonster --\x3e Items\nCalendar --\x3e Turns["\u56de\u5408\u63a8\u8fdb<br/>do_turn.cpp"]\nEvents --\x3e Timed["\u5468\u671f\u6027\u4e8b\u4ef6<br/>process()"]'}),"\n",(0,i.jsx)(n.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"game.h"}),"\n",(0,i.jsx)(n.li,{children:"map.h"}),"\n",(0,i.jsx)(n.li,{children:"creature.h"}),"\n",(0,i.jsx)(n.li,{children:"character.h"}),"\n",(0,i.jsx)(n.li,{children:"monster.h"}),"\n",(0,i.jsx)(n.li,{children:"worldfactory.h"}),"\n",(0,i.jsx)(n.li,{children:"calendar.h"}),"\n",(0,i.jsx)(n.li,{children:"timed_event.cpp"}),"\n",(0,i.jsx)(n.li,{children:"do_turn.cpp"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"game.h"}),"\n",(0,i.jsx)(n.li,{children:"map.h"}),"\n",(0,i.jsx)(n.li,{children:"creature.h"}),"\n",(0,i.jsx)(n.li,{children:"character.h"}),"\n",(0,i.jsx)(n.li,{children:"monster.h"}),"\n",(0,i.jsx)(n.li,{children:"worldfactory.h"}),"\n",(0,i.jsx)(n.li,{children:"calendar.h"}),"\n",(0,i.jsx)(n.li,{children:"timed_event.cpp"}),"\n",(0,i.jsx)(n.li,{children:"do_turn.cpp"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u6838\u5fc3\u7ec4\u4ef6",children:"\u6838\u5fc3\u7ec4\u4ef6"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u6e38\u620f\u4e3b\u63a7\u4e0e\u56de\u5408\u63a8\u8fdb\uff1a\u5168\u5c40\u65f6\u95f4\u63a8\u8fdb\u3001\u5929\u6c14\u66f4\u65b0\u3001NPC\u52a0\u8f7d\u3001\u5b9a\u65f6\u4e8b\u4ef6\u5904\u7406\u3001\u4efb\u52a1\u5904\u7406\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u5730\u56fe\u4e0e\u7a7a\u95f4\uff1a\u5b50\u56fe\u7f51\u683c\u3001\u4e09\u7ef4\u5750\u6807\u3001\u53ef\u89c1\u6027\u4e0e\u5149\u7167\u3001\u79fb\u52a8\u6210\u672c\u3001\u8def\u5f84\u89c4\u5212\u3001\u8f66\u8f86\u4e0e\u5730\u5f62\u4ea4\u4e92\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u751f\u7269\u4e0e\u6218\u6597\uff1aCreature\u57fa\u7c7b\u7edf\u4e00\u89d2\u8272\u3001\u602a\u7269\u3001NPC\uff1b\u6218\u6597\u5224\u5b9a\u3001\u4f24\u5bb3\u5438\u6536\u3001\u6548\u679c\u7cfb\u7edf\u3001\u6b7b\u4ea1\u6e05\u7406\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u7269\u54c1\u4e0e\u80cc\u5305\uff1a\u7269\u54c1\u7c7b\u578b\u3001\u5c5e\u6027\u3001\u5806\u53e0\u5408\u5e76\u3001\u5185\u5bb9\u5b58\u50a8\u3001\u9644\u9b54\u4e0e\u8010\u4e45\u3001\u4ef7\u683c\u4e0e\u4f53\u79ef\u8ba1\u7b97\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u4e16\u754c\u751f\u6210\uff1a\u4e16\u754c\u914d\u7f6e\u3001\u6a21\u7ec4\u52a0\u8f7d\u987a\u5e8f\u3001\u5b58\u6863\u7ba1\u7406\u3001\u6700\u8fd1\u4e16\u754c/\u89d2\u8272\u8bb0\u5f55\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"game.h"}),"\n",(0,i.jsx)(n.li,{children:"map.h"}),"\n",(0,i.jsx)(n.li,{children:"creature.h"}),"\n",(0,i.jsx)(n.li,{children:"item.h"}),"\n",(0,i.jsx)(n.li,{children:"worldfactory.h"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u67b6\u6784\u603b\u89c8",children:"\u67b6\u6784\u603b\u89c8"}),"\n",(0,i.jsx)(n.p,{children:"\u6e38\u620f\u91c7\u7528\u201c\u5168\u5c40\u65f6\u95f4\u8f74 + \u5b50\u56fe\u7f51\u683c + \u7edf\u4e00\u751f\u7269\u6a21\u578b\u201d\u7684\u67b6\u6784\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u65f6\u95f4\u8f74\uff1acalendar.h\u63d0\u4f9bturn\u63a8\u8fdb\u4e0e\u65f6\u95f4\u5355\u4f4d\u6362\u7b97\uff0cdo_turn.cpp\u5728\u6bcf\u56de\u5408\u6267\u884c\u5929\u6c14\u3001NPC\u3001\u4efb\u52a1\u4e0e\u5b9a\u65f6\u4e8b\u4ef6\u5904\u7406\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u7a7a\u95f4\u6a21\u578b\uff1acoords_fwd.h\u5b9a\u4e49tripoint\u7cfb\u5217\u5750\u6807\u7c7b\u578b\uff0cpoint.h\u63d0\u4f9b\u4e09\u7ef4\u5ea6\u5411\u91cf\u8fd0\u7b97\uff0c\u5730\u56fe\u4ee5\u5b50\u56fe\u4e3a\u5355\u4f4d\u7ec4\u7ec7\uff0c\u652f\u6301\u4e09\u7ef4Z\u5c42\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u751f\u7269\u7edf\u4e00\uff1acreature.h\u5b9a\u4e49Creature\u57fa\u7c7b\uff0ccharacter.h\u4e0emonster.h\u5206\u522b\u5b9e\u73b0\u73a9\u5bb6\u4e0e\u602a\u7269\u7684\u884c\u4e3a\u4e0e\u5c5e\u6027\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u7269\u54c1\u7cfb\u7edf\uff1aitem.h\u63d0\u4f9b\u7269\u54c1\u7c7b\u578b\u3001\u5c5e\u6027\u3001\u5806\u53e0\u3001\u5185\u5bb9\u3001\u9644\u9b54\u4e0e\u8010\u4e45\u7b49\u80fd\u529b\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u4e16\u754c\u5de5\u5382\uff1aworldfactory.h\u8d1f\u8d23\u4e16\u754c\u914d\u7f6e\u3001\u6a21\u7ec4\u52a0\u8f7d\u4e0e\u5b58\u6863\u7ba1\u7406\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.mermaid,{value:"classDiagram\nclass Game {\n+load_static_data()\n+load_core_data()\n+setup()\n+save()\n+draw()\n+vertical_move(z, force, peeking)\n+place_critter_at(...)\n+all_creatures()\n}\nclass Creature {\n+process_turn()\n+deal_damage(...)\n+apply_damage(...)\n+add_effect(...)\n+die(...)\n+normalize()\n}\nclass Character {\n+get_speed()\n+get_armor_res(...)\n+serialize(json)\n+deserialize(json)\n}\nclass Monster {\n+plan()\n+move()\n+melee_attack(...)\n+process_effects()\n}\nclass Map {\n+load(pos, update_vehicles, pump_events)\n+route(from, target, settings)\n+move_cost(p)\n+drawsqaure(...)\n+veh_at(p)\n}\nclass Item {\n+combine(rhs)\n+merge_charges(rhs)\n+weight(include_contents)\n+volume(integral, ignore_contents, charges_in_vol)\n+serialize(json)\n+deserialize(json)\n}\nclass WorldFactory {\n+make_new_world(...)\n+get_world(name)\n+set_active_world(world)\n+all_worldnames()\n}\nGame --\x3e Map\nGame --\x3e Creature\nCreature <|-- Character\nCreature <|-- Monster\nCharacter --\x3e Item\nMonster --\x3e Item\nGame --\x3e WorldFactory"}),"\n",(0,i.jsx)(n.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"game.h"}),"\n",(0,i.jsx)(n.li,{children:"creature.h"}),"\n",(0,i.jsx)(n.li,{children:"character.h"}),"\n",(0,i.jsx)(n.li,{children:"monster.h"}),"\n",(0,i.jsx)(n.li,{children:"map.h"}),"\n",(0,i.jsx)(n.li,{children:"item.h"}),"\n",(0,i.jsx)(n.li,{children:"worldfactory.h"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790",children:"\u8be6\u7ec6\u7ec4\u4ef6\u5206\u6790"}),"\n",(0,i.jsx)(n.h3,{id:"\u5730\u56fe\u7cfb\u7edfmap",children:"\u5730\u56fe\u7cfb\u7edf\uff08Map\uff09"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5b50\u56fe\u7f51\u683c\u4e0e\u5750\u6807\uff1a\u5730\u56fe\u4ee511\xd711\u5b50\u56fe\u8986\u76d6\u73b0\u5b9e\u6c14\u6ce1\uff0c\u652f\u6301\u4e09\u7ef4Z\u5c42\uff1btripoint\u7cfb\u5217\u5750\u6807\u7528\u4e8e\u7edd\u5bf9/\u76f8\u5bf9/\u8fc7\u56fe/\u73b0\u5b9e\u6c14\u6ce1\u7b49\u4e0d\u540c\u573a\u666f\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u53ef\u89c1\u6027\u4e0e\u5149\u7167\uff1a\u63d0\u4f9bapparent_light_at\u3001get_visibility\u7b49\u65b9\u6cd5\uff0c\u7ed3\u5408lightmap\u4e0e\u89c6\u91ce\u7f13\u5b58\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u79fb\u52a8\u6210\u672c\u4e0e\u8def\u5f84\uff1amove_cost\u3001combined_movecost\u3001route\u3001find_clear_path\u3001straight_route\u7b49\uff0c\u652f\u6301\u5730\u5f62\u3001\u969c\u788d\u3001\u9677\u9631\u4e0e\u8f66\u8f86\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u8f66\u8f86\u4e0e\u5730\u5f62\uff1aveh_at\u3001get_vehicles\u3001vehmove\u3001destroy_vehicle\u7b49\uff0c\u5904\u7406\u8f66\u8f86\u78b0\u649e\u3001\u79fb\u4f4d\u4e0e\u7f13\u5b58\u5931\u6548\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u6e32\u67d3\u4e0e\u7ed8\u5236\uff1adrawsqaure\u3001draw\u7b49\uff0c\u652f\u6301\u9ad8\u4eae\u3001\u7269\u54c1\u663e\u793a\u3001\u663c\u591c\u4e0e\u706f\u5149\u53e0\u52a0\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.mermaid,{value:'flowchart TD\nStart(["\u8fdb\u5165\u56de\u5408"]) --\x3e LoadMap["\u52a0\u8f7d/\u5207\u6362\u5b50\u56fe<br/>load()"]\nLoadMap --\x3e Costs["\u8ba1\u7b97\u79fb\u52a8\u6210\u672c<br/>move_cost()"]\nCosts --\x3e Route["A*\u5bfb\u8def<br/>route()"]\nRoute --\x3e Draw["\u7ed8\u5236\u53ef\u89c6\u533a\u57df<br/>drawsqaure/draw"]\nDraw --\x3e Vehicles["\u5904\u7406\u8f66\u8f86<br/>vehmove/veh_at"]\nVehicles --\x3e End(["\u7ed3\u675f\u56de\u5408"])'}),"\n",(0,i.jsx)(n.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"map.h"}),"\n",(0,i.jsx)(n.li,{children:"point.h"}),"\n",(0,i.jsx)(n.li,{children:"coords_fwd.h"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"map.h"}),"\n",(0,i.jsx)(n.li,{children:"point.h"}),"\n",(0,i.jsx)(n.li,{children:"coords_fwd.h"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u89d2\u8272\u7cfb\u7edfcreaturecharacternpc",children:"\u89d2\u8272\u7cfb\u7edf\uff08Creature/Character/NPC\uff09"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Creature\u57fa\u7c7b\uff1a\u7edf\u4e00\u751f\u547d\u503c\u3001\u901f\u5ea6\u3001\u547d\u4e2d/\u95ea\u907f\u3001\u4f24\u5bb3\u5438\u6536\u3001\u6548\u679c\u7cfb\u7edf\u3001\u6b7b\u4ea1\u68c0\u67e5\u4e0e\u6e05\u7406\u3002"}),"\n",(0,i.jsx)(n.li,{children:"Character\uff08\u73a9\u5bb6\uff09\uff1a\u7ee7\u627fCreature\uff0c\u6269\u5c55\u7edf\u8ba1\u3001\u9965\u997f/\u53e3\u6e34/\u7761\u7720\u3001\u6280\u80fd\u3001\u9644\u9b54\u901f\u5ea6\u52a0\u6210\u3001\u62a4\u7532\u6297\u6027\u3001\u67aa\u68b0\u7784\u51c6\u4e0e\u5c04\u51fb\u53c2\u6570\u3002"}),"\n",(0,i.jsx)(n.li,{children:"NPC\uff1a\u4f5c\u4e3aCharacter\u7684\u7279\u5316\uff0c\u53c2\u4e0e\u5bf9\u8bdd\u3001\u4efb\u52a1\u3001\u6d3e\u7cfb\u4e0e\u8ddf\u968f\u884c\u4e3a\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u6001\u52bf\u4e0e\u4e92\u52a8\uff1aattitude_to\u3001auto_find_hostile_target\u3001avoid_trap\u7b49\uff0c\u652f\u6301AI\u4e0e\u4ea4\u4e92\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.mermaid,{value:'sequenceDiagram\nparticipant C as "Creature"\nparticipant Char as "Character"\nparticipant Mon as "Monster"\nC->>C : process_turn()\nC->>Char : normalize()/reset()\nC->>Mon : plan()/move()\nMon->>Mon : melee_attack()/deal_damage()\nChar->>Char : add_effect()/clear_effects()\nMon->>Mon : process_effects()'}),"\n",(0,i.jsx)(n.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"creature.h"}),"\n",(0,i.jsx)(n.li,{children:"character.h"}),"\n",(0,i.jsx)(n.li,{children:"monster.h"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"creature.h"}),"\n",(0,i.jsx)(n.li,{children:"character.h"}),"\n",(0,i.jsx)(n.li,{children:"monster.h"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u7269\u54c1\u7cfb\u7edfitem",children:"\u7269\u54c1\u7cfb\u7edf\uff08Item\uff09"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u7c7b\u578b\u4e0e\u5c5e\u6027\uff1aitem.h\u5b9a\u4e49\u7269\u54c1\u7c7b\u578b\u3001\u5c5e\u6027\u3001\u9644\u9b54\u3001\u8010\u4e45\u3001\u635f\u574f\u7b49\u7ea7\u3001\u80fd\u91cf\u7535\u6c60\u7b49\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u5806\u53e0\u4e0e\u5408\u5e76\uff1astacks_with\u3001combine\u3001merge_charges\u3001display_stacked_with\uff0c\u652f\u6301\u8ba1\u6570\u578b\u4e0e\u6db2\u4f53\u7269\u54c1\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u4f53\u79ef\u4e0e\u91cd\u91cf\uff1avolume\u3001weight\u3001base_volume\u3001collapsed_volume_delta\uff0c\u8003\u8651\u5185\u5bb9\u4e0e\u79ef\u5206\u5305\u88f9\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u4fe1\u606f\u8f93\u51fa\uff1ainfo/get_info\uff0c\u6309\u7c7b\u522b\u8f93\u51fa\u5c5e\u6027\u4e0e\u4fee\u9970\uff0c\u652f\u6301\u6279\u91cf\u5408\u6210\u500d\u6570\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u4f7f\u7528\u4e0e\u52a8\u4f5c\uff1aammo_set/ammo_unset\u3001activate/deactivate\u3001reload\u7b49\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.mermaid,{value:'flowchart TD\nStart(["\u7269\u54c1\u64cd\u4f5c"]) --\x3e CheckType["\u5224\u65ad\u7269\u54c1\u7c7b\u578b<br/>itype/flags"]\nCheckType --\x3e Stack["\u5806\u53e0\u5224\u5b9a<br/>stacks_with()"]\nStack --\x3e |\u53ef\u5408\u5e76| Merge["\u5408\u5e76/\u8ba1\u6570\u5408\u5e76<br/>combine/merge_charges"]\nStack --\x3e |\u4e0d\u53ef\u5408\u5e76| Volume["\u4f53\u79ef/\u91cd\u91cf\u8ba1\u7b97<br/>volume/weight"]\nVolume --\x3e Info["\u5c5e\u6027\u8f93\u51fa<br/>info/get_info"]\nInfo --\x3e Use["\u4f7f\u7528/\u6fc0\u6d3b/\u88c5\u8f7d<br/>activate/reload/use"]\nUse --\x3e End(["\u5b8c\u6210"])'}),"\n",(0,i.jsx)(n.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"item.h"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"item.h"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u602a\u7269\u7cfb\u7edfmonster",children:"\u602a\u7269\u7cfb\u7edf\uff08Monster\uff09"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u884c\u4e3a\u4e0eAI\uff1aplan\u3001rate_target\u3001anger_*\u3001wander_to\u3001set_dest/unset_dest\uff0c\u652f\u6301\u5de1\u903b\u3001\u8ffd\u51fb\u4e0e\u7fa4\u805a\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u611f\u77e5\u4e0e\u79fb\u52a8\uff1acan_move_to\u3001will_move_to\u3001know_danger_at\u3001calc_movecost\u3001push_to\u3001bash_at\u3001attack_at\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u6218\u6597\u4e0e\u6297\u6027\uff1amelee_attack\u3001deal_damage_handle_type\u3001block_hit\u3001absorb_hit\u3001get_armor_type\u3001fall_damage_mod\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u7279\u6b8a\u80fd\u529b\uff1areset_special\u3001has_special\u3001special_available\uff0c\u652f\u6301\u51b7\u5374\u4e0e\u53ef\u7528\u6027\u7ba1\u7406\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.mermaid,{value:'sequenceDiagram\nparticipant Mon as "Monster"\nparticipant Map as "Map"\nparticipant Target as "\u76ee\u6807"\nMon->>Mon : plan()\nMon->>Map : route(from, target)\nMon->>Target : attack_at(p)/bash_at(p)\nTarget--\x3e>Mon : deal_damage(...)\nMon->>Mon : process_effects()\nMon->>Mon : move_to(p, force)/push_to(p)'}),"\n",(0,i.jsx)(n.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"monster.h"}),"\n",(0,i.jsx)(n.li,{children:"map.h"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"monster.h"}),"\n",(0,i.jsx)(n.li,{children:"map.h"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u4e16\u754c\u751f\u6210\u7cfb\u7edfworldfactory",children:"\u4e16\u754c\u751f\u6210\u7cfb\u7edf\uff08WorldFactory\uff09"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u4e16\u754c\u914d\u7f6e\uff1aWORLD\u7ed3\u6784\u4f53\u4fdd\u5b58\u4e16\u754c\u540d\u79f0\u3001\u9009\u9879\u3001\u6a21\u7ec4\u5217\u8868\u3001\u5b58\u6863\u5217\u8868\u4e0e\u65f6\u95f4\u6233\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u5de5\u5382\u63a5\u53e3\uff1amake_new_world\u3001get_world\u3001set_active_world\u3001all_worldnames\u3001delete_world\u7b49\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u6700\u8fd1\u4e16\u754c/\u89d2\u8272\uff1alast_world_name\u3001last_character_name\uff0c\u7528\u4e8e\u83dc\u5355\u4e0e\u542f\u52a8\u6d41\u7a0b\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.mermaid,{value:'flowchart TD\nStart(["\u9009\u62e9/\u521b\u5efa\u4e16\u754c"]) --\x3e Pick["pick_world()/make_new_world()"]\nPick --\x3e Config["\u914d\u7f6e\u9009\u9879/\u6a21\u7ec4"]\nConfig --\x3e Save["\u4fdd\u5b58\u4e16\u754c\u914d\u7f6e"]\nSave --\x3e Active["set_active_world()"]\nActive --\x3e Play["\u5f00\u59cb\u6e38\u620f/\u52a0\u8f7d\u5b58\u6863"]'}),"\n",(0,i.jsx)(n.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"worldfactory.h"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"worldfactory.h"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u56de\u5408\u5236\u673a\u5236\u4e0e\u65f6\u95f4\u63a8\u8fdb",children:"\u56de\u5408\u5236\u673a\u5236\u4e0e\u65f6\u95f4\u63a8\u8fdb"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u65f6\u95f4\u63a8\u8fdb\uff1acalendar.h\u63d0\u4f9bturn\u3001start_of_cataclysm\u3001season\u7b49\u5168\u5c40\u65f6\u95f4\u53d8\u91cf\uff1bdo_turn.cpp\u5728\u6bcf\u56de\u5408\u9012\u589eturn\u5e76\u5904\u7406\u5929\u6c14\u3001NPC\u3001\u4efb\u52a1\u4e0e\u5b9a\u65f6\u4e8b\u4ef6\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u5b9a\u65f6\u4e8b\u4ef6\uff1atimed_event_manager::process\u6309turn\u89e6\u53d1\u4e8b\u4ef6\uff0c\u652f\u6301 Faction/\u5730\u70b9/\u5f3a\u5ea6/\u952e\u503c\u7ba1\u7406\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.mermaid,{value:'sequenceDiagram\nparticipant Cal as "calendar"\nparticipant Do as "do_turn"\nparticipant TE as "timed_event_manager"\nparticipant GM as "Game"\nCal->>Do : turn += 1_turns\nDo->>TE : process()\nTE--\x3e>Do : actualize()/erase\nDo->>GM : \u5929\u6c14/\u4efb\u52a1/NPC\u5904\u7406'}),"\n",(0,i.jsx)(n.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"calendar.h"}),"\n",(0,i.jsx)(n.li,{children:"do_turn.cpp"}),"\n",(0,i.jsx)(n.li,{children:"timed_event.cpp"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"calendar.h"}),"\n",(0,i.jsx)(n.li,{children:"do_turn.cpp"}),"\n",(0,i.jsx)(n.li,{children:"timed_event.cpp"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790",children:"\u4f9d\u8d56\u5173\u7cfb\u5206\u6790"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u7ec4\u4ef6\u8026\u5408\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"game.h\u4e0emap.h\u3001creature.h\u3001worldfactory.h\u5b58\u5728\u5f3a\u8026\u5408\uff1a\u6e38\u620f\u4e3b\u63a7\u8d1f\u8d23\u52a0\u8f7d/\u4fdd\u5b58\u3001\u751f\u7269\u7ba1\u7406\u3001\u4e16\u754c\u5207\u6362\u3002"}),"\n",(0,i.jsx)(n.li,{children:"creature.h\u4e0echaracter.h\u3001monster.h\u901a\u8fc7\u7ee7\u627f\u5f62\u6210\u5c42\u6b21\u5316\u8bbe\u8ba1\uff0c\u5171\u4eab\u6218\u6597\u4e0e\u6548\u679c\u7cfb\u7edf\u3002"}),"\n",(0,i.jsx)(n.li,{children:"item.h\u88abcharacter.h\u4e0emonster.h\u5e7f\u6cdb\u4f7f\u7528\uff0c\u8d2f\u7a7f\u6218\u6597\u3001\u5236\u4f5c\u4e0e\u62fe\u53d6\u94fe\u8def\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5916\u90e8\u4f9d\u8d56\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5750\u6807\u7cfb\u7edf\u4f9d\u8d56coords_fwd.h\u4e0epoint.h\uff0c\u786e\u4fdd\u8de8\u6a21\u5757\u4e00\u81f4\u7684\u4e09\u7ef4\u5ea6\u8fd0\u7b97\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u65f6\u95f4\u63a8\u8fdb\u4f9d\u8d56calendar.h\uff0c\u6240\u6709\u5468\u671f\u6027\u903b\u8f91\u56f4\u7ed5turn\u5c55\u5f00\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.mermaid,{value:'graph LR\nGame["game.h"] --\x3e Map["map.h"]\nGame --\x3e World["worldfactory.h"]\nGame --\x3e Creature["creature.h"]\nCreature --\x3e Character["character.h"]\nCreature --\x3e Monster["monster.h"]\nCharacter --\x3e Item["item.h"]\nMonster --\x3e Item\nMap --\x3e Point["point.h"]\nMap --\x3e Coords["coords_fwd.h"]\nGame --\x3e Calendar["calendar.h"]\nGame --\x3e Events["timed_event.cpp"]'}),"\n",(0,i.jsx)(n.p,{children:"\u56fe\u8868\u6765\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"game.h"}),"\n",(0,i.jsx)(n.li,{children:"map.h"}),"\n",(0,i.jsx)(n.li,{children:"creature.h"}),"\n",(0,i.jsx)(n.li,{children:"character.h"}),"\n",(0,i.jsx)(n.li,{children:"monster.h"}),"\n",(0,i.jsx)(n.li,{children:"item.h"}),"\n",(0,i.jsx)(n.li,{children:"point.h"}),"\n",(0,i.jsx)(n.li,{children:"coords_fwd.h"}),"\n",(0,i.jsx)(n.li,{children:"calendar.h"}),"\n",(0,i.jsx)(n.li,{children:"timed_event.cpp"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"game.h"}),"\n",(0,i.jsx)(n.li,{children:"map.h"}),"\n",(0,i.jsx)(n.li,{children:"creature.h"}),"\n",(0,i.jsx)(n.li,{children:"character.h"}),"\n",(0,i.jsx)(n.li,{children:"monster.h"}),"\n",(0,i.jsx)(n.li,{children:"item.h"}),"\n",(0,i.jsx)(n.li,{children:"point.h"}),"\n",(0,i.jsx)(n.li,{children:"coords_fwd.h"}),"\n",(0,i.jsx)(n.li,{children:"calendar.h"}),"\n",(0,i.jsx)(n.li,{children:"timed_event.cpp"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u6027\u80fd\u8003\u91cf",children:"\u6027\u80fd\u8003\u91cf"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u5730\u56fe\u7f13\u5b58\u4e0e\u5931\u6548\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"set_transparency_cache_dirty\u3001set_seen_cache_dirty\u3001set_pathfinding_cache_dirty\u7b49\u7528\u4e8e\u7ec6\u7c92\u5ea6\u5931\u6548\uff0c\u907f\u514d\u5168\u56fe\u91cd\u7b97\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u901a\u8fc7invalidate_map_cache\u4e0ememory_cache_*\u63a5\u53e3\u63a7\u5236\u8bb0\u5fc6\u4e0e\u88c5\u9970\u7f13\u5b58\u4e00\u81f4\u6027\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u8def\u5f84\u4e0e\u53ef\u89c1\u6027\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"route/find_clear_path/straight_route\u91c7\u7528A*\u4e0eBresenham\u9884\u8fc7\u6ee4\uff0c\u7ed3\u5408move_cost\u4e0epassable\u51cf\u5c11\u65e0\u6548\u641c\u7d22\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u7269\u54c1\u5408\u5e76\u4e0e\u5806\u53e0\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"stacks_with/same_for_rle\u4e0ecombine/merge_charges\u964d\u4f4eUI\u4e0e\u7f51\u7edc\u4f20\u8f93\u5f00\u9500\uff0c\u63d0\u5347\u5927\u80cc\u5305\u573a\u666f\u6027\u80fd\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u65f6\u95f4\u63a8\u8fdb\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"do_turn\u4e2d\u4ec5\u5728\u5fc5\u8981\u65f6\u5904\u7406NPC\u4e0e\u5b9a\u65f6\u4e8b\u4ef6\uff0c\u907f\u514d\u6bcf\u56de\u5408\u5168\u91cf\u626b\u63cf\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u6545\u969c\u6392\u67e5\u6307\u5357",children:"\u6545\u969c\u6392\u67e5\u6307\u5357"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u5730\u56fe\u5361\u987f/\u5bfb\u8def\u5f02\u5e38\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u68c0\u67e5\u662f\u5426\u6b63\u786e\u8c03\u7528set_pathfinding_cache_dirty\u6216invalidate_map_cache\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u786e\u8ba4move_cost/impassable/passable\u903b\u8f91\u672a\u88ab\u81ea\u5b9a\u4e49\u5730\u5f62\u7834\u574f\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u7269\u54c1\u663e\u793a\u9519\u4e71\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u786e\u4fddstacks_with\u4e0edisplay_stacked_with\u7684\u6bd4\u8f83\u6761\u4ef6\u4e00\u81f4\uff0c\u907f\u514d\u8bef\u5224\u5806\u53e0\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u5408\u5e76\u524d\u68c0\u67e5combine/merge_charges\u7684\u8fd4\u56de\u503c\u4e0e\u6570\u91cf\u8fb9\u754c\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u602a\u7269\u4e0d\u79fb\u52a8/\u5361\u6b7b\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u68c0\u67e5pathfinding_cd/backoff\u6307\u6570\u9000\u907f\u903b\u8f91\uff0c\u786e\u8ba4monster::can_act\u4e0emove_effects\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u6838\u67e5know_danger_at\u4e0ewill_move_to\u7684\u5730\u5f62/\u9677\u9631\u5224\u5b9a\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u56de\u5408\u63a8\u8fdb\u5f02\u5e38\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u786e\u8ba4calendar::turn\u9012\u589e\u4e0etimed_event_manager::process\u8c03\u7528\u987a\u5e8f\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u68c0\u67e5\u5929\u6c14\u4e0eNPC\u52a0\u8f7d\u5206\u652f\uff0c\u907f\u514d\u91cd\u590d\u52a0\u8f7d\u6216\u9057\u6f0f\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u7ae0\u8282\u6765\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"map.h"}),"\n",(0,i.jsx)(n.li,{children:"item.h"}),"\n",(0,i.jsx)(n.li,{children:"monster.h"}),"\n",(0,i.jsx)(n.li,{children:"do_turn.cpp"}),"\n",(0,i.jsx)(n.li,{children:"timed_event.cpp"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u7ed3\u8bba",children:"\u7ed3\u8bba"}),"\n",(0,i.jsx)(n.p,{children:"Cataclysm-DDA\u7684\u6838\u5fc3\u7cfb\u7edf\u4ee5\u7edf\u4e00\u7684\u751f\u7269\u6a21\u578b\u4e0e\u4e09\u7ef4\u5ea6\u7a7a\u95f4\u4e3a\u57fa\u7840\uff0c\u901a\u8fc7\u4e25\u683c\u7684\u56de\u5408\u63a8\u8fdb\u4e0e\u7f13\u5b58\u5931\u6548\u7b56\u7565\uff0c\u5b9e\u73b0\u4e86\u9ad8\u6548\u7684\u5730\u56fe\u3001\u6218\u6597\u4e0e\u7269\u54c1\u7ba1\u7406\u3002\u4e16\u754c\u5de5\u5382\u4e0e\u65f6\u95f4\u8f74\u8fdb\u4e00\u6b65\u589e\u5f3a\u4e86\u53ef\u6269\u5c55\u6027\u4e0e\u53ef\u73a9\u6027\u3002\u5f00\u53d1\u8005\u53ef\u5728\u4e0a\u8ff0\u7ec4\u4ef6\u4e0a\u8fdb\u884c\u5b9a\u5236\u4e0e\u6269\u5c55\uff0c\u540c\u65f6\u9075\u5faa\u73b0\u6709\u63a5\u53e3\u4e0e\u7f13\u5b58\u7b56\u7565\u4ee5\u4fdd\u8bc1\u6027\u80fd\u4e0e\u7a33\u5b9a\u6027\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u9644\u5f55",children:"\u9644\u5f55"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u5173\u952eAPI\u4e0e\u8def\u5f84\u53c2\u8003\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5730\u56fe\u52a0\u8f7d/\u7ed8\u5236\uff1amap.h, map.h"}),"\n",(0,i.jsx)(n.li,{children:"\u5bfb\u8def\u4e0e\u79fb\u52a8\u6210\u672c\uff1amap.h, map.h"}),"\n",(0,i.jsx)(n.li,{children:"\u751f\u7269\u56de\u5408\u5904\u7406\uff1acreature.h, monster.h"}),"\n",(0,i.jsx)(n.li,{children:"\u7269\u54c1\u5806\u53e0\u4e0e\u5408\u5e76\uff1aitem.h"}),"\n",(0,i.jsx)(n.li,{children:"\u4e16\u754c\u5de5\u5382\u63a5\u53e3\uff1aworldfactory.h"}),"\n",(0,i.jsx)(n.li,{children:"\u56de\u5408\u63a8\u8fdb\u4e0e\u4e8b\u4ef6\uff1ado_turn.cpp, timed_event.cpp"}),"\n"]}),"\n"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);