# 怪物机制

- [怪物机制](#怪物机制)
  - [怪物索敌机制](#怪物索敌机制)
  - [怪物弱点机制](#怪物弱点机制)

## 怪物索敌机制

如同现实中绝大多数生物一般，怪物通常具备有「视觉」、「听觉」、「嗅觉」三种索敌手段，**你可以先按「x」选中生物，再按「e」打开生物说明界面来确认此生物具有什么感官。**

**视觉**：代表着怪物具备视力，他们可以通过视力看到并精确锁定你的位置，进而对你发起锲而不舍的追击。

如果你脱离了怪物的视线，他们会追踪到你最后所出现的位置，并尝试通过其他感官探测你的位置。

**听觉**：代表着怪物能够进行聆听，他们会自发的跟随声源并集中于声源周围。当你移动时会有脚步声，破门、砸窗也会有相应的噪音，声音强度会以数字化形式显示于侧边栏，其代表你所发出的声音会吸引多远距离的注意力。

就和你一样，怪物的听力并不精确，他们只是被吸引到声源所在的区域而不确定，但在此期间可能会闻到你所留下气味或看到你的身影。

你可以先在一个地方发出强噪音或投掷石块到空地以分散怪物注意力，再偷偷摸摸的探索也是一种利用听觉的思路……记得摸黑干事儿还有千万小心。

**嗅觉**：代表着怪物能够分析气味，气味会在玩家角色四周生成并向外扩散直至消散，当玩家移动时，气味便会在玩家身后留下一道轨迹直至最终自然消散。怪物尝试会追踪气味源，尾随你所留下的气味轨迹，并最终以视觉锁定你的具体方位。

**通常来说**：怪物索敌优先级为 视觉\>嗅觉\>听觉，怪物索敌范围为听觉\>视觉\>嗅觉。

**假设情景**：

在白天，你正尝试探索一处民居以获取一些食物，你知道街道处集中有大量丧尸，你为了规避风险决定破窗而入。但你所选的位置有些靠近街道，你砸碎玻璃的动静自然而然的吸引了一些丧尸的注意力。

它们还不知晓你的具体位置，它们只是无意识的朝着声源摸索，在你搜刮食物与饮料的同时它们也在慢慢接近窗户，它们渐渐开始嗅到一些气味，属于你的气味。这让它们知道了有生者于此路过，它们开始爬过被你摧毁的窗户，它们追随你的气味，客厅中来来回回的脚步声令他们无比亢奋。

很快的，它们在客厅找到了你，一对充满杀意与贪婪的双眸锁定了你，此时它们会尽可能破坏沿途障碍来接近你，只为分食你身上的鲜肉。在此过程中他们所造成的噪音很可能会连带着吸引街区上四处游荡的丧尸，那些丧尸们为了进入房子会不惜一切代价破坏门窗，其所发出的噪声会更进一步的吸引其他街区的丧尸。

你慌不择路的跑到了街道上……无数丧尸一齐看向你所在的位置，事态很快就演变成了一场惨绝人寰的追逐战。

**以上基本是一种颇为极端但也有点常见的情况，只要你有一定的游戏经验积累或者多死几次，自然而言的就会了解如何规避甚至利用这些感知。**

## 怪物弱点机制

因日益增多的高护甲单位逐渐使一些破甲无力的斩切武器发挥困难，弓弩几经平衡如今甚至可能凿不穿警察丧尸。他们终于决定加入一个史诗级改动以拯救钝器无双的局面，众望所归的弱点机制。

### 弱点机制概述：

具体来说，怪物如今拥有了一个与玩家类似的覆盖率系统，也就是弱点组。这是根据怪物特征而设计的用于计算伤害及效果的一组部位。以“人形怪物身体”这个弱点组为例，其包含了手、腿、眼、头四个弱点。在每个具体的弱点里，都会定义一系列数据，包括种种数据影响的命中难度、护甲值系数、暴击增伤系数、击中弱点可能触发的debuff等。debuff效果会根据弱点的特征而设定，如击中手臂有概率导致怪物踉跄，腿部概率击倒，头部概率击晕，眼部概率致盲。除了弱点本身的命中难度之外，还可能有额外触发条件，比如被击晕后才能触发。

### 影响命中弱点概率的因素：

-   **敏捷与感知**
-   **近战/远程/武器技能**
-   **头部和眼部的肢体系数**
-   **杀死\\解剖特定类型的怪物来获取的相应专长**

肢体系数默认值均为1，随累赘增加和受伤而降低，所以肢体系数部分在计算中仅用于削弱最终弱点技能等级。

### 弱点专长：

游戏中的大部分怪物拥有一族或多族弱点，每一族弱点对应一种专长，可以通过解剖怪物尸体查看能够获取的专长，但不是所有专长都能提高弱点命中率。这里为了简化描述，将能够提高弱点命中率的专长成为弱点专长。比如，解剖一些小体型的融合怪可以获得**基础生物学**，**生物基本构造**，**生理学**，**融合怪构造**四种专长，其中生物基础仅仅在制造合成时发挥作用，而生物基本构造是获取其他弱点专长的前置条件，因此只有**融合怪构造**和**生理学**是真正的弱点专长。

攻击怪物时，如果具备对应的弱点专长，将会提高命中弱点的能力。如果不具备对应的弱点专长，将会降低命中弱点的能力。对于部分弱点组（如**人造护甲**等），是否具备弱点专长会带来天差地别的影响。

击中、击杀或解剖拥有这个弱点族的敌人可以获取弱点专长经验，只不过三者效率天差地别。每次命中增加2秒，每次击杀增加1分钟，每次解剖100%完成增加30分钟。经验数字只会受到当前专注影响及智力经验百分比调整。解剖在当前是最有效率的。不幸的是，如果怪物死亡不留下尸体，将无法通过解剖练习。

### 弱点专长列举：

每段最后的感叹号数量提示了专长的重要性。弱点专长效果越显著，对应怪物的强度越大，适用范围越广，重要性就越高。

**丧尸生物学基础**：该专长对几乎所有丧尸有效。学习时间只有30分钟，可以通过屠宰几只僵尸获得。

该专长对命中弱点概率的提升，相当于增加四级武器或近战技能对命中弱点概率的提升。下文为表述方便，统一称为“具备该专长相当于提升四级技能”。注意，弱点专长并不能像技能一样提高武器的面板伤害。缺少该专长不会降低命中弱点概率。

**亚人生物学基础**：该专长对伽卜沃克、血肉傀儡、相位潜行者、格拉肯、牛头人等怪物有效。学习时间只有30分钟，可以通过屠宰格拉肯获得。具备该专长相当于提升四级技能，缺少该专长不会降低命中弱点概率。（**！**）

**融合怪构造**：该专长对融合怪有效，学习时间只有30分钟。具备该专长相当于提升八级技能，缺少该专长相当于降低四级技能。（**！！**）

**人造护甲**：该专长对凯夫拉丧尸、军人丧尸等有效。学习时间为6小时，需要多次屠宰才能获得。具备该专长相当于提升八级技能，缺少该专长相当于降低八级技能。（**！！！**）

**天然护甲**：该专长对大部分特殊米戈、狂暴融合怪、凯夫拉丧尸等有效。学习时间为6小时，需要多次屠宰才能获得。具备该专长相当于提升八级技能，缺少该专长相当于降低八级技能。（**！！！**）

**改造人构造**：该专长对改造人有效。学习时间为6小时，需要多次屠宰才能获得。具备该专长相当于提升八级技能，缺少该专长相当于降低八级技能。

**鸟类生物学**：该专长对各种变异鸟类等有效。学习时间为30分钟。具备该专长相当于提升两级技能，缺少该专长不会降低命中弱点概率。

**犬科生物学**：该专长对各种丧尸犬等有效。学习时间为30分钟。具备该专长相当于提升两级技能，缺少该专长不会降低命中弱点概率。

**有蹄目基本构造**：该专长对各种大型变异哺乳动物有效。学习时间为30分钟。具备该专长相当于提升两级技能，缺少该专长不会降低命中弱点概率。

**无脊椎生物学**：该专长对各种虫子有效。学习时间为30分钟。具备该专长相当于提升两级技能，缺少该专长不会降低命中弱点概率。

**甲虫构造**：该专长对各种变异甲虫有效。学习时间为1小时。具备该专长相当于提升八级技能，缺少该专长相当于降低四级技能。

**蜈蚣构造**：该专长对各种变异蜈蚣有效。学习时间为30分钟。具备该专长相当于提升八级技能，缺少该专长相当于降低四级技能。

**膜翅昆虫构造**：该专长对各种蚂蚁、黄蜂、蜜蜂等有效。学习时间为30分钟。具备该专长相当于提升八级技能，缺少该专长相当于降低四级技能。（**！**）

**蜘蛛构造**：该专长对各种蜘蛛有效。学习时间为30分钟。具备该专长相当于提升八级技能，缺少该专长相当于降低四级技能。注意，虚空编织者也是一种蜘蛛（滑稽）。（**！**）

**飞行生物构造**：该专长对各种飞行生物有效。学习时间为30分钟。具备该专长相当于提升两级技能，缺少该专长不会降低命中弱点概率。

**骨化生物构造**：该专长对骷髅巨兽等有效。学习时间为30分钟。具备该专长相当于提升八级技能，缺少该专长相当于降低四级技能。（**！！**）

**小型人型生物**：该专长对儿童丧尸等有效。学习时间为30分钟。具备该专长相当于提升四级技能，缺少该专长不会降低命中弱点概率。

**巨型人型生物**：该专长对丧尸浩克、骷髅巨兽等有效。学习时间为30分钟。具备该专长相当于提升八级技能，缺少该专长相当于降低四级技能。（**！！！**）

**异界生物构造**：该专长对隐形猎手、燃烧之眼等异界怪物有效。学习时间为30分钟。具备该专长相当于提升两级技能，缺少该专长相当于降低四级技能。（**！！**）

**米·戈构造基础**：该专场对各种米戈有效。学习时间为30分钟。具备该专长相当于提升两级技能，缺少该专长相当于降低四级技能。（**！**）

**米·戈构造专精**：该专场对各种米戈有效。学习时间为1小时。具备该专长相当于提升四级技能，缺少该专长相当于降低四级技能。（**！**）

**真菌构造基础**：该专场对各种真菌有效。学习时间为30分钟。具备该专长相当于提升两级技能，缺少该专长相当于降低四级技能。

**真菌构造专精**：该专场对各种真菌有效。学习时间为1小时。具备该专长相当于提升四级技能，缺少该专长相当于降低四级技能。

**水蛭花构造基础**：该专场对各种水蛭花有效。学习时间为30分钟。具备该专长相当于提升两级技能，缺少该专长相当于降低四级技能。

**水蛭花构造专精**：该专场对各种水蛭花有效。学习时间为1小时。具备该专长相当于提升四级技能，缺少该专长相当于降低四级技能。

**三尖树构造基础**：该专场对各种三尖树有效。学习时间为30分钟。具备该专长相当于提升两级技能，缺少该专长相当于降低四级技能。

**三尖树构造专精**：该专场对各种三尖树有效。学习时间为1小时。具备该专长相当于提升四级技能，缺少该专长相当于降低四级技能。

**变形怪构造基础**：该专场对各种变形怪有效。学习时间为30分钟。具备该专长相当于提升两级技能，缺少该专长相当于降低四级技能。

**变形怪构造专精**：该专场对各种变形怪有效。学习时间为1小时。具备该专长相当于提升四级技能，缺少该专长相当于降低四级技能。

**生理学**：该专场对几乎所有“活”物有效。学习时间为12小时，需要长时间解剖。具备该专长相当于提升四级技能，缺少该专长不会降低命中弱点概率。

**电磁学**：该专长对许多放电怪物有效。学习时间为8小时，需要长时间解剖。具备该专长相当于提升四级技能，缺少该专长不会降低命中弱点概率。

**两栖生物学**：学习时间为8小时，需要长时间解剖。具备该专长相当于提升两级技能，缺少该专长不会降低命中弱点概率。

## 弱点机制详解

### 弱点技能等级

在程序中，为了计算命中弱点的概率，首先计算出一个弱点技能等级，公式为：（技能1与技能2的平均+（敏捷+感知）/8-2）×（肢体系数1与肢体系数2的平均）。

其中技能1、2分别是近战+对应武器（钝斩刺徒手），或枪法+对应武器，或投掷×2。

肢体系数分近战和远程，近战是视野+反应，远程是视野×2。默认情况下视野系数100%由眼部提供，反应系数70%来自眼部，30%来自头部。

### 实际弱点命中概率计算

下面以一个普通僵尸为例计算弱点。玩家按照徒手近战双5，敏捷感知双12，无累赘和受伤，那么基础的弱点命中等级为6。基础丧尸拥有两个有效弱点族，生理学和基础丧尸，惩罚/增益均为0/2，同时掌握的话则玩家最终弱点命中为10。

接下来我们计算实际命中概率。首先roll一个0-100的随机数作为浮动难度，然后依次选取怪物弱点组里的每个弱点进行判定。

普通丧尸的弱点组即前述人形怪物身体：手、腿、眼、头，弱点拥有空隙率、命中难度和空隙系数，均可对应特定的伤害类型单独定义。

弱点命中系数公式为：空隙率×空隙系数×命中难度系数。命中难度系数是以（弱点命中-命中难度）为中心的一个标准差为2的正态分布，所以如果你的技能/属性/专长过于弱，将几乎不可能命中弱点。反之将几乎次次命中弱点。

普通丧尸的腿部弱点空隙为15，刺击及远程空隙系数为0.75，命中难度为远程3近战1。眼部弱点空隙为1，钝及斩的空隙系数为0.5，命中难度为远程8近战6。则单次roll点下的基础命中值为：腿部15，眼部0.5。15就是说单次概率为15%。

根据弱点命中等级，玩家将拥有额外判定的机会，每2.5点多一次。所以实际的判定就是独立重复事件概率，多次不中的概率为（1-0.15）的n次方。所以腿部最命中值为55.6。

### 弱点的额外护甲与破甲

举例来说，人形怪物身体装甲这个弱点组拥有一个覆盖率40%的身体装甲弱点，拥有额外近战和远程抗性，玩家的攻击在击中这个“弱点”部位时有概率破甲，破甲后怪物增加一个“破烂盔甲”的弱点，击中此部位怪物抗性将只有基础防御的25%。

举例，士兵丧尸默认有钝击12斩击25刺击20射击20的防御，在没破甲时近战命中身体装甲，按照钝击12斩击37.5刺击30计算，破甲后击中“破烂盔甲”弱点，按照钝击3斩击6.25刺击5计算。

